var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function r(e){return e()}function i(){return Object.create(null)}function o(e){e.forEach(r)}function a(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function u(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(e,t,n){e.$$.on_destroy.push(u(t,n))}function l(e,t,n,r){if(e){const i=h(e,t,n,r);return e[0](i)}}function h(e,t,r,i){return e[1]&&i?n(r.ctx.slice(),e[1](i(t))):r.ctx}function f(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if("object"==typeof t.dirty){const e=[],n=Math.max(t.dirty.length,i.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|i[r];return e}return t.dirty|i}return t.dirty}const d="undefined"!=typeof window;let p=d?()=>window.performance.now():()=>Date.now(),m=d?e=>requestAnimationFrame(e):e;const g=new Set;function y(e){g.forEach(t=>{t.c(e)||(g.delete(t),t.f())}),0!==g.size&&m(y)}function v(e){let t;return 0===g.size&&m(y),{promise:new Promise(n=>{g.add(t={c:e,f:n})}),abort(){g.delete(t)}}}function b(e,t){e.appendChild(t)}function w(e,t,n){e.insertBefore(t,n||null)}function E(e){e.parentNode.removeChild(e)}function T(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function S(e){return document.createElement(e)}function I(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function C(e){return document.createTextNode(e)}function k(){return C(" ")}function D(){return C("")}function A(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function N(e){return function(t){return t.preventDefault(),e.call(this,t)}}function x(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function _(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function R(e,t){t=""+t,e.data!==t&&(e.data=t)}function M(e,t){(null!=t||e.value)&&(e.value=t)}function O(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function P(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function V(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function L(e,t,n){e.classList[n?"add":"remove"](t)}function $(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}let F,q,B=0,U={};function j(e,t,n,r,i,o,a,s=0){const u=16.666/r;let c="{\n";for(let e=0;e<=1;e+=u){const r=t+(n-t)*o(e);c+=100*e+`%{${a(r,1-r)}}\n`}const l=c+`100% {${a(n,1-n)}}\n}`,h=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(l)}_${s}`;if(!U[h]){if(!F){const e=S("style");document.head.appendChild(e),F=e.sheet}U[h]=!0,F.insertRule(`@keyframes ${h} ${l}`,F.cssRules.length)}const f=e.style.animation||"";return e.style.animation=`${f?`${f}, `:""}${h} ${r}ms linear ${i}ms 1 both`,B+=1,h}function z(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")).join(", "),t&&!--B&&m(()=>{if(B)return;let e=F.cssRules.length;for(;e--;)F.deleteRule(e);U={}})}function W(e){q=e}function K(){if(!q)throw new Error("Function called outside component initialization");return q}function G(e){K().$$.on_mount.push(e)}function Q(e){K().$$.on_destroy.push(e)}function H(){const e=K();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const i=$(t,n);r.slice().forEach(t=>{t.call(e,i)})}}}function Y(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}const X=[],J=[],Z=[],ee=[],te=Promise.resolve();let ne=!1;function re(e){Z.push(e)}function ie(e){ee.push(e)}const oe=new Set;function ae(){do{for(;X.length;){const e=X.shift();W(e),se(e.$$)}for(;J.length;)J.pop()();for(let e=0;e<Z.length;e+=1){const t=Z[e];oe.has(t)||(oe.add(t),t())}Z.length=0}while(X.length);for(;ee.length;)ee.pop()();ne=!1,oe.clear()}function se(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(re)}}let ue;function ce(){return ue||(ue=Promise.resolve(),ue.then(()=>{ue=null})),ue}function le(e,t,n){e.dispatchEvent($(`${t?"intro":"outro"}${n}`))}const he=new Set;let fe;function de(){fe={r:0,c:[],p:fe}}function pe(){fe.r||o(fe.c),fe=fe.p}function me(e,t){e&&e.i&&(he.delete(e),e.i(t))}function ge(e,t,n,r){if(e&&e.o){if(he.has(e))return;he.add(e),fe.c.push(()=>{he.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const ye={duration:0};function ve(n,r,i,s){let u=r(n,i),c=s?0:1,l=null,h=null,f=null;function d(){f&&z(n,f)}function m(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function g(r){const{delay:i=0,duration:a=300,easing:s=t,tick:g=e,css:y}=u||ye,b={start:p()+i,b:r};r||(b.group=fe,fe.r+=1),l?h=b:(y&&(d(),f=j(n,c,r,a,i,s,y)),r&&g(0,1),l=m(b,a),re(()=>le(n,r,"start")),v(e=>{if(h&&e>h.start&&(l=m(h,a),h=null,le(n,l.b,"start"),y&&(d(),f=j(n,c,l.b,l.duration,0,s,u.css))),l)if(e>=l.end)g(c=l.b,1-c),le(n,l.b,"end"),h||(l.b?d():--l.group.r||o(l.group.c)),l=null;else if(e>=l.start){const t=e-l.start;c=l.a+l.d*s(t/l.duration),g(c,1-c)}return!(!l&&!h)}))}return{run(e){a(u)?ce().then(()=>{u=u(),g(e)}):g(e)},end(){d(),l=h=null}}}const be="undefined"!=typeof window?window:global;function we(e,t){e.d(1),t.delete(e.key)}function Ee(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const a=e[o],s=t[o];if(s){for(const e in a)e in s||(r[e]=1);for(const e in s)i[e]||(n[e]=s[e],i[e]=1);e[o]=s}else for(const e in a)i[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function Te(e){return"object"==typeof e&&null!==e?e:{}}function Se(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Ie(e){e&&e.c()}function Ce(e,t,n){const{fragment:i,on_mount:s,on_destroy:u,after_update:c}=e.$$;i&&i.m(t,n),re(()=>{const t=s.map(r).filter(a);u?u.push(...t):o(t),e.$$.on_mount=[]}),c.forEach(re)}function ke(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function De(e,t){-1===e.$$.dirty[0]&&(X.push(e),ne||(ne=!0,te.then(ae)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ae(t,n,r,a,s,u,c=[-1]){const l=q;W(t);const h=n.props||{},f=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:i(),dirty:c};let d=!1;f.ctx=r?r(t,h,(e,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&s(f.ctx[e],f.ctx[e]=i)&&(f.bound[e]&&f.bound[e](i),d&&De(t,e)),n}):[],f.update(),d=!0,o(f.before_update),f.fragment=!!a&&a(f.ctx),n.target&&(n.hydrate?f.fragment&&f.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):f.fragment&&f.fragment.c(),n.intro&&me(t.$$.fragment),Ce(t,n.target,n.anchor),ae()),W(l)}class Ne{$destroy(){ke(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function xe(t){let n;return{c(){n=S("div"),n.innerHTML='<div id="header-logo" class=" svelte-1sdj23w"><a href="#"><img src="images/MUTEX%20White.png" alt="" class="svelte-1sdj23w"></a></div>',_(n,"id","brand"),_(n,"class","svelte-1sdj23w")},m(e,t){w(e,n,t)},p:e,i:e,o:e,d(e){e&&E(n)}}}class _e extends Ne{constructor(e){super(),Ae(this,e,null,xe,s,{})}}function Re(e){let t,n,r,i,a,s,u,c;const d=e[5].default,p=l(d,e,e[4],null);return{c(){t=S("div"),n=S("ul"),p&&p.c(),r=k(),i=S("button"),i.innerHTML='<span aria-hidden="true" class="svelte-hgrfde"></span>',a=k(),s=S("div"),_(n,"class","show-menu svelte-hgrfde"),_(i,"class","nav-tgl svelte-hgrfde"),_(i,"type","button"),_(i,"aria-label","toggle menu"),_(s,"id","circle"),_(s,"class","svelte-hgrfde"),_(t,"class","menu svelte-hgrfde"),L(t,"active",e[1])},m(o,l){w(o,t,l),b(t,n),p&&p.m(n,null),b(t,r),b(t,i),b(t,a),b(t,s),e[6](t),u=!0,c=[A(n,"click",e[2]),A(i,"click",e[3]),A(s,"click",e[2])]},p(e,[n]){p&&p.p&&16&n&&p.p(h(d,e,e[4],null),f(d,e[4],n,null)),2&n&&L(t,"active",e[1])},i(e){u||(me(p,e),u=!0)},o(e){ge(p,e),u=!1},d(n){n&&E(t),p&&p.d(n),e[6](null),o(c)}}}function Me(e,t,n){let r,i=!1,o=()=>{n(1,i=!1)},{$$slots:a={},$$scope:s}=t;return e.$set=e=>{"$$scope"in e&&n(4,s=e.$$scope)},[r,i,o,function(){-1===r.className.indexOf("active")?n(1,i=!0):o()},s,a,function(e){J[e?"unshift":"push"](()=>{n(0,r=e)})}]}class Oe extends Ne{constructor(e){super(),Ae(this,e,Me,Re,s,{})}}const Pe=[];function Ve(e,t){return{subscribe:Le(e,t).subscribe}}function Le(t,n=e){let r;const i=[];function o(e){if(s(t,e)&&(t=e,r)){const e=!Pe.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),Pe.push(n,t)}if(e){for(let e=0;e<Pe.length;e+=2)Pe[e][0](Pe[e+1]);Pe.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(a,s=e){const u=[a,s];return i.push(u),1===i.length&&(r=n(o)||e),a(t),()=>{const e=i.indexOf(u);-1!==e&&i.splice(e,1),0===i.length&&(r(),r=null)}}}}function $e(t,n,r){const i=!Array.isArray(t),s=i?[t]:t,c=n.length<2;return Ve(r,t=>{let r=!1;const l=[];let h=0,f=e;const d=()=>{if(h)return;f();const r=n(i?l[0]:l,t);c?t(r):f=a(r)?r:e},p=s.map((e,t)=>u(e,e=>{l[t]=e,h&=~(1<<t),r&&d()},()=>{h|=1<<t}));return r=!0,d(),function(){o(p),f()}})}function Fe(e){let t,n;var r=e[0];function i(e){return{props:{params:e[1]}}}if(r)var o=new r(i(e));return{c(){o&&Ie(o.$$.fragment),t=D()},m(e,r){o&&Ce(o,e,r),w(e,t,r),n=!0},p(e,[n]){const a={};if(2&n&&(a.params=e[1]),r!==(r=e[0])){if(o){de();const e=o;ge(e.$$.fragment,1,0,()=>{ke(e,1)}),pe()}r?(Ie((o=new r(i(e))).$$.fragment),me(o.$$.fragment,1),Ce(o,t.parentNode,t)):o=null}else r&&o.$set(a)},i(e){n||(o&&me(o.$$.fragment,e),n=!0)},o(e){o&&ge(o.$$.fragment,e),n=!1},d(e){e&&E(t),o&&ke(o,e)}}}function qe(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let r="";return n>-1&&(r=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:r}}const Be=Ve(qe(),(function(e){const t=()=>{e(qe())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}})),Ue=$e(Be,e=>e.location);$e(Be,e=>e.querystring);function je(e){if(!e||e.length<1||"/"!=e.charAt(0)&&0!==e.indexOf("#/"))throw Error("Invalid parameter location");setTimeout(()=>{window.location.hash=("#"==e.charAt(0)?"":"#")+e},0)}function ze(t,n,r){let i,o=e;c(t,Be,e=>r(4,i=e)),t.$$.on_destroy.push(()=>o());let{routes:a={}}=n,{prefix:s=""}=n;class u{constructor(e,t){if(!t||"function"!=typeof t&&("object"!=typeof t||!0!==t._sveltesparouter))throw Error("Invalid component object");if(!e||"string"==typeof e&&(e.length<1||"/"!=e.charAt(0)&&"*"!=e.charAt(0))||"object"==typeof e&&!(e instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:n,keys:r}=function(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,i,o,a=[],s="",u=e.split("/");for(u[0]||u.shift();i=u.shift();)"*"===(n=i[0])?(a.push("wild"),s+="/(.*)"):":"===n?(r=i.indexOf("?",1),o=i.indexOf(".",1),a.push(i.substring(1,~r?r:~o?o:i.length)),s+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(s+=(~r?"?":"")+"\\"+i.substring(o))):s+="/"+i;return{keys:a,pattern:new RegExp("^"+s+(t?"(?=$|/)":"/?$"),"i")}}(e);this.path=e,"object"==typeof t&&!0===t._sveltesparouter?(this.component=t.route,this.conditions=t.conditions||[],this.userData=t.userData):(this.component=t,this.conditions=[],this.userData=void 0),this._pattern=n,this._keys=r}match(e){s&&e.startsWith(s)&&(e=e.substr(s.length)||"/");const t=this._pattern.exec(e);if(null===t)return null;if(!1===this._keys)return t;const n={};let r=0;for(;r<this._keys.length;)n[this._keys[r]]=t[++r]||null;return n}checkConditions(e){for(let t=0;t<this.conditions.length;t++)if(!this.conditions[t](e))return!1;return!0}}const l=a instanceof Map?a:Object.entries(a),h=[];for(const[e,t]of l)h.push(new u(e,t));let f=null,d={};const p=H(),m=(e,t)=>{setTimeout(()=>{p(e,t)},0)};return t.$set=e=>{"routes"in e&&r(2,a=e.routes),"prefix"in e&&r(3,s=e.prefix)},t.$$.update=()=>{if(17&t.$$.dirty){r(0,f=null);let e=0;for(;!f&&e<h.length;){const t=h[e].match(i.location);if(t){const n={component:h[e].component,name:h[e].component.name,location:i.location,querystring:i.querystring,userData:h[e].userData};if(!h[e].checkConditions(n)){m("conditionsFailed",n);break}r(0,f=h[e].component),r(1,d=t),m("routeLoaded",n)}e++}}},[f,d,a,s]}class We extends Ne{constructor(e){super(),Ae(this,e,ze,Fe,s,{routes:2,prefix:3})}}function Ke(t){let n,r,i,o,a,s,u,c,l;return{c(){n=S("li"),r=S("a"),i=S("div"),o=I("svg"),a=I("rect"),s=k(),u=S("div"),c=C(t[2]),_(a,"class","shape svelte-3twe52"),_(a,"height",t[0]),_(a,"width",t[1]),_(a,"rx","15"),_(o,"height",t[0]),_(o,"width",t[1]),_(o,"xmlns","http://www.w3.org/2000/svg"),_(o,"class","svelte-3twe52"),_(u,"class","animatedLinkText svelte-3twe52"),_(i,"class","svg-wrapper svelte-3twe52"),_(r,"class","animatedLinkTag svelte-3twe52"),_(r,"href",t[3])},m(e,h){w(e,n,h),b(n,r),b(r,i),b(i,o),b(o,a),b(i,s),b(i,u),b(u,c),t[9](r),l=A(r,"click",t[5])},p(e,[t]){1&t&&_(a,"height",e[0]),2&t&&_(a,"width",e[1]),1&t&&_(o,"height",e[0]),2&t&&_(o,"width",e[1]),4&t&&R(c,e[2]),8&t&&_(r,"href",e[3])},i:e,o:e,d(e){e&&E(n),t[9](null),l()}}}function Ge(e,t,n){let r;c(e,Ue,e=>n(7,r=e));let i,{height:o}=t,{width:a}=t,{text:s}=t,{location:u}=t,{type:l="scroll"}=t,h=function(e){e.preventDefault();const t=i.getAttribute("href"),n=document.querySelector(t);if(!n)return;const r=(o=n,Math.floor(o.getBoundingClientRect().top));var o;window.scrollBy({top:r-50,left:0,behavior:"smooth"})};return e.$set=e=>{"height"in e&&n(0,o=e.height),"width"in e&&n(1,a=e.width),"text"in e&&n(2,s=e.text),"location"in e&&n(3,u=e.location),"type"in e&&n(6,l=e.type)},[o,a,s,u,i,e=>{"/"===r?("link"===l&&(e.preventDefault(),je(u)),"scroll"!==l?"disapled"===l&&e.preventDefault():h(e)):je("/")},l,r,h,function(e){J[e?"unshift":"push"](()=>{n(4,i=e)})}]}class Qe extends Ne{constructor(e){super(),Ae(this,e,Ge,Ke,s,{height:0,width:1,text:2,location:3,type:6})}}function He(t){let n,r,i,o;return{c(){n=S("li"),r=S("div"),i=C(t[0]),_(r,"class","btn svelte-gb1tgu"),L(r,"arrow",t[1]),_(n,"class","svelte-gb1tgu")},m(e,a){w(e,n,a),b(n,r),b(r,i),o=A(r,"click",t[2])},p(e,[t]){1&t&&R(i,e[0]),2&t&&L(r,"arrow",e[1])},i:e,o:e,d(e){e&&E(n),o()}}}function Ye(e,t,n){let{text:r}=t,{arrow:i}=t;return e.$set=e=>{"text"in e&&n(0,r=e.text),"arrow"in e&&n(1,i=e.arrow)},[r,i,function(t){Y(e,t)}]}class Xe extends Ne{constructor(e){super(),Ae(this,e,Ye,He,s,{text:0,arrow:1})}}function Je(t){let n,r,i;return{c(){n=S("div"),r=C(t[0]),_(n,"class","btn svelte-1s7vhhj"),L(n,"arrow",t[1]),L(n,"primary",t[2]),L(n,"secondary",t[3]),L(n,"warning",t[4]),L(n,"outlined",t[5])},m(e,o){w(e,n,o),b(n,r),i=A(n,"click",N(t[6]))},p(e,[t]){1&t&&R(r,e[0]),2&t&&L(n,"arrow",e[1]),4&t&&L(n,"primary",e[2]),8&t&&L(n,"secondary",e[3]),16&t&&L(n,"warning",e[4]),32&t&&L(n,"outlined",e[5])},i:e,o:e,d(e){e&&E(n),i()}}}function Ze(e,t,n){let{text:r}=t,{arrow:i}=t,{primary:o}=t,{secondary:a}=t,{warning:s}=t,{outlined:u}=t;return e.$set=e=>{"text"in e&&n(0,r=e.text),"arrow"in e&&n(1,i=e.arrow),"primary"in e&&n(2,o=e.primary),"secondary"in e&&n(3,a=e.secondary),"warning"in e&&n(4,s=e.warning),"outlined"in e&&n(5,u=e.outlined)},[r,i,o,a,s,u,function(t){Y(e,t)}]}class et extends Ne{constructor(e){super(),Ae(this,e,Ze,Je,s,{text:0,arrow:1,primary:2,secondary:3,warning:4,outlined:5})}}function tt(t){let n,r,i,a,s,u,c;return{c(){n=S("div"),r=S("div"),r.innerHTML='<p class="svelte-6plpko">Register for Event</p>',i=k(),a=S("div"),a.innerHTML='<p class="svelte-6plpko">Register for Competition</p>',s=k(),u=S("div"),u.innerHTML='<p class="svelte-6plpko">Register for Workshops</p>',_(r,"class","top open  svelte-6plpko"),_(a,"class","mid open svelte-6plpko"),_(u,"class","bot open svelte-6plpko"),_(n,"class","container svelte-6plpko")},m(e,o){w(e,n,o),b(n,r),b(n,i),b(n,a),b(n,s),b(n,u),c=[A(r,"click",x(t[0])),A(a,"click",x(t[1])),A(u,"click",x(t[2]))]},p:e,i:e,o:e,d(e){e&&E(n),o(c)}}}function nt(e){const t=H();return[()=>t("clickLeft"),()=>t("clickMid"),()=>t("clickRight")]}class rt extends Ne{constructor(e){super(),Ae(this,e,nt,tt,s,{})}}function it(e){const t=e-1;return t*t*t+1}function ot(e,{delay:n=0,duration:r=400,easing:i=t}){const o=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:i,css:e=>`opacity: ${e*o}`}}function at(e,{delay:t=0,duration:n=400,easing:r=it,x:i=0,y:o=0,opacity:a=0}){const s=getComputedStyle(e),u=+s.opacity,c="none"===s.transform?"":s.transform,l=u*(1-a);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*i}px, ${(1-e)*o}px);\n\t\t\topacity: ${u-l*t}`}}function st(e){let t,n,r,i,a,s,u;const c=e[6].default,d=l(c,e,e[5],null);return{c(){t=S("div"),r=k(),i=S("div"),d&&d.c(),_(t,"class","modal-background svelte-1ew5ihw"),_(i,"class","modal svelte-1ew5ihw"),_(i,"role","dialog"),_(i,"aria-modal","true")},m(n,o){w(n,t,o),w(n,r,o),w(n,i,o),d&&d.m(i,null),e[7](i),s=!0,u=[A(window,"keydown",e[2]),A(t,"click",e[1])]},p(e,[t]){d&&d.p&&32&t&&d.p(h(c,e,e[5],null),f(c,e[5],t,null))},i(e){s||(re(()=>{n||(n=ve(t,ot,{},!0)),n.run(1)}),me(d,e),re(()=>{a||(a=ve(i,at,{y:300},!0)),a.run(1)}),s=!0)},o(e){n||(n=ve(t,ot,{},!1)),n.run(0),ge(d,e),a||(a=ve(i,at,{y:300},!1)),a.run(0),s=!1},d(s){s&&E(t),s&&n&&n.end(),s&&E(r),s&&E(i),d&&d.d(s),e[7](null),s&&a&&a.end(),o(u)}}}function ut(e,t,n){const r=H(),i=()=>r("close");let o;const a="undefined"!=typeof document&&document.activeElement;a&&Q(()=>{a.focus()});let{$$slots:s={},$$scope:u}=t;return e.$set=e=>{"$$scope"in e&&n(5,u=e.$$scope)},[o,i,e=>{if("Escape"!==e.key){if("Tab"===e.key){const t=o.querySelectorAll("*"),n=Array.from(t).filter(e=>e.tabIndex>=0);let r=n.indexOf(document.activeElement);-1===r&&e.shiftKey&&(r=0),r+=n.length+(e.shiftKey?-1:1),r%=n.length,n[r].focus(),e.preventDefault()}}else i()},r,a,u,s,function(e){J[e?"unshift":"push"](()=>{n(0,o=e)})}]}class ct extends Ne{constructor(e){super(),Ae(this,e,ut,st,s,{})}}const{window:lt}=be;function ht(t){let n,r,i,o,a,s;const u=new Qe({props:{location:"#aboutSection",width:75,height:30,text:"ABOUT"}}),c=new Qe({props:{location:"#speakers",width:100,height:30,text:"SPEAKERS"}}),l=new Qe({props:{location:"#sponsors",width:100,height:30,text:"PARTNERS"}}),h=new Qe({props:{location:"/exhibition-Form",width:85,height:30,text:"EXHIBIT",type:"link"}}),f=new Qe({props:{location:"#",width:85,height:30,text:"AGENDA",type:"disapled"}}),d=new Xe({props:{arrow:!0,text:"REGISTER"}});return d.$on("click",t[3]),{c(){Ie(u.$$.fragment),n=k(),Ie(c.$$.fragment),r=k(),Ie(l.$$.fragment),i=k(),Ie(h.$$.fragment),o=k(),Ie(f.$$.fragment),a=k(),Ie(d.$$.fragment)},m(e,t){Ce(u,e,t),w(e,n,t),Ce(c,e,t),w(e,r,t),Ce(l,e,t),w(e,i,t),Ce(h,e,t),w(e,o,t),Ce(f,e,t),w(e,a,t),Ce(d,e,t),s=!0},p:e,i(e){s||(me(u.$$.fragment,e),me(c.$$.fragment,e),me(l.$$.fragment,e),me(h.$$.fragment,e),me(f.$$.fragment,e),me(d.$$.fragment,e),s=!0)},o(e){ge(u.$$.fragment,e),ge(c.$$.fragment,e),ge(l.$$.fragment,e),ge(h.$$.fragment,e),ge(f.$$.fragment,e),ge(d.$$.fragment,e),s=!1},d(e){ke(u,e),e&&E(n),ke(c,e),e&&E(r),ke(l,e),e&&E(i),ke(h,e),e&&E(o),ke(f,e),e&&E(a),ke(d,e)}}}function ft(e){let t;const n=new ct({props:{$$slots:{default:[mt],controls:[pt],header:[dt]},$$scope:{ctx:e}}});return n.$on("close",e[3]),{c(){Ie(n.$$.fragment)},m(e,r){Ce(n,e,r),t=!0},p(e,t){const r={};1024&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(me(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){ke(n,e)}}}function dt(e){let t;return{c(){t=S("h2"),t.textContent="Register as ?",_(t,"slot","header")},m(e,n){w(e,t,n)},d(e){e&&E(t)}}}function pt(t){let n,r;const i=new et({props:{text:"Choose"}});return{c(){n=S("span"),Ie(i.$$.fragment),_(n,"slot","controls")},m(e,t){w(e,n,t),Ce(i,n,null),r=!0},p:e,i(e){r||(me(i.$$.fragment,e),r=!0)},o(e){ge(i.$$.fragment,e),r=!1},d(e){e&&E(n),ke(i)}}}function mt(t){let n,r,i;const o=new rt({});return o.$on("clickMid",t[4]),o.$on("clickLeft",t[5]),o.$on("clickRight",t[6]),{c(){n=k(),r=k(),Ie(o.$$.fragment)},m(e,t){w(e,n,t),w(e,r,t),Ce(o,e,t),i=!0},p:e,i(e){i||(me(o.$$.fragment,e),i=!0)},o(e){ge(o.$$.fragment,e),i=!1},d(e){e&&E(n),e&&E(r),ke(o,e)}}}function gt(e){let t,n,r,i,o,a,s;const u=new _e({}),c=new Oe({props:{$$slots:{default:[ht]},$$scope:{ctx:e}}});let l=e[1]&&ft(e);return{c(){t=S("header"),n=S("nav"),Ie(u.$$.fragment),r=k(),Ie(c.$$.fragment),i=k(),l&&l.c(),o=D(),_(n,"class","svelte-bprszc"),L(n,"navBackgroundColor",e[0]),_(t,"class","svelte-bprszc")},m(h,f){w(h,t,f),b(t,n),Ce(u,n,null),b(n,r),Ce(c,n,null),w(h,i,f),l&&l.m(h,f),w(h,o,f),a=!0,s=A(lt,"scroll",e[2])},p(e,[t]){const r={};1024&t&&(r.$$scope={dirty:t,ctx:e}),c.$set(r),1&t&&L(n,"navBackgroundColor",e[0]),e[1]?l?(l.p(e,t),me(l,1)):(l=ft(e),l.c(),me(l,1),l.m(o.parentNode,o)):l&&(de(),ge(l,1,1,()=>{l=null}),pe())},i(e){a||(me(u.$$.fragment,e),me(c.$$.fragment,e),me(l),a=!0)},o(e){ge(u.$$.fragment,e),ge(c.$$.fragment,e),ge(l),a=!1},d(e){e&&E(t),ke(u),ke(c),e&&E(i),l&&l.d(e),e&&E(o),s()}}}function yt(e,t,n){let r;c(e,Ue,e=>n(8,r=e));let i=!1,o=!0,a=!1,s=()=>{n(1,a=!a),document.body.style.overflowY=a?"hidden":"unset"};return e.$$.update=()=>{256&e.$$.dirty&&n(0,i="/"!==r),256&e.$$.dirty&&(o="/"===r)},[i,a,e=>{if(!o)return;const t=window.pageYOffset;n(0,i=t>100)},s,()=>{s(),je("/competition-registration")},()=>{s(),je("/mutex-form")},()=>{s(),je("/workshops-Form")}]}class vt extends Ne{constructor(e){super(),Ae(this,e,yt,gt,s,{})}}var bt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function wt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Et(e,t){return e(t={exports:{}},t.exports),t.exports}var Tt=Et((function(e,t){"undefined"!=typeof self&&self,e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=e.mergeSettings(t),this.selector="string"==typeof this.config.selector?document.querySelector(this.config.selector):this.config.selector,null===this.selector)throw new Error("Something wrong with your selector 😭");this.resolveSlidesNumber(),this.selectorWidth=this.selector.offsetWidth,this.innerElements=[].slice.call(this.selector.children),this.currentSlide=this.config.loop?this.config.startIndex%this.innerElements.length:Math.max(0,Math.min(this.config.startIndex,this.innerElements.length-this.perPage)),this.transformProperty=e.webkitOrNot(),["resizeHandler","touchstartHandler","touchendHandler","touchmoveHandler","mousedownHandler","mouseupHandler","mouseleaveHandler","mousemoveHandler","clickHandler"].forEach((function(e){n[e]=n[e].bind(n)})),this.init()}return i(e,[{key:"attachEvents",value:function(){window.addEventListener("resize",this.resizeHandler),this.config.draggable&&(this.pointerDown=!1,this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:!1},this.selector.addEventListener("touchstart",this.touchstartHandler),this.selector.addEventListener("touchend",this.touchendHandler),this.selector.addEventListener("touchmove",this.touchmoveHandler),this.selector.addEventListener("mousedown",this.mousedownHandler),this.selector.addEventListener("mouseup",this.mouseupHandler),this.selector.addEventListener("mouseleave",this.mouseleaveHandler),this.selector.addEventListener("mousemove",this.mousemoveHandler),this.selector.addEventListener("click",this.clickHandler))}},{key:"detachEvents",value:function(){window.removeEventListener("resize",this.resizeHandler),this.selector.removeEventListener("touchstart",this.touchstartHandler),this.selector.removeEventListener("touchend",this.touchendHandler),this.selector.removeEventListener("touchmove",this.touchmoveHandler),this.selector.removeEventListener("mousedown",this.mousedownHandler),this.selector.removeEventListener("mouseup",this.mouseupHandler),this.selector.removeEventListener("mouseleave",this.mouseleaveHandler),this.selector.removeEventListener("mousemove",this.mousemoveHandler),this.selector.removeEventListener("click",this.clickHandler)}},{key:"init",value:function(){this.attachEvents(),this.selector.style.overflow="hidden",this.selector.style.direction=this.config.rtl?"rtl":"ltr",this.buildSliderFrame(),this.config.onInit.call(this)}},{key:"buildSliderFrame",value:function(){var e=this.selectorWidth/this.perPage,t=this.config.loop?this.innerElements.length+2*this.perPage:this.innerElements.length;this.sliderFrame=document.createElement("div"),this.sliderFrame.style.width=e*t+"px",this.enableTransition(),this.config.draggable&&(this.selector.style.cursor="-webkit-grab");var n=document.createDocumentFragment();if(this.config.loop)for(var r=this.innerElements.length-this.perPage;r<this.innerElements.length;r++){var i=this.buildSliderFrameItem(this.innerElements[r].cloneNode(!0));n.appendChild(i)}for(var o=0;o<this.innerElements.length;o++){var a=this.buildSliderFrameItem(this.innerElements[o]);n.appendChild(a)}if(this.config.loop)for(var s=0;s<this.perPage;s++){var u=this.buildSliderFrameItem(this.innerElements[s].cloneNode(!0));n.appendChild(u)}this.sliderFrame.appendChild(n),this.selector.innerHTML="",this.selector.appendChild(this.sliderFrame),this.slideToCurrent()}},{key:"buildSliderFrameItem",value:function(e){var t=document.createElement("div");return t.style.cssFloat=this.config.rtl?"right":"left",t.style.float=this.config.rtl?"right":"left",t.style.width=(this.config.loop?100/(this.innerElements.length+2*this.perPage):100/this.innerElements.length)+"%",t.appendChild(e),t}},{key:"resolveSlidesNumber",value:function(){if("number"==typeof this.config.perPage)this.perPage=this.config.perPage;else if("object"===r(this.config.perPage))for(var e in this.perPage=1,this.config.perPage)window.innerWidth>=e&&(this.perPage=this.config.perPage[e])}},{key:"prev",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments[1];if(!(this.innerElements.length<=this.perPage)){var n=this.currentSlide;if(this.config.loop)if(this.currentSlide-e<0){this.disableTransition();var r=this.currentSlide+this.innerElements.length,i=this.perPage,o=r+i,a=(this.config.rtl?1:-1)*o*(this.selectorWidth/this.perPage),s=this.config.draggable?this.drag.endX-this.drag.startX:0;this.sliderFrame.style[this.transformProperty]="translate3d("+(a+s)+"px, 0, 0)",this.currentSlide=r-e}else this.currentSlide=this.currentSlide-e;else this.currentSlide=Math.max(this.currentSlide-e,0);n!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.config.onChange.call(this),t&&t.call(this))}}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments[1];if(!(this.innerElements.length<=this.perPage)){var n=this.currentSlide;if(this.config.loop)if(this.currentSlide+e>this.innerElements.length-this.perPage){this.disableTransition();var r=this.currentSlide-this.innerElements.length,i=this.perPage,o=r+i,a=(this.config.rtl?1:-1)*o*(this.selectorWidth/this.perPage),s=this.config.draggable?this.drag.endX-this.drag.startX:0;this.sliderFrame.style[this.transformProperty]="translate3d("+(a+s)+"px, 0, 0)",this.currentSlide=r+e}else this.currentSlide=this.currentSlide+e;else this.currentSlide=Math.min(this.currentSlide+e,this.innerElements.length-this.perPage);n!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.config.onChange.call(this),t&&t.call(this))}}},{key:"disableTransition",value:function(){this.sliderFrame.style.webkitTransition="all 0ms "+this.config.easing,this.sliderFrame.style.transition="all 0ms "+this.config.easing}},{key:"enableTransition",value:function(){this.sliderFrame.style.webkitTransition="all "+this.config.duration+"ms "+this.config.easing,this.sliderFrame.style.transition="all "+this.config.duration+"ms "+this.config.easing}},{key:"goTo",value:function(e,t){if(!(this.innerElements.length<=this.perPage)){var n=this.currentSlide;this.currentSlide=this.config.loop?e%this.innerElements.length:Math.min(Math.max(e,0),this.innerElements.length-this.perPage),n!==this.currentSlide&&(this.slideToCurrent(),this.config.onChange.call(this),t&&t.call(this))}}},{key:"slideToCurrent",value:function(e){var t=this,n=this.config.loop?this.currentSlide+this.perPage:this.currentSlide,r=(this.config.rtl?1:-1)*n*(this.selectorWidth/this.perPage);e?requestAnimationFrame((function(){requestAnimationFrame((function(){t.enableTransition(),t.sliderFrame.style[t.transformProperty]="translate3d("+r+"px, 0, 0)"}))})):this.sliderFrame.style[this.transformProperty]="translate3d("+r+"px, 0, 0)"}},{key:"updateAfterDrag",value:function(){var e=(this.config.rtl?-1:1)*(this.drag.endX-this.drag.startX),t=Math.abs(e),n=this.config.multipleDrag?Math.ceil(t/(this.selectorWidth/this.perPage)):1,r=e>0&&this.currentSlide-n<0,i=e<0&&this.currentSlide+n>this.innerElements.length-this.perPage;e>0&&t>this.config.threshold&&this.innerElements.length>this.perPage?this.prev(n):e<0&&t>this.config.threshold&&this.innerElements.length>this.perPage&&this.next(n),this.slideToCurrent(r||i)}},{key:"resizeHandler",value:function(){this.resolveSlidesNumber(),this.currentSlide+this.perPage>this.innerElements.length&&(this.currentSlide=this.innerElements.length<=this.perPage?0:this.innerElements.length-this.perPage),this.selectorWidth=this.selector.offsetWidth,this.buildSliderFrame()}},{key:"clearDrag",value:function(){this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:this.drag.preventClick}}},{key:"touchstartHandler",value:function(e){-1!==["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(e.target.nodeName)||(e.stopPropagation(),this.pointerDown=!0,this.drag.startX=e.touches[0].pageX,this.drag.startY=e.touches[0].pageY)}},{key:"touchendHandler",value:function(e){e.stopPropagation(),this.pointerDown=!1,this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}},{key:"touchmoveHandler",value:function(e){if(e.stopPropagation(),null===this.drag.letItGo&&(this.drag.letItGo=Math.abs(this.drag.startY-e.touches[0].pageY)<Math.abs(this.drag.startX-e.touches[0].pageX)),this.pointerDown&&this.drag.letItGo){e.preventDefault(),this.drag.endX=e.touches[0].pageX,this.sliderFrame.style.webkitTransition="all 0ms "+this.config.easing,this.sliderFrame.style.transition="all 0ms "+this.config.easing;var t=(this.config.loop?this.currentSlide+this.perPage:this.currentSlide)*(this.selectorWidth/this.perPage),n=this.drag.endX-this.drag.startX,r=this.config.rtl?t+n:t-n;this.sliderFrame.style[this.transformProperty]="translate3d("+(this.config.rtl?1:-1)*r+"px, 0, 0)"}}},{key:"mousedownHandler",value:function(e){-1!==["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(e.target.nodeName)||(e.preventDefault(),e.stopPropagation(),this.pointerDown=!0,this.drag.startX=e.pageX)}},{key:"mouseupHandler",value:function(e){e.stopPropagation(),this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}},{key:"mousemoveHandler",value:function(e){if(e.preventDefault(),this.pointerDown){"A"===e.target.nodeName&&(this.drag.preventClick=!0),this.drag.endX=e.pageX,this.selector.style.cursor="-webkit-grabbing",this.sliderFrame.style.webkitTransition="all 0ms "+this.config.easing,this.sliderFrame.style.transition="all 0ms "+this.config.easing;var t=(this.config.loop?this.currentSlide+this.perPage:this.currentSlide)*(this.selectorWidth/this.perPage),n=this.drag.endX-this.drag.startX,r=this.config.rtl?t+n:t-n;this.sliderFrame.style[this.transformProperty]="translate3d("+(this.config.rtl?1:-1)*r+"px, 0, 0)"}}},{key:"mouseleaveHandler",value:function(e){this.pointerDown&&(this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.drag.endX=e.pageX,this.drag.preventClick=!1,this.enableTransition(),this.updateAfterDrag(),this.clearDrag())}},{key:"clickHandler",value:function(e){this.drag.preventClick&&e.preventDefault(),this.drag.preventClick=!1}},{key:"remove",value:function(e,t){if(e<0||e>=this.innerElements.length)throw new Error("Item to remove doesn't exist 😭");var n=e<this.currentSlide,r=this.currentSlide+this.perPage-1===e;(n||r)&&this.currentSlide--,this.innerElements.splice(e,1),this.buildSliderFrame(),t&&t.call(this)}},{key:"insert",value:function(e,t,n){if(t<0||t>this.innerElements.length+1)throw new Error("Unable to inset it at this index 😭");if(-1!==this.innerElements.indexOf(e))throw new Error("The same item in a carousel? Really? Nope 😭");var r=t<=this.currentSlide>0&&this.innerElements.length;this.currentSlide=r?this.currentSlide+1:this.currentSlide,this.innerElements.splice(t,0,e),this.buildSliderFrame(),n&&n.call(this)}},{key:"prepend",value:function(e,t){this.insert(e,0),t&&t.call(this)}},{key:"append",value:function(e,t){this.insert(e,this.innerElements.length+1),t&&t.call(this)}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];if(this.detachEvents(),this.selector.style.cursor="auto",e){for(var n=document.createDocumentFragment(),r=0;r<this.innerElements.length;r++)n.appendChild(this.innerElements[r]);this.selector.innerHTML="",this.selector.appendChild(n),this.selector.removeAttribute("style")}t&&t.call(this)}}],[{key:"mergeSettings",value:function(e){var t={selector:".siema",duration:200,easing:"ease-out",perPage:1,startIndex:0,draggable:!0,multipleDrag:!0,threshold:20,loop:!1,rtl:!1,onInit:function(){},onChange:function(){}},n=e;for(var r in n)t[r]=n[r];return t}},{key:"webkitOrNot",value:function(){return"string"==typeof document.documentElement.style.transform?"transform":"WebkitTransform"}}]),e}();t.default=o,e.exports=t.default}])})),St=wt(Tt);Tt.Siema;const It=e=>({}),Ct=e=>({});function kt(e,t,n){const r=e.slice();return r[14]=t[n],r[16]=n,r}const Dt=e=>({}),At=e=>({});function Nt(e){let t,n;function r(...t){return e[13](e[16],...t)}return{c(){t=S("li"),_(t,"class","svelte-6pleld")},m(e,i){w(e,t,i),n=A(t,"click",r)},p(t,n){e=t},d(e){e&&E(t),n()}}}function xt(e){let t,n,r,i,a,s,u,c,d,p;const m=e[11]["left-control"],g=l(m,e,e[10],At),y=e[11].default,v=l(y,e,e[10],null);let I=e[1],C=[];for(let t=0;t<I.length;t+=1)C[t]=Nt(kt(e,I,t));const D=e[11]["right-control"],N=l(D,e,e[10],Ct);return{c(){t=S("div"),n=S("button"),g&&g.c(),r=k(),i=S("div"),v&&v.c(),a=k(),s=S("ul");for(let e=0;e<C.length;e+=1)C[e].c();u=k(),c=S("button"),N&&N.c(),_(n,"class","left svelte-6pleld"),_(i,"class","slides"),_(s,"class","svelte-6pleld"),_(c,"class","right svelte-6pleld"),_(t,"class","carousel svelte-6pleld")},m(o,l){w(o,t,l),b(t,n),g&&g.m(n,null),b(t,r),b(t,i),v&&v.m(i,null),e[12](i),b(t,a),b(t,s);for(let e=0;e<C.length;e+=1)C[e].m(s,null);b(t,u),b(t,c),N&&N.m(c,null),d=!0,p=[A(n,"click",e[2]),A(c,"click",e[3])]},p(e,[t]){if(g&&g.p&&1024&t&&g.p(h(m,e,e[10],At),f(m,e[10],t,Dt)),v&&v.p&&1024&t&&v.p(h(y,e,e[10],null),f(y,e[10],t,null)),18&t){let n;for(I=e[1],n=0;n<I.length;n+=1){const r=kt(e,I,n);C[n]?C[n].p(r,t):(C[n]=Nt(r),C[n].c(),C[n].m(s,null))}for(;n<C.length;n+=1)C[n].d(1);C.length=I.length}N&&N.p&&1024&t&&N.p(h(D,e,e[10],Ct),f(D,e[10],t,It))},i(e){d||(me(g,e),me(v,e),me(N,e),d=!0)},o(e){ge(g,e),ge(v,e),ge(N,e),d=!1},d(n){n&&E(t),g&&g.d(n),v&&v.d(n),e[12](null),T(C,n),N&&N.d(n),o(p)}}}function _t(e,t,n){let r,i,{perPage:o=3}=t,{loop:a=!0}=t,{autoplay:s=0}=t;function u(){i.next()}function c(e){i.goTo(e)}G(()=>(n(8,i=new St({selector:r,perPage:o,loop:a})),s&&setInterval(u,s),()=>{s&&clearTimeout(void 0),i.destroy()}));let{$$slots:l={},$$scope:h}=t;let f;return e.$set=e=>{"perPage"in e&&n(5,o=e.perPage),"loop"in e&&n(6,a=e.loop),"autoplay"in e&&n(7,s=e.autoplay),"$$scope"in e&&n(10,h=e.$$scope)},e.$$.update=()=>{256&e.$$.dirty&&n(1,f=i?i.innerElements:[])},[r,f,function(){i.prev()},u,c,o,a,s,i,void 0,h,l,function(e){J[e?"unshift":"push"](()=>{n(0,r=e)})},e=>c(e)]}class Rt extends Ne{constructor(e){super(),Ae(this,e,_t,xt,s,{perPage:5,loop:6,autoplay:7})}}function Mt(e){let t,n,r,i,o;return{c(){t=S("div"),t.innerHTML='<p class="carousel-description svelte-1f4fb9o">MUTEX 2017</p>',n=k(),r=S("div"),r.innerHTML='<p class="carousel-description svelte-1f4fb9o">MUTEX 2018</p>',i=k(),o=S("div"),o.innerHTML='<p class="carousel-description svelte-1f4fb9o">MUTEX 2019</p>',_(t,"class","slide-content carousel-item carousel-item1 svelte-1f4fb9o"),_(r,"class","slide-content carousel-item carousel-item2 svelte-1f4fb9o"),_(o,"class","slide-content carousel-item carousel-item3 svelte-1f4fb9o")},m(e,a){w(e,t,a),w(e,n,a),w(e,r,a),w(e,i,a),w(e,o,a)},d(e){e&&E(t),e&&E(n),e&&E(r),e&&E(i),e&&E(o)}}}function Ot(e){let t;const n=new Rt({props:{perPage:1,autoplay:1700,loop:!0,$$slots:{default:[Mt]},$$scope:{ctx:e}}});return{c(){Ie(n.$$.fragment)},m(e,r){Ce(n,e,r),t=!0},p(e,[t]){const r={};1&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(me(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){ke(n,e)}}}class Pt extends Ne{constructor(e){super(),Ae(this,e,null,Ot,s,{})}}function Vt(t){let n,r,i,o,a,s=t[2].header+"",u=t[2].description+"";return{c(){n=S("div"),r=S("h3"),i=C(s),o=k(),a=S("p"),_(r,"class","svelte-rntcex"),_(a,"class","svelte-rntcex"),O(n,"width",t[0]+"px "),O(n,"height",t[1]+"px "),O(n,"background-image",t[3]),_(n,"class","svelte-rntcex")},m(e,t){w(e,n,t),b(n,r),b(r,i),b(n,o),b(n,a),a.innerHTML=u},p(e,[t]){4&t&&s!==(s=e[2].header+"")&&R(i,s),4&t&&u!==(u=e[2].description+"")&&(a.innerHTML=u),1&t&&O(n,"width",e[0]+"px "),2&t&&O(n,"height",e[1]+"px "),8&t&&O(n,"background-image",e[3])},i:e,o:e,d(e){e&&E(n)}}}function Lt(e,t,n){let{width:r}=t,{height:i}=t,{textContent:o}=t,{backgroundImage:a}=t;return e.$set=e=>{"width"in e&&n(0,r=e.width),"height"in e&&n(1,i=e.height),"textContent"in e&&n(2,o=e.textContent),"backgroundImage"in e&&n(3,a=e.backgroundImage)},[r,i,o,a]}class $t extends Ne{constructor(e){super(),Ae(this,e,Lt,Vt,s,{width:0,height:1,textContent:2,backgroundImage:3})}}function Ft(e){let t,n,r=e[0].description+"";return{c(){t=S("p"),n=C(r),_(t,"class","svelte-1gog9u7")},m(e,r){w(e,t,r),b(t,n)},p(e,t){1&t&&r!==(r=e[0].description+"")&&R(n,r)},d(e){e&&E(t)}}}function qt(t){let n,r,i,o,a=t[0].header+"",s=t[0].description&&Ft(t);return{c(){n=S("div"),r=S("h2"),i=C(a),o=k(),s&&s.c(),_(r,"class","svelte-1gog9u7"),_(n,"class","underline-heading svelte-1gog9u7")},m(e,t){w(e,n,t),b(n,r),b(r,i),b(n,o),s&&s.m(n,null)},p(e,[t]){1&t&&a!==(a=e[0].header+"")&&R(i,a),e[0].description?s?s.p(e,t):(s=Ft(e),s.c(),s.m(n,null)):s&&(s.d(1),s=null)},i:e,o:e,d(e){e&&E(n),s&&s.d()}}}function Bt(e,t,n){let{textContent:r}=t;return e.$set=e=>{"textContent"in e&&n(0,r=e.textContent)},[r]}class Ut extends Ne{constructor(e){super(),Ae(this,e,Bt,qt,s,{textContent:0})}}function jt(t){let n,r,i,o,a,s;const u=new Ut({props:{textContent:{header:"About MUTEX",description:" MUTEX is the biggest technological annual event hosted by IEEE Zagazig SB.The event mainly focuses on introducing the latest technologies incomputer science fields to the audience and setting a clear path for themto follow."}}}),c=new $t({props:{width:300,height:400,textContent:{header:"Vision",description:"Banishing the gap between the latest technology trends and the current community awareness."},backgroundImage:"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ),url(../images/Vision.jpg)"}}),l=new $t({props:{width:300,height:400,textContent:{header:"Mission",description:"Establishing a link between the leading companies/organizations in the latest technologies or the  ones that support the tech ecosystem and our community’s CS students, Engineers, Startups, and Techies through sets of talks, training, and workshops."},backgroundImage:"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ),url(../images/mission.jpg)"}}),h=new $t({props:{width:300,height:400,textContent:{header:"Goals",description:"<p>Spread technological awareness among university students, startups, and investors of Al-Delta region.</p><p>Give the students the work experience in the latest technologies through workshops.</p><p>Connect Al-Delta tech ecosystem with resources and opportunities.</p>"},backgroundImage:"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ),url(../images/Goals.jpg)"}});return{c(){n=S("section"),Ie(u.$$.fragment),r=k(),i=S("div"),Ie(c.$$.fragment),o=k(),Ie(l.$$.fragment),a=k(),Ie(h.$$.fragment),_(i,"id","container"),_(i,"class","svelte-1poviqi"),_(n,"id","aboutSection"),_(n,"class","svelte-1poviqi")},m(e,t){w(e,n,t),Ce(u,n,null),b(n,r),b(n,i),Ce(c,i,null),b(i,o),Ce(l,i,null),b(i,a),Ce(h,i,null),s=!0},p:e,i(e){s||(me(u.$$.fragment,e),me(c.$$.fragment,e),me(l.$$.fragment,e),me(h.$$.fragment,e),s=!0)},o(e){ge(u.$$.fragment,e),ge(c.$$.fragment,e),ge(l.$$.fragment,e),ge(h.$$.fragment,e),s=!1},d(e){e&&E(n),ke(u),ke(c),ke(l),ke(h)}}}class zt extends Ne{constructor(e){super(),Ae(this,e,null,jt,s,{})}}function Wt(t){let n,r,i,o,a,s,u;const c=new Ut({props:{textContent:{header:"What to Expect at MUTEX"}}}),l=new $t({props:{width:250,height:350,textContent:{header:"Learning",description:"Learn from the leading multinational companies and well established organizations about technology trends and tech-related entrepreneurship topics through many talks and panel discussions."},backgroundImage:"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ),url(../images/Learning.png)"}}),h=new $t({props:{width:250,height:350,textContent:{header:"Practising",description:"Practice in hands-on/interactive workshops to gain practical experience"},backgroundImage:"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ),url(../images/Practicing.png)"}}),f=new $t({props:{width:250,height:350,textContent:{header:"Networking",description:"Meet Enterprise, Startups, Investors, and Techies who will all gather in one inspiring space for two days and connect with the Tech ecosystem."},backgroundImage:"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ),url(../images/Networking.png)"}}),d=new $t({props:{width:250,height:350,textContent:{header:"Pitching",description:"Are you a Tech or Tech-enabled startup? This is an opportunity to fund your business and connect with investors, gain coverage in media publications, and extend to potential customers in Al-Delta region. And also an opportunity to apply in our pitching competitions."},backgroundImage:"linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ),url(../images/Pitching.png)"}});return{c(){n=S("section"),Ie(c.$$.fragment),r=k(),i=S("div"),Ie(l.$$.fragment),o=k(),Ie(h.$$.fragment),a=k(),Ie(f.$$.fragment),s=k(),Ie(d.$$.fragment),_(i,"id","container"),_(i,"class","svelte-hhqc3a"),_(n,"id","lpnp")},m(e,t){w(e,n,t),Ce(c,n,null),b(n,r),b(n,i),Ce(l,i,null),b(i,o),Ce(h,i,null),b(i,a),Ce(f,i,null),b(i,s),Ce(d,i,null),u=!0},p:e,i(e){u||(me(c.$$.fragment,e),me(l.$$.fragment,e),me(h.$$.fragment,e),me(f.$$.fragment,e),me(d.$$.fragment,e),u=!0)},o(e){ge(c.$$.fragment,e),ge(l.$$.fragment,e),ge(h.$$.fragment,e),ge(f.$$.fragment,e),ge(d.$$.fragment,e),u=!1},d(e){e&&E(n),ke(c),ke(l),ke(h),ke(f),ke(d)}}}class Kt extends Ne{constructor(e){super(),Ae(this,e,null,Wt,s,{})}}function Gt(t){let n,r,i,o;const a=new Ut({props:{textContent:{header:"STATISTICS"}}});return{c(){n=S("section"),Ie(a.$$.fragment),r=k(),i=S("div"),i.innerHTML='<div id="item" class="svelte-fb13td"><img src="../images/talks.jpg" alt="" class="svelte-fb13td"> \n      <div class="vl svelte-fb13td"></div> \n      <div class="two-level-text svelte-fb13td"><h3 class="svelte-fb13td">18</h3> \n        <h3 class="svelte-fb13td">Talks</h3></div></div> \n    <div id="item" class="svelte-fb13td"><img src="../images/workshops2.png" alt="" class="svelte-fb13td"> \n      <div class="vl svelte-fb13td"></div> \n      <div class="two-level-text svelte-fb13td"><h3 class="svelte-fb13td">15</h3> \n        <h3 class="svelte-fb13td">Workshops</h3></div></div> \n    <div id="item" class="svelte-fb13td"><img src="../images/tracks.png" alt="" class="svelte-fb13td"> \n      <div class="vl svelte-fb13td"></div> \n      <div class="two-level-text svelte-fb13td"><h3 class="svelte-fb13td">9</h3> \n        <h3 class="svelte-fb13td">Tracks</h3></div></div> \n    <div id="item" class="svelte-fb13td"><img src="../images/users.png" alt="" class="svelte-fb13td"> \n      <div class="vl svelte-fb13td"></div> \n      <div class="two-level-text svelte-fb13td"><h3 class="svelte-fb13td">1580+</h3> \n        <h3 class="svelte-fb13td">Attendees</h3></div></div>',_(i,"id","container"),_(i,"class","svelte-fb13td"),_(n,"id","STATISTICS"),_(n,"class","svelte-fb13td")},m(e,t){w(e,n,t),Ce(a,n,null),b(n,r),b(n,i),o=!0},p:e,i(e){o||(me(a.$$.fragment,e),o=!0)},o(e){ge(a.$$.fragment,e),o=!1},d(e){e&&E(n),ke(a)}}}class Qt extends Ne{constructor(e){super(),Ae(this,e,null,Gt,s,{})}}function Ht(t){let n,r,i,o,a,s,u;return{c(){n=S("div"),r=S("div"),i=S("p"),o=C(t[1]),a=k(),s=S("p"),u=C(t[2]),_(i,"class","text-top svelte-3an1cx"),_(s,"class","svelte-3an1cx"),_(r,"class","svelte-3an1cx"),_(n,"id","container"),O(n,"background-image","url('"+t[0]+"')"),_(n,"class","svelte-3an1cx")},m(e,t){w(e,n,t),b(n,r),b(r,i),b(i,o),b(r,a),b(r,s),b(s,u)},p(e,[t]){2&t&&R(o,e[1]),4&t&&R(u,e[2]),1&t&&O(n,"background-image","url('"+e[0]+"')")},i:e,o:e,d(e){e&&E(n)}}}function Yt(e,t,n){let{speakerImage:r}=t,{speakerName:i}=t,{speakerJob:o}=t;return e.$set=e=>{"speakerImage"in e&&n(0,r=e.speakerImage),"speakerName"in e&&n(1,i=e.speakerName),"speakerJob"in e&&n(2,o=e.speakerJob)},[r,i,o]}class Xt extends Ne{constructor(e){super(),Ae(this,e,Yt,Ht,s,{speakerImage:0,speakerName:1,speakerJob:2})}}function Jt(e,t,n){const r=e.slice();return r[1]=t[n],r}function Zt(e){let t;const r=[e[1]];let i={};for(let e=0;e<r.length;e+=1)i=n(i,r[e]);const o=new Xt({props:i});return{c(){Ie(o.$$.fragment)},m(e,n){Ce(o,e,n),t=!0},p(e,t){const n=1&t?Ee(r,[Te(e[1])]):{};o.$set(n)},i(e){t||(me(o.$$.fragment,e),t=!0)},o(e){ge(o.$$.fragment,e),t=!1},d(e){ke(o,e)}}}function en(e){let t,n,r,i;const o=new Ut({props:{textContent:{header:"Previous Speakers"}}});let a=e[0],s=[];for(let t=0;t<a.length;t+=1)s[t]=Zt(Jt(e,a,t));const u=e=>ge(s[e],1,1,()=>{s[e]=null});return{c(){t=S("section"),Ie(o.$$.fragment),n=k(),r=S("div");for(let e=0;e<s.length;e+=1)s[e].c();_(r,"class","container svelte-srw0ap"),_(t,"id","speakers"),_(t,"class","svelte-srw0ap")},m(e,a){w(e,t,a),Ce(o,t,null),b(t,n),b(t,r);for(let e=0;e<s.length;e+=1)s[e].m(r,null);i=!0},p(e,[t]){if(1&t){let n;for(a=e[0],n=0;n<a.length;n+=1){const i=Jt(e,a,n);s[n]?(s[n].p(i,t),me(s[n],1)):(s[n]=Zt(i),s[n].c(),me(s[n],1),s[n].m(r,null))}for(de(),n=a.length;n<s.length;n+=1)u(n);pe()}},i(e){if(!i){me(o.$$.fragment,e);for(let e=0;e<a.length;e+=1)me(s[e]);i=!0}},o(e){ge(o.$$.fragment,e),s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ge(s[e]);i=!1},d(e){e&&E(t),ke(o),T(s,e)}}}function tn(e){return[[{speakerImage:"../images/speakers/Amr Abulnaga.jpg",speakerName:"Amr Abulnaga",speakerJob:"The Regional Technical Consultant at Oracle"},{speakerImage:"../images/speakers/Ghada Bahig.jpg",speakerName:"Ghada Bahig",speakerJob:"Engineering Manager at Mentor Graphics"},{speakerImage:"../images/speakers/Amr Ali.jpg",speakerName:"Amr Ali",speakerJob:"Big data and Analytics Technical Consultant at Oracle"},{speakerImage:"../images/speakers/Omar Amer.jpg",speakerName:"Omar Amer",speakerJob:"Machine Learning Engineer at IBM"},{speakerImage:"../images/speakers/Ahmed Abd-Elfattah.jpg",speakerName:"Ahmed Abd-Elfattah",speakerJob:"Knowledge Management Manager at Valeo"},{speakerImage:"../images/speakers/Ahmed Said.jpg",speakerName:"Ahmed Said",speakerJob:"IBM"},{speakerImage:"../images/speakers/Ayman Ragab.jpg",speakerName:"Ayman Ragab",speakerJob:"Consultant in The R_D Department at NTRA"},{speakerImage:"../images/speakers/Mohamed Abd-Elmonem.jpg",speakerName:"Mohamed Abd-Elmonem",speakerJob:"Radio Optimization Senior Engineer at Vodafone"},{speakerImage:"../images/speakers/Mostafa Helmy.jpg",speakerName:"Mostafa Helmy",speakerJob:"Identity _ Access Management Advisor at RSA Security"},{speakerImage:"../images/speakers/Nahel Mohamed.jpg",speakerName:"Nahel Mohamed",speakerJob:"Innovation Support Manager at TIEC"},{speakerImage:"../images/speakers/Oriette M. Nayel.jpg",speakerName:"Oriette M. Nayel",speakerJob:"University Relations Leader at IBM"},{speakerImage:"../images/speakers/Peter George.jpg",speakerName:"Peter George",speakerJob:"Senior Analyst at RSA Security"},{speakerImage:"../images/speakers/Abdalla Amr.jpg",speakerName:"Abdalla Amr",speakerJob:"TIEC Ambassador"},{speakerImage:"../images/speakers/Ahmed Samir.jpg",speakerName:"Ahmed Samir",speakerJob:"Enterprise Technical Services Advisor@Dell EMC"},{speakerImage:"../images/speakers/Amir Elsenousy.jpg",speakerName:"Amir Elsenousy",speakerJob:"Research projects manager @ NTRA"},{speakerImage:"../images/speakers/Bassem Ibrahim.jpg",speakerName:"Bassem Ibrahim",speakerJob:"Network solutions architect @ Ericsson"},{speakerImage:"../images/speakers/Ebeid Atef.jpg",speakerName:"Ebeid Atef",speakerJob:"Microsoft Education Technical"},{speakerImage:"../images/speakers/Hesham Elzoghby.jpg",speakerName:"Hesham Elzoghby",speakerJob:"Cyber Talents"},{speakerImage:"../images/speakers/Hesham Eraqi.jpg",speakerName:"Hesham Eraqi",speakerJob:"Deep learning Secnior expert @Valeo"},{speakerImage:"../images/speakers/Mohamed Elgharably.jpg",speakerName:"Mohamed Elgharably",speakerJob:"Networks chief technology officer@Ericsson"}]]}class nn extends Ne{constructor(e){super(),Ae(this,e,tn,en,s,{})}}function rn(t){let n,r,i,o,a,s;return{c(){n=S("div"),r=S("img"),o=k(),a=S("p"),s=C(t[1]),r.src!==(i=t[0])&&_(r,"src",i),_(r,"alt",""),_(r,"class","svelte-agg6a"),_(n,"class","svelte-agg6a")},m(e,t){w(e,n,t),b(n,r),b(n,o),b(n,a),b(a,s)},p(e,[t]){1&t&&r.src!==(i=e[0])&&_(r,"src",i),2&t&&R(s,e[1])},i:e,o:e,d(e){e&&E(n)}}}function on(e,t,n){let{sponsorImage:r}=t,{sponsorRole:i}=t;return e.$set=e=>{"sponsorImage"in e&&n(0,r=e.sponsorImage),"sponsorRole"in e&&n(1,i=e.sponsorRole)},[r,i]}class an extends Ne{constructor(e){super(),Ae(this,e,on,rn,s,{sponsorImage:0,sponsorRole:1})}}function sn(e,t,n){const r=e.slice();return r[9]=t[n],r}function un(e,t,n){const r=e.slice();return r[5]=t[n][0],r[6]=t[n][1],r}function cn(e,t,n){const r=e.slice();return r[1]=t[n][0],r[2]=t[n][1],r}function ln(e){let t;const r=[e[9]];let i={};for(let e=0;e<r.length;e+=1)i=n(i,r[e]);const o=new an({props:i});return{c(){Ie(o.$$.fragment)},m(e,n){Ce(o,e,n),t=!0},p(e,t){const n=1&t?Ee(r,[Te(e[9])]):{};o.$set(n)},i(e){t||(me(o.$$.fragment,e),t=!0)},o(e){ge(o.$$.fragment,e),t=!1},d(e){ke(o,e)}}}function hn(e){let t,n,r,i=e[6],o=[];for(let t=0;t<i.length;t+=1)o[t]=ln(sn(e,i,t));const a=e=>ge(o[e],1,1,()=>{o[e]=null});return{c(){t=S("div");for(let e=0;e<o.length;e+=1)o[e].c();n=k(),_(t,"class","sponsor-category svelte-jpshmx")},m(e,i){w(e,t,i);for(let e=0;e<o.length;e+=1)o[e].m(t,null);b(t,n),r=!0},p(e,r){if(1&r){let s;for(i=e[6],s=0;s<i.length;s+=1){const a=sn(e,i,s);o[s]?(o[s].p(a,r),me(o[s],1)):(o[s]=ln(a),o[s].c(),me(o[s],1),o[s].m(t,n))}for(de(),s=i.length;s<o.length;s+=1)a(s);pe()}},i(e){if(!r){for(let e=0;e<i.length;e+=1)me(o[e]);r=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)ge(o[e]);r=!1},d(e){e&&E(t),T(o,e)}}}function fn(e){let t,n,r;const i=new Ut({props:{textContent:{header:e[1]+" PARTNERS"}}});let o=Object.entries(e[2]),a=[];for(let t=0;t<o.length;t+=1)a[t]=hn(un(e,o,t));const s=e=>ge(a[e],1,1,()=>{a[e]=null});return{c(){Ie(i.$$.fragment),t=k();for(let e=0;e<a.length;e+=1)a[e].c();n=D()},m(e,o){Ce(i,e,o),w(e,t,o);for(let t=0;t<a.length;t+=1)a[t].m(e,o);w(e,n,o),r=!0},p(e,t){if(1&t){let r;for(o=Object.entries(e[2]),r=0;r<o.length;r+=1){const i=un(e,o,r);a[r]?(a[r].p(i,t),me(a[r],1)):(a[r]=hn(i),a[r].c(),me(a[r],1),a[r].m(n.parentNode,n))}for(de(),r=o.length;r<a.length;r+=1)s(r);pe()}},i(e){if(!r){me(i.$$.fragment,e);for(let e=0;e<o.length;e+=1)me(a[e]);r=!0}},o(e){ge(i.$$.fragment,e),a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)ge(a[e]);r=!1},d(e){ke(i,e),e&&E(t),T(a,e),e&&E(n)}}}function dn(e){let t,n,r=Object.entries(e[0]).sort(pn),i=[];for(let t=0;t<r.length;t+=1)i[t]=fn(cn(e,r,t));const o=e=>ge(i[e],1,1,()=>{i[e]=null});return{c(){t=S("section");for(let e=0;e<i.length;e+=1)i[e].c();_(t,"id","sponsors"),_(t,"class","svelte-jpshmx")},m(e,r){w(e,t,r);for(let e=0;e<i.length;e+=1)i[e].m(t,null);n=!0},p(e,[n]){if(1&n){let a;for(r=Object.entries(e[0]).sort(pn),a=0;a<r.length;a+=1){const o=cn(e,r,a);i[a]?(i[a].p(o,n),me(i[a],1)):(i[a]=fn(o),i[a].c(),me(i[a],1),i[a].m(t,null))}for(de(),a=r.length;a<i.length;a+=1)o(a);pe()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)me(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)ge(i[e]);n=!1},d(e){e&&E(t),T(i,e)}}}const pn=(e,t)=>e>t?-1:e<t?1:0;function mn(e){return[{2019:{1:[{sponsorImage:"../images/sponsors/19/Official%20Partner.png",sponsorRole:"Official Partner"}],2:[{sponsorImage:"../images/sponsors/19/Hosting%20Partner.png",sponsorRole:"Hosting Partner"},{sponsorImage:"../images/sponsors/19/Strategic%20Partner.png",sponsorRole:"Strategic Partner"},{sponsorImage:"../images/sponsors/19/Catering%20Sponsor.png",sponsorRole:"Catering Sponsor"},{sponsorImage:"../images/sponsors/19/Transportation%20Partner.png",sponsorRole:"Transportation Partner"}],3:[{sponsorImage:"../images/sponsors/19/Content%20Partner.png",sponsorRole:"Content Partner"},{sponsorImage:"../images/sponsors/19/Content%20Partner(2).png",sponsorRole:"Content Partner"},{sponsorImage:"../images/sponsors/19/Content%20Partner(1).png",sponsorRole:"Content Partner"},{sponsorImage:"../images/sponsors/19/Content%20Partner(3).png",sponsorRole:"Content Partner"}],4:[{sponsorImage:"../images/sponsors/19/Startup%20Partner.png",sponsorRole:"Startup Partner"},{sponsorImage:"../images/sponsors/19/Startup%20Partner(1).png",sponsorRole:"Startup Partner"}]},2018:{1:[{sponsorImage:"../images/sponsors/19/Official%20Partner.png",sponsorRole:"Official Partner"}],2:[{sponsorImage:"../images/sponsors/18/Gold%20Sponsor.png",sponsorRole:"Gold Sponsor"},{sponsorImage:"../images/sponsors/18/Community%20Partner.png",sponsorRole:"Community Partner"},{sponsorImage:"../images/sponsors/18/Strategic%20Partner.png",sponsorRole:"Strategic Sponsor"},{sponsorImage:"../images/sponsors/18/Gold%20Sponsor(1).png",sponsorRole:"Gold Partner"}],3:[{sponsorImage:"../images/sponsors/18/Content%20Partner(2).png",sponsorRole:"Content Partner"},{sponsorImage:"../images/sponsors/18/Content%20Partner.png",sponsorRole:"Content Partner"},{sponsorImage:"../images/sponsors/18/Content%20Partner(3).png",sponsorRole:"Content Partner"},{sponsorImage:"../images/sponsors/18/Content%20Partner(1).png",sponsorRole:"Content Partner"}]},2017:{1:[{sponsorImage:"../images/sponsors/17/Main%20Sponsor.png",sponsorRole:"Main Partner"}],2:[{sponsorImage:"../images/sponsors/17/Content%20Partner(2).png",sponsorRole:"Content Partner"},{sponsorImage:"../images/sponsors/17/Content%20Partner(3).png",sponsorRole:"Content Partner"},{sponsorImage:"../images/sponsors/17/Content%20Partner.png",sponsorRole:"Content Partner"},{sponsorImage:"../images/sponsors/17/Content%20Partner(1).png",sponsorRole:"Content Partner"}]}}]}class gn extends Ne{constructor(e){super(),Ae(this,e,mn,dn,s,{})}}function yn(t){let n;return{c(){n=S("section"),n.innerHTML='<div class="svelte-yuxxwn"><img src="../images/MUTEX%20White.png" alt="" style="width: 170px;height: auto" class="svelte-yuxxwn"> \n    <p class="svelte-yuxxwn">Website crafted by IEEE Zagazig CS.</p></div> \n  <div class="svelte-yuxxwn"><div class="svelte-yuxxwn"><span class="svelte-yuxxwn"><a class="facebook svelte-yuxxwn" href="https://www.facebook.com/MUTEX.Summit/"><span class="svelte-yuxxwn"></span> \n          <span class="svelte-yuxxwn"></span> \n          <span class="svelte-yuxxwn"></span> \n          <span class="svelte-yuxxwn"></span> \n          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svelte-yuxxwn"><path d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06\n              52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08\n              44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"></path></svg></a></span> \n      <span class="svelte-yuxxwn"><a class="twitter svelte-yuxxwn" href="https://twitter.com/MutexSummit"><span class="svelte-yuxxwn"></span> \n          <span class="svelte-yuxxwn"></span> \n          <span class="svelte-yuxxwn"></span> \n          <span class="svelte-yuxxwn"></span> \n          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svelte-yuxxwn"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0\n              138.72-105.583 298.558-298.558 298.558-59.452\n              0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299\n              49.055 0 94.213-16.568\n              130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974\n              12.995 1.624 19.818 1.624 9.421 0 18.843-1.3\n              27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969\n              7.797 30.214 12.67 47.431\n              13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492\n              5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365\n              109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828\n              46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137\n              23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366\n              44.833-46.132 57.827 21.117-2.273 41.584-8.122\n              60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></span> \n      <span class="svelte-yuxxwn"><a class="instagram svelte-yuxxwn" href="https://www.instagram.com/mutex.summit/"><span class="svelte-yuxxwn"></span> \n          <span class="svelte-yuxxwn"></span> \n          <span class="svelte-yuxxwn"></span> \n          <span class="svelte-yuxxwn"></span> \n          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svelte-yuxxwn"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9\n              114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1\n              0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6\n              74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9\n              0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1\n              27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9\n              0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9\n              0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9\n              2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58\n              36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9\n              34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7\n              2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7\n              9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9\n              132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9\n              99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg></a></span> \n      <span class="svelte-yuxxwn"><a class="linked-in svelte-yuxxwn" href="https://www.linkedin.com/company/mutexsummit/"><span class="svelte-yuxxwn"></span> \n          <span class="svelte-yuxxwn"></span> \n          <span class="svelte-yuxxwn"></span> \n          <span class="svelte-yuxxwn"></span> \n          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-yuxxwn"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762\n              0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11\n              19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764\n              1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5\n              12.268h-3v-5.604c0-3.368-4-3.113-4\n              0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></span></div></div>',_(n,"id","footer"),_(n,"class","svelte-yuxxwn")},m(e,t){w(e,n,t)},p:e,i:e,o:e,d(e){e&&E(n)}}}class vn extends Ne{constructor(e){super(),Ae(this,e,null,yn,s,{})}}function bn(n){let r,i,s,u,c,l,h,f,d,m;const g=new Pt({}),y=new zt({}),T=new Kt({}),I=new Qt({}),C=new nn({}),D=new gn({}),A=new vn({});return{c(){r=S("div"),Ie(g.$$.fragment),i=k(),Ie(y.$$.fragment),s=k(),Ie(T.$$.fragment),u=k(),Ie(I.$$.fragment),c=k(),Ie(C.$$.fragment),l=k(),Ie(D.$$.fragment),h=k(),Ie(A.$$.fragment)},m(e,t){w(e,r,t),Ce(g,r,null),b(r,i),Ce(y,r,null),b(r,s),Ce(T,r,null),b(r,u),Ce(I,r,null),b(r,c),Ce(C,r,null),b(r,l),Ce(D,r,null),b(r,h),Ce(A,r,null),m=!0},p:e,i(n){m||(me(g.$$.fragment,n),me(y.$$.fragment,n),me(T.$$.fragment,n),me(I.$$.fragment,n),me(C.$$.fragment,n),me(D.$$.fragment,n),me(A.$$.fragment,n),re(()=>{d&&d.end(1),f||(f=function(n,r,i){let o,s,u=r(n,i),c=!1,l=0;function h(){o&&z(n,o)}function f(){const{delay:r=0,duration:i=300,easing:a=t,tick:f=e,css:d}=u||ye;d&&(o=j(n,0,1,i,r,a,d,l++)),f(0,1);const m=p()+r,g=m+i;s&&s.abort(),c=!0,re(()=>le(n,!0,"start")),s=v(e=>{if(c){if(e>=g)return f(1,0),le(n,!0,"end"),h(),c=!1;if(e>=m){const t=a((e-m)/i);f(t,1-t)}}return c})}let d=!1;return{start(){d||(z(n),a(u)?(u=u(),ce().then(f)):f())},invalidate(){d=!1},end(){c&&(h(),c=!1)}}}(r,ot,{duration:500})),f.start()}),m=!0)},o(n){ge(g.$$.fragment,n),ge(y.$$.fragment,n),ge(T.$$.fragment,n),ge(I.$$.fragment,n),ge(C.$$.fragment,n),ge(D.$$.fragment,n),ge(A.$$.fragment,n),f&&f.invalidate(),d=function(n,r,i){let s,u=r(n,i),c=!0;const l=fe;function h(){const{delay:r=0,duration:i=300,easing:a=t,tick:h=e,css:f}=u||ye;f&&(s=j(n,1,0,i,r,a,f));const d=p()+r,m=d+i;re(()=>le(n,!1,"start")),v(e=>{if(c){if(e>=m)return h(0,1),le(n,!1,"end"),--l.r||o(l.c),!1;if(e>=d){const t=a((e-d)/i);h(1-t,t)}}return c})}return l.r+=1,a(u)?ce().then(()=>{u=u(),h()}):h(),{end(e){e&&u.tick&&u.tick(1,0),c&&(s&&z(n,s),c=!1)}}}(r,ot,{duration:200}),m=!1},d(e){e&&E(r),ke(g),ke(y),ke(T),ke(I),ke(C),ke(D),ke(A),e&&d&&d.end()}}}class wn extends Ne{constructor(e){super(),Ae(this,e,null,bn,s,{})}}
/*!
    Waypoints - 4.0.1
    Copyright © 2011-2016 Caleb Troughton
    Licensed under the MIT license.
    https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
    */!function(){function e(r){if(!r)throw new Error("No options passed to Waypoint constructor");if(!r.element)throw new Error("No element option passed to Waypoint constructor");if(!r.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+t,this.options=e.Adapter.extend({},e.defaults,r),this.element=this.options.element,this.adapter=new e.Adapter(this.element),this.callback=r.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=e.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=e.Context.findOrCreateByElement(this.options.context),e.offsetAliases[this.options.offset]&&(this.options.offset=e.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),n[this.key]=this,t+=1}var t=0,n={};e.prototype.queueTrigger=function(e){this.group.queueTrigger(this,e)},e.prototype.trigger=function(e){this.enabled&&this.callback&&this.callback.apply(this,e)},e.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete n[this.key]},e.prototype.disable=function(){return this.enabled=!1,this},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},e.prototype.next=function(){return this.group.next(this)},e.prototype.previous=function(){return this.group.previous(this)},e.invokeAll=function(e){var t=[];for(var r in n)t.push(n[r]);for(var i=0,o=t.length;o>i;i++)t[i][e]()},e.destroyAll=function(){e.invokeAll("destroy")},e.disableAll=function(){e.invokeAll("disable")},e.enableAll=function(){for(var t in e.Context.refreshAll(),n)n[t].enabled=!0;return this},e.refreshAll=function(){e.Context.refreshAll()},e.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},e.viewportWidth=function(){return document.documentElement.clientWidth},e.adapters=[],e.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},e.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=e}(),function(){function e(e){window.setTimeout(e,1e3/60)}function t(e){this.element=e,this.Adapter=i.Adapter,this.adapter=new this.Adapter(e),this.key="waypoint-context-"+n,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},e.waypointContextKey=this.key,r[e.waypointContextKey]=this,n+=1,i.windowContext||(i.windowContext=!0,i.windowContext=new t(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var n=0,r={},i=window.Waypoint,o=window.onload;t.prototype.add=function(e){var t=e.options.horizontal?"horizontal":"vertical";this.waypoints[t][e.key]=e,this.refresh()},t.prototype.checkEmpty=function(){var e=this.Adapter.isEmptyObject(this.waypoints.horizontal),t=this.Adapter.isEmptyObject(this.waypoints.vertical),n=this.element==this.element.window;e&&t&&!n&&(this.adapter.off(".waypoints"),delete r[this.key])},t.prototype.createThrottledResizeHandler=function(){function e(){t.handleResize(),t.didResize=!1}var t=this;this.adapter.on("resize.waypoints",(function(){t.didResize||(t.didResize=!0,i.requestAnimationFrame(e))}))},t.prototype.createThrottledScrollHandler=function(){function e(){t.handleScroll(),t.didScroll=!1}var t=this;this.adapter.on("scroll.waypoints",(function(){(!t.didScroll||i.isTouch)&&(t.didScroll=!0,i.requestAnimationFrame(e))}))},t.prototype.handleResize=function(){i.Context.refreshAll()},t.prototype.handleScroll=function(){var e={},t={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var n in t){var r=t[n],i=r.newScroll>r.oldScroll?r.forward:r.backward;for(var o in this.waypoints[n]){var a=this.waypoints[n][o];if(null!==a.triggerPoint){var s=r.oldScroll<a.triggerPoint,u=r.newScroll>=a.triggerPoint;(s&&u||!s&&!u)&&(a.queueTrigger(i),e[a.group.id]=a.group)}}}for(var c in e)e[c].flushTriggers();this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.innerHeight=function(){return this.element==this.element.window?i.viewportHeight():this.adapter.innerHeight()},t.prototype.remove=function(e){delete this.waypoints[e.axis][e.key],this.checkEmpty()},t.prototype.innerWidth=function(){return this.element==this.element.window?i.viewportWidth():this.adapter.innerWidth()},t.prototype.destroy=function(){var e=[];for(var t in this.waypoints)for(var n in this.waypoints[t])e.push(this.waypoints[t][n]);for(var r=0,i=e.length;i>r;r++)e[r].destroy()},t.prototype.refresh=function(){var e,t=this.element==this.element.window,n=t?void 0:this.adapter.offset(),r={};for(var o in this.handleScroll(),e={horizontal:{contextOffset:t?0:n.left,contextScroll:t?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:t?0:n.top,contextScroll:t?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}}){var a=e[o];for(var s in this.waypoints[o]){var u,c,l,h,f=this.waypoints[o][s],d=f.options.offset,p=f.triggerPoint,m=0,g=null==p;f.element!==f.element.window&&(m=f.adapter.offset()[a.offsetProp]),"function"==typeof d?d=d.apply(f):"string"==typeof d&&(d=parseFloat(d),f.options.offset.indexOf("%")>-1&&(d=Math.ceil(a.contextDimension*d/100))),u=a.contextScroll-a.contextOffset,f.triggerPoint=Math.floor(m+u-d),c=p<a.oldScroll,l=f.triggerPoint>=a.oldScroll,h=!c&&!l,!g&&(c&&l)?(f.queueTrigger(a.backward),r[f.group.id]=f.group):!g&&h?(f.queueTrigger(a.forward),r[f.group.id]=f.group):g&&a.oldScroll>=f.triggerPoint&&(f.queueTrigger(a.forward),r[f.group.id]=f.group)}}return i.requestAnimationFrame((function(){for(var e in r)r[e].flushTriggers()})),this},t.findOrCreateByElement=function(e){return t.findByElement(e)||new t(e)},t.refreshAll=function(){for(var e in r)r[e].refresh()},t.findByElement=function(e){return r[e.waypointContextKey]},window.onload=function(){o&&o(),t.refreshAll()},i.requestAnimationFrame=function(t){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e).call(window,t)},i.Context=t}(),function(){function e(e,t){return e.triggerPoint-t.triggerPoint}function t(e,t){return t.triggerPoint-e.triggerPoint}function n(e){this.name=e.name,this.axis=e.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),r[this.axis][this.name]=this}var r={vertical:{},horizontal:{}},i=window.Waypoint;n.prototype.add=function(e){this.waypoints.push(e)},n.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},n.prototype.flushTriggers=function(){for(var n in this.triggerQueues){var r=this.triggerQueues[n],i="up"===n||"left"===n;r.sort(i?t:e);for(var o=0,a=r.length;a>o;o+=1){var s=r[o];(s.options.continuous||o===r.length-1)&&s.trigger([n])}}this.clearTriggerQueues()},n.prototype.next=function(t){this.waypoints.sort(e);var n=i.Adapter.inArray(t,this.waypoints);return n===this.waypoints.length-1?null:this.waypoints[n+1]},n.prototype.previous=function(t){this.waypoints.sort(e);var n=i.Adapter.inArray(t,this.waypoints);return n?this.waypoints[n-1]:null},n.prototype.queueTrigger=function(e,t){this.triggerQueues[t].push(e)},n.prototype.remove=function(e){var t=i.Adapter.inArray(e,this.waypoints);t>-1&&this.waypoints.splice(t,1)},n.prototype.first=function(){return this.waypoints[0]},n.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},n.findOrCreate=function(e){return r[e.axis][e.name]||new n(e)},i.Group=n}(),function(){function e(e){return e===e.window}function t(t){return e(t)?t:t.defaultView}function n(e){this.element=e,this.handlers={}}var r=window.Waypoint;n.prototype.innerHeight=function(){return e(this.element)?this.element.innerHeight:this.element.clientHeight},n.prototype.innerWidth=function(){return e(this.element)?this.element.innerWidth:this.element.clientWidth},n.prototype.off=function(e,t){function n(e,t,n){for(var r=0,i=t.length-1;i>r;r++){var o=t[r];n&&n!==o||e.removeEventListener(o)}}var r=e.split("."),i=r[0],o=r[1],a=this.element;if(o&&this.handlers[o]&&i)n(a,this.handlers[o][i],t),this.handlers[o][i]=[];else if(i)for(var s in this.handlers)n(a,this.handlers[s][i]||[],t),this.handlers[s][i]=[];else if(o&&this.handlers[o]){for(var u in this.handlers[o])n(a,this.handlers[o][u],t);this.handlers[o]={}}},n.prototype.offset=function(){if(!this.element.ownerDocument)return null;var e=this.element.ownerDocument.documentElement,n=t(this.element.ownerDocument),r={top:0,left:0};return this.element.getBoundingClientRect&&(r=this.element.getBoundingClientRect()),{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}},n.prototype.on=function(e,t){var n=e.split("."),r=n[0],i=n[1]||"__default",o=this.handlers[i]=this.handlers[i]||{};(o[r]=o[r]||[]).push(t),this.element.addEventListener(r,t)},n.prototype.outerHeight=function(t){var n,r=this.innerHeight();return t&&!e(this.element)&&(n=window.getComputedStyle(this.element),r+=parseInt(n.marginTop,10),r+=parseInt(n.marginBottom,10)),r},n.prototype.outerWidth=function(t){var n,r=this.innerWidth();return t&&!e(this.element)&&(n=window.getComputedStyle(this.element),r+=parseInt(n.marginLeft,10),r+=parseInt(n.marginRight,10)),r},n.prototype.scrollLeft=function(){var e=t(this.element);return e?e.pageXOffset:this.element.scrollLeft},n.prototype.scrollTop=function(){var e=t(this.element);return e?e.pageYOffset:this.element.scrollTop},n.extend=function(){function e(e,t){if("object"==typeof e&&"object"==typeof t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}for(var t=Array.prototype.slice.call(arguments),n=1,r=t.length;r>n;n++)e(t[0],t[n]);return t[0]},n.inArray=function(e,t,n){return null==t?-1:t.indexOf(e,n)},n.isEmptyObject=function(e){for(var t in e)return!1;return!0},r.adapters.push({name:"noframework",Adapter:n}),r.Adapter=n}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var En=function(e,t){return(En=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var Tn=function(){return(Tn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Sn(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function In(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Cn(e){return this instanceof Cn?(this.v=e,this):new Cn(e)}var kn=Object.freeze({__proto__:null,__extends:function(e,t){function n(){this.constructor=e}En(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},get __assign(){return Tn},__rest:function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},__decorate:function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__param:function(e,t){return function(n,r){t(n,r,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},__generator:function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},__exportStar:function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},__values:Sn,__read:In,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(In(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},__await:Cn,__asyncGenerator:function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof Cn?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}},__asyncDelegator:function(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:Cn(e[r](t)),done:"return"===r}:i?i(t):t}:i}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Sn(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}}}),Dn=Et((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var n={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},r=function(e,t){if(!e)throw i(t)},i=function(e){return new Error("Firebase Database ("+n.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},o=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},s=function(e){try{return a.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=u(e[n],t[n]));return e}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var c=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var h=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,f.prototype.create),i}return kn.__extends(t,e),t}(Error),f=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?d(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new h(i,s),c=0,l=Object.keys(r);c<l.length;c++){var f=l[c];"_"!==f.slice(-1)&&(f in u&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),u[f]=r[f])}return u},e}();function d(e,t){return e.replace(p,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}var p=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function m(e){return JSON.parse(e)}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var g=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=m(s(o[0])||""),n=m(s(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}};
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var y=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();var v=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=b),void 0===r.error&&(r.error=b),void 0===r.complete&&(r.complete=b);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function b(){}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function w(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}t.CONSTANTS=n,t.Deferred=c,t.ErrorFactory=f,t.FirebaseError=h,t.Sha1=y,t.assert=r,t.assertionError=i,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=a,t.base64Decode=s,t.base64Encode=function(e){var t=o(e);return a.encodeByteArray(t,!0)},t.contains=
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new v(e,t);return n.subscribe.bind(n)},t.decode=g,t.deepCopy=
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e){return u(void 0,e)},t.deepExtend=u,t.errorPrefix=w,t.getUA=l,t.isAdmin=function(e){var t=g(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isBrowserExtension=function(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},t.isElectron=function(){return l().indexOf("Electron/")>=0},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){var e=l();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(bt.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===n.NODE_CLIENT||!0===n.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isUWP=function(){return l().indexOf("MSAppHost/")>=0},t.isValidFormat=function(e){var t=g(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=g(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=g(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=m,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */,t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(o>=55296&&o<=56319){var a=o-55296;i++,r(i<e.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(e.charCodeAt(i)-56320)}o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):o<65536?(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(w(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(w(e,t,r)+"must be a valid context object.")}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */,t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(w(e,t,r)+"must be a valid firebase namespace.")}}));wt(Dn);Dn.CONSTANTS,Dn.Deferred,Dn.ErrorFactory,Dn.FirebaseError,Dn.Sha1,Dn.assert,Dn.assertionError,Dn.async,Dn.base64,Dn.base64Decode,Dn.base64Encode,Dn.contains,Dn.createSubscribe,Dn.decode,Dn.deepCopy,Dn.deepExtend,Dn.errorPrefix,Dn.getUA,Dn.isAdmin,Dn.isBrowser,Dn.isBrowserExtension,Dn.isElectron,Dn.isEmpty,Dn.isIE,Dn.isMobileCordova,Dn.isNode,Dn.isNodeSdk,Dn.isReactNative,Dn.isUWP,Dn.isValidFormat,Dn.isValidTimestamp,Dn.issuedAtTime,Dn.jsonEval,Dn.map,Dn.querystring,Dn.querystringDecode,Dn.safeGet,Dn.stringLength,Dn.stringToByteArray,Dn.stringify,Dn.validateArgCount,Dn.validateCallback,Dn.validateContextObject,Dn.validateNamespace;var An=Et((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),r=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e="[DEFAULT]");var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Dn.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=kn.__assign({identifier:"[DEFAULT]",optional:!1},e),n=t.identifier,r=t.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(e){if(r)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e))try{this.getOrInitializeService("[DEFAULT]")}catch(e){}try{for(var r=kn.__values(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=kn.__read(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService(u);s.resolve(c)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return kn.__awaiter(this,void 0,void 0,(function(){var e;return kn.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return"[DEFAULT]"===e?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e},e}();
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var i=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new r(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=n,t.ComponentContainer=i,t.Provider=r}));wt(An);An.Component,An.ComponentContainer,An.Provider;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
function Nn(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xn,_n=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(xn||(xn={}));var Rn=xn.INFO,Mn=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString();switch(t){case xn.DEBUG:case xn.VERBOSE:console.log.apply(console,Nn(["["+i+"]  "+e.name+":"],n));break;case xn.INFO:console.info.apply(console,Nn(["["+i+"]  "+e.name+":"],n));break;case xn.WARN:console.warn.apply(console,Nn(["["+i+"]  "+e.name+":"],n));break;case xn.ERROR:console.error.apply(console,Nn(["["+i+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},On=function(){function e(e){this.name=e,this._logLevel=Rn,this._logHandler=Mn,_n.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in xn))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,Nn([this,xn.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,Nn([this,xn.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,Nn([this,xn.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,Nn([this,xn.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,Nn([this,xn.ERROR],e))},e}();var Pn=Object.freeze({__proto__:null,get LogLevel(){return xn},Logger:On,setLogLevel:
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e){_n.forEach((function(t){t.logLevel=e}))}}),Vn=Et((function(e,t){
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var n;Object.defineProperty(t,"__esModule",{value:!0});var r,i=((n={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",n["bad-app-name"]="Illegal App name: '{$appName}",n["duplicate-app"]="Firebase App named '{$appName}' already exists",n["app-deleted"]="Firebase App named '{$appName}' already deleted",n["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",n),o=new Dn.ErrorFactory("app","Firebase",i),a="@firebase/app",s=((r={})[a]="fire-core",r["@firebase/analytics"]="fire-analytics",r["@firebase/auth"]="fire-auth",r["@firebase/database"]="fire-rtdb",r["@firebase/functions"]="fire-fn",r["@firebase/installations"]="fire-iid",r["@firebase/messaging"]="fire-fcm",r["@firebase/performance"]="fire-perf",r["@firebase/remote-config"]="fire-rc",r["@firebase/storage"]="fire-gcs",r["@firebase/firestore"]="fire-fst",r["fire-js"]="fire-js",r["firebase-wrapper"]="fire-js-all",r),u=new Pn.Logger("@firebase/app"),c=function(){function e(e,t,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=Dn.deepCopy(e),this.container=new An.ComponentContainer(t.name),this._addComponent(new An.Component("app",(function(){return o}),"PUBLIC"));try{for(var a=kn.__values(this.firebase_.INTERNAL.components.values()),s=a.next();!s.done;s=a.next()){var u=s.value;this._addComponent(u)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){u.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw o.create("app-deleted",{appName:this.name_})},e}();c.prototype.name&&c.prototype.options||c.prototype.delete||console.log("dc");var l=
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function e(){var t=
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var a=i;void 0===a.name&&(a.name="[DEFAULT]");var s=a.name;if("string"!=typeof s||!s)throw o.create("bad-app-name",{appName:String(s)});if(Dn.contains(t,s))throw o.create("duplicate-app",{appName:s});var u=new e(n,a,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=s[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),c=t.match(/\s|\//);if(o||c){var l=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&l.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&c&&l.push("and"),c&&l.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void u.warn(l.join(" "))}a(new An.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},apps:null,SDK_VERSION:"7.8.1",INTERNAL:{registerComponent:a,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){if("serverAuth"===t)return null;return t}}};function i(e){if(e=e||"[DEFAULT]",!Dn.contains(t,e))throw o.create("no-app",{appName:e});return t[e]}function a(a){var s,c,l=a.name;if(n.has(l))return u.debug("There were multiple attempts to register component "+l+"."),"PUBLIC"===a.type?r[l]:null;if(n.set(l,a),"PUBLIC"===a.type){var h=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[l])throw o.create("invalid-app-argument",{appName:l});return e[l]()};void 0!==a.serviceProps&&Dn.deepExtend(h,a.serviceProps),r[l]=h,e.prototype[l]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,l);return n.apply(this,a.multipleInstances?e:[])}}try{for(var f=kn.__values(Object.keys(t)),d=f.next();!d.done;d=f.next()){var p=d.value;t[p]._addComponent(a)}}catch(e){s={error:e}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(s)throw s.error}}return"PUBLIC"===a.type?r[l]:null}return(r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r)}(c);return t.INTERNAL=kn.__assign(kn.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Dn.deepExtend(t,e)},createSubscribe:Dn.createSubscribe,ErrorFactory:Dn.ErrorFactory,deepExtend:Dn.deepExtend}),t}(),h=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t,n=e.getComponent();return"VERSION"===(null===(t=n)||void 0===t?void 0:t.type)}
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();
/**
     * @license
     * Copyright 2019 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if(Dn.isBrowser()&&void 0!==self.firebase){u.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var f=self.firebase.SDK_VERSION;f&&f.indexOf("LITE")>=0&&u.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var d=l.initializeApp;l.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Dn.isNode()&&u.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),d.apply(void 0,e)};var p=l;!function(e,t){e.INTERNAL.registerComponent(new An.Component("platform-logger",(function(e){return new h(e)}),"PRIVATE")),e.registerVersion(a,"0.5.4",t),e.registerVersion("fire-js","")}(p),t.default=p,t.firebase=p}));wt(Vn);Vn.firebase;var Ln,$n=(Ln=Vn)&&"object"==typeof Ln&&"default"in Ln?Ln.default:Ln;
/**
     * @license
     * Copyright 2018 Google Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
$n.registerVersion("firebase","7.8.2","app");var Fn=$n;Et((function(e,t){!function(e){try{(function(){e=e&&e.hasOwnProperty("default")?e.default:e;var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,n)};function n(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r,i,o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function u(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function c(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function l(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString();switch(t){case r.DEBUG:case r.VERBOSE:console.log.apply(console,c(["["+o+"]  "+e.name+":"],n));break;case r.INFO:console.info.apply(console,c(["["+o+"]  "+e.name+":"],n));break;case r.WARN:console.warn.apply(console,c(["["+o+"]  "+e.name+":"],n));break;case r.ERROR:console.error.apply(console,c(["["+o+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}}(i=r=r||{})[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";var h=r.INFO,f=(Object.defineProperty(d.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in r))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),d.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,c([this,r.DEBUG],e))},d.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,c([this,r.VERBOSE],e))},d.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,c([this,r.INFO],e))},d.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,c([this,r.WARN],e))},d.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,c([this,r.ERROR],e))},d);function d(e){this.name=e,this._logLevel=h,this._logHandler=l}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var m,g=(n(y,m=Error),y);function y(e,t){var n=m.call(this,t)||this;return n.code=e,n.name="FirebaseError",Object.setPrototypeOf(n,y.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,v.prototype.create),n}var v=(b.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?function(e,t){return e.replace(w,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new g(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},b);function b(e,t,n){this.service=e,this.serviceName=t,this.errors=n}var w=/\{\$([^}]+)}/g,E=(T.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},T.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},T.prototype.setServiceProps=function(e){return this.serviceProps=e,this},T);function T(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var S,I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==bt?bt:"undefined"!=typeof self?self:{},C=C||{},k=I;function D(e){return"string"==typeof e}function A(e){return"number"==typeof e}function N(e,t){e=e.split("."),t=t||k;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function x(){}function _(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function R(e){return"array"==_(e)}function M(e){var t=_(e);return"array"==t||"object"==t&&"number"==typeof e.length}function O(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var P="closure_uid_"+(1e9*Math.random()>>>0),V=0;function L(e,t,n){return e.call.apply(e.bind,arguments)}function $(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function F(e,t,n){return(F=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?L:$).apply(null,arguments)}function q(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var B=Date.now||function(){return+new Date};function U(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,(e.prototype.constructor=e).xb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function j(){this.j=this.j,this.i=this.i}j.prototype.j=!1,j.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[P]||(this[P]=++V))},j.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var z=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(D(e))return D(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},W=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=D(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function K(e){return Array.prototype.concat.apply([],arguments)}function G(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Q(e){return/^[\s\xa0]*$/.test(e)}var H,Y=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function X(e,t){return-1!=e.indexOf(t)}function J(e,t){return e<t?-1:t<e?1:0}e:{var Z=k.navigator;if(Z){var ee=Z.userAgent;if(ee){H=ee;break e}}H=""}function te(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ne(e){var t,n={};for(t in e)n[t]=e[t];return n}var re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<re.length;o++)n=re[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function oe(e){return oe[" "](e),e}oe[" "]=x;var ae,se,ue=X(H,"Opera"),ce=X(H,"Trident")||X(H,"MSIE"),le=X(H,"Edge"),he=le||ce,fe=X(H,"Gecko")&&!(X(H.toLowerCase(),"webkit")&&!X(H,"Edge"))&&!(X(H,"Trident")||X(H,"MSIE"))&&!X(H,"Edge"),de=X(H.toLowerCase(),"webkit")&&!X(H,"Edge");function pe(){var e=k.document;return e?e.documentMode:void 0}e:{var me="",ge=(se=H,fe?/rv:([^\);]+)(\)|;)/.exec(se):le?/Edge\/([\d\.]+)/.exec(se):ce?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(se):de?/WebKit\/(\S+)/.exec(se):ue?/(?:Version)[ \/]?(\S+)/.exec(se):void 0);if(ge&&(me=ge?ge[1]:""),ce){var ye=pe();if(null!=ye&&ye>parseFloat(me)){ae=String(ye);break e}}ae=me}var ve,be={};function we(e){return function(t,n){var r=be;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=function(){for(var t=0,n=Y(String(ae)).split("."),r=Y(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=J(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||J(0==a[2].length,0==s[2].length)||J(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}()}(e)}var Ee=k.document;ve=Ee&&ce?pe()||("CSS1Compat"==Ee.compatMode?parseInt(ae,10):5):void 0;var Te=!ce||9<=Number(ve),Se=ce&&!we("9"),Ie=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{k.addEventListener("test",x,t),k.removeEventListener("test",x,t)}catch(e){}return e}();function Ce(e,t){this.type=e,this.a=this.target=t,this.Ia=!0}function ke(e,t){if(Ce.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(fe){e:{try{oe(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=D(e.pointerType)?e.pointerType:De[e.pointerType]||"",(this.c=e).defaultPrevented&&this.b()}}Ce.prototype.b=function(){this.Ia=!1},U(ke,Ce);var De={2:"touch",3:"pen",4:"mouse"};ke.prototype.b=function(){ke.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Se)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}};var Ae="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function xe(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++Ne,this.X=this.Z=!1}function _e(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function Re(e){this.src=e,this.a={},this.b=0}function Me(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=z(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(_e(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function Oe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}Re.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=Oe(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new xe(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var Pe="closure_lm_"+(1e6*Math.random()|0),Ve={};function Le(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(R(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=We(r),t&&t[Ae]?t.Aa(n,r,O(i)?!!i.capture:!!i,o):$e(t,n,r,!0,i,o)}(e,t,n,r,i);if(R(t)){for(var o=0;o<t.length;o++)Le(e,t[o],n,r,i);return null}return n=We(n),e&&e[Ae]?e.za(t,n,O(r)?!!r.capture:!!r,i):$e(e,t,n,!1,r,i)}function $e(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=O(i)?!!i.capture:!!i;if(a&&!Te)return null;var s=je(e);if(s||(e[Pe]=s=new Re(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=Ue,t=Te?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),(n.proxy=r).src=e,r.listener=n,e.addEventListener)Ie||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(qe(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Fe(e){if(!A(e)&&e&&!e.X){var t=e.src;if(t&&t[Ae])Me(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(qe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=je(t))?(Me(n,e),0==n.b&&(n.src=null,t[Pe]=null)):_e(e)}}}function qe(e){return e in Ve?Ve[e]:Ve[e]="on"+e}function Be(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&Fe(e),n.call(r,t)}function Ue(e,t){return!!e.X||Be(e,Te?new ke(t,this):t=new ke(t||N("window.event"),this))}function je(e){return(e=e[Pe])instanceof Re?e:null}var ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function We(e){return"function"==_(e)?e:(e[ze]||(e[ze]=function(t){return e.handleEvent(t)}),e[ze])}function Ke(){j.call(this),this.c=new Re(this),(this.J=this).B=null}function Ge(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&Me(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ia}U(Ke,j),Ke.prototype[Ae]=!0,(S=Ke.prototype).addEventListener=function(e,t,n,r){Le(this,e,t,n,r)},S.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(R(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=O(i)?!!i.capture:!!i,r=We(r),t&&t[Ae]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=Oe(a=t.a[n],r,i,o))&&(_e(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--))):(t=t&&je(t))&&(n=t.a[n.toString()],t=-1,n&&(t=Oe(n,r,i,o)),(r=-1<t?n[t]:null)&&Fe(r))}(this,e,t,n,r)},S.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(D(e))e=new Ce(e,n);else if(e instanceof Ce)e.target=e.target||n;else{var i=e;ie(e=new Ce(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=Ge(a,r,!0,e)&&i}if(i=Ge(a=e.a=n,r,!0,e)&&i,i=Ge(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Ge(a=e.a=t[o],r,!1,e)&&i;return i},S.G=function(){if(Ke.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)_e(n[r]);delete t.a[e],t.b--}}this.B=null},S.za=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},S.Aa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Qe=k.JSON.stringify;function He(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Ye(){this.b=this.a=null}He.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var Xe,Je=new He((function(){return new Ze}),(function(e){e.reset()}));function Ze(){this.next=this.b=this.a=null}function et(e){k.setTimeout((function(){throw e}),0)}function tt(e,t){Xe||function(){var e=k.Promise.resolve(void 0);Xe=function(){e.then(it)}}(),nt||(Xe(),nt=!0),rt.add(e,t)}Ye.prototype.add=function(e,t){var n=Je.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Ze.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};var nt=!(Ze.prototype.reset=function(){this.next=this.b=this.a=null}),rt=new Ye;function it(){for(var e;r=n=void 0,r=null,(n=rt).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),e=r;){try{e.a.call(e.b)}catch(e){et(e)}var t=Je;t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}var n,r;nt=!1}function ot(e,t){Ke.call(this),this.b=e||1,this.a=t||k,this.f=F(this.fb,this),this.g=B()}function at(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function st(e,t,n){if("function"==_(e))n&&(e=F(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=F(e.handleEvent,e)}return 2147483647<Number(t)?-1:k.setTimeout(e,t||0)}function ut(e,t,n){j.call(this),this.f=null!=n?F(e,n):e,this.c=t,this.b=F(this.$a,this),this.a=[]}function ct(e){e.U=st(e.b,e.c),e.f.apply(null,e.a)}function lt(e){j.call(this),this.b=e,this.a={}}U(ot,Ke),(S=ot.prototype).ba=!1,S.L=null,S.fb=function(){if(this.ba){var e=B()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(at(this),this.start()))}},S.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=B())},S.G=function(){ot.N.G.call(this),at(this),delete this.a},U(ut,j),(S=ut.prototype).ea=!1,S.U=null,S.Ta=function(e){this.a=arguments,this.U?this.ea=!0:ct(this)},S.G=function(){ut.N.G.call(this),this.U&&(k.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},S.$a=function(){this.U=null,this.ea&&(this.ea=!1,ct(this))},U(lt,j);var ht=[];function ft(e,t,n,r){R(n)||(n&&(ht[0]=n.toString()),n=ht);for(var i=0;i<n.length;i++){var o=Le(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function dt(e){te(e.a,(function(e,t){this.a.hasOwnProperty(t)&&Fe(e)}),e),e.a={}}function pt(){}lt.prototype.G=function(){lt.N.G.call(this),dt(this)},lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mt=new Ke;function gt(e){Ce.call(this,"serverreachability",e)}function yt(e){mt.dispatchEvent(new gt(mt,e))}function vt(e){Ce.call(this,"statevent",e)}function wt(e){mt.dispatchEvent(new vt(mt,e))}function Et(e){Ce.call(this,"timingevent",e)}function Tt(e,t){if("function"!=_(e))throw Error("Fn must not be null and must be a function");return k.setTimeout((function(){e()}),t)}U(gt,Ce),U(vt,Ce),U(Et,Ce);var St={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},It={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function Ct(){}function kt(e){var t;return(t=e.a)||(t=e.a={}),t}function Dt(){}Ct.prototype.a=null;var At,Nt={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function xt(){Ce.call(this,"d")}function _t(){Ce.call(this,"c")}function Rt(){}function Mt(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new lt(this),this.O=Ot,e=he?125:void 0,this.P=new ot(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}U(xt,Ce),U(_t,Ce),U(Rt,Ct),At=new Rt;var Ot=45e3,Pt={},Vt={};function Lt(e,t,n){e.F=1,e.f=cn(tn(t)),e.l=n,e.H=!0,Ft(e,null)}function $t(e,t,n,r){e.F=1,e.f=cn(tn(t)),e.l=null,e.H=n,Ft(e,r)}function Ft(e,t){e.v=B(),Ut(e),e.D=tn(e.f),un(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new ut(F(e.Ja,e,e.a),e.J)),ft(e.I,e.a,"readystatechange",e.cb),t=e.h?ne(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),yt(1)}function qt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=Bt(e,n);if(i==Vt){4==t&&(e.c=4,wt(14),r=!1);break}if(i==Pt){e.c=4,wt(15),r=!1;break}Gt(e,i)}4==t&&0==n.length&&(e.c=1,wt(16),r=!1),e.b=e.b&&r,r||(Kt(e),Wt(e))}function Bt(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?Vt:(n=Number(t.substring(n,r)),isNaN(n)?Pt:(r+=1)+n>t.length?Vt:(t=t.substr(r,n),e.A=r+n,t))}function Ut(e){e.R=B()+e.O,jt(e,e.O)}function jt(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=Tt(F(e.ab,e),t)}function zt(e){e.i&&(k.clearTimeout(e.i),e.i=null)}function Wt(e){e.g.Ca()||e.m||e.g.na(e)}function Kt(e){zt(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,at(e.P),dt(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Gt(e,t){try{e.g.Fa(e,t),yt(4)}catch(e){}}function Qt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(M(e)||D(e))W(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(M(e)||D(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(D(e))return e.split("");if(M(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Ht(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ht)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Yt(e,t){Jt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Xt(e))}function Xt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Jt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Jt(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function Jt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(S=Mt.prototype).setTimeout=function(e){this.O=e},S.cb=function(e){e=e.target;var t=this.B;t&&3==tr(e)?t.Ta():this.Ja(e)},S.Ja=function(e){try{if(e==this.a)e:{var t=tr(this.a),n=this.a.ya(),r=this.a.T();if(!(t<3||3==t&&!he&&!this.a.aa())){this.m||4!=t||7==n||yt(8==n||r<=0?3:2),zt(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=nr(this.a,"X-HTTP-Initial-Response");if(a&&!Q(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,wt(12),Kt(this),Wt(this);break e}this.s=!0,Gt(this,s)}this.H?(qt(this,t,o),he&&this.b&&3==t&&(ft(this.I,this.P,"tick",this.bb),this.P.start())):Gt(this,o),4==t&&Kt(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,Ut(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,wt(12)):(this.c=0,wt(13)),Kt(this),Wt(this)}}}catch(e){}},S.bb=function(){if(this.a){var e=tr(this.a),t=this.a.aa();this.A<t.length&&(zt(this),qt(this,e,t),this.b&&4!=e&&Ut(this))}},S.cancel=function(){this.m=!0,Kt(this)},S.ab=function(){this.i=null;var e=B();0<=e-this.R?(2!=this.F&&(yt(3),wt(17)),Kt(this),this.c=2,Wt(this)):jt(this,this.R-e)},(S=Ht.prototype).C=function(){Xt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},S.K=function(){return Xt(this),this.a.concat()},S.get=function(e,t){return Jt(this.b,e)?this.b[e]:t},S.set=function(e,t){Jt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},S.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Zt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function en(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof en?(this.h=void 0!==t?t:e.h,nn(this,e.f),this.j=e.j,rn(this,e.b),on(this,e.i),this.a=e.a,an(this,Sn(e.c)),this.g=e.g):e&&(n=String(e).match(Zt))?(this.h=!!t,nn(this,n[1]||"",!0),this.j=ln(n[2]||""),rn(this,n[3]||"",!0),on(this,n[4]),this.a=ln(n[5]||"",!0),an(this,n[6]||"",!0),this.g=ln(n[7]||"")):(this.h=!!t,this.c=new vn(null,this.h))}function tn(e){return new en(e)}function nn(e,t,n){e.f=n?ln(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function rn(e,t,n){e.b=n?ln(t,!0):t}function on(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.i=t}else e.i=null}function an(e,t,n){t instanceof vn?(e.c=t,function(e,t){t&&!e.f&&(bn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(wn(this,t),Tn(this,n,e))}),e)),e.f=t}(e.c,e.h)):(n||(t=hn(t,gn)),e.c=new vn(t,e.h))}function sn(e,t,n){e.c.set(t,n)}function un(e,t,n){R(n)||(n=[String(n)]),Tn(e.c,t,n)}function cn(e){return sn(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^B()).toString(36)),e}function ln(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function hn(e,t,n){return D(e)?(e=encodeURI(e).replace(t,fn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function fn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}en.prototype.toString=function(){var e=[],t=this.f;t&&e.push(hn(t,dn,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.j)&&e.push(hn(t,dn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(hn(n,"/"==n.charAt(0)?mn:pn,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",hn(n,yn)),e.join("")},en.prototype.resolve=function(e){var t=tn(this),n=!!e.f;n?nn(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?rn(t,e.b):n=null!=e.i;var r=e.a;if(n)on(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(X(i,"./")||X(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?an(t,Sn(e.c)):n=!!e.g,n&&(t.g=e.g),t};var dn=/[#\/\?@]/g,pn=/[#\?:]/g,mn=/[#\?]/g,gn=/[#\?@]/g,yn=/#/g;function vn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function bn(e){e.a||(e.a=new Ht,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function wn(e,t){bn(e),t=In(e,t),Jt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Yt(e.a,t))}function En(e,t){return bn(e),t=In(e,t),Jt(e.a.b,t)}function Tn(e,t,n){wn(e,t),0<n.length&&(e.c=null,e.a.set(In(e,t),G(n)),e.b+=n.length)}function Sn(e){var t=new vn;return t.c=e.c,e.a&&(t.a=new Ht(e.a),t.b=e.b),t}function In(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function Cn(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function kn(e){var t=e.a.F.a;if(null!=t)wt(4),t?(wt(10),pr(e.a,e,!1)):(wt(11),pr(e.a,e,!0));else{e.b=new Mt(e,void 0,void 0),e.b.h=e.h,t=br(t=e.a,t.Y()?e.f:null,e.i),wt(4),un(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&sn(t,n,r),$t(e.b,t,!1,e.f)}}function Dn(){this.a=this.b=null}function An(){this.a=new Ht}function Nn(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[P]||(e[P]=++V)):t.charAt(0)+e}function xn(e,t){this.b=e,this.a=t}function _n(e){this.g=e||Rn,e=k.PerformanceNavigationTiming?0<(e=k.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(k.ka&&k.ka.Da&&k.ka.Da()&&k.ka.Da().yb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new An),this.b=null,this.c=[]}(S=vn.prototype).add=function(e,t){bn(this),this.c=null,e=In(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},S.forEach=function(e,t){bn(this),this.a.forEach((function(n,r){W(n,(function(n){e.call(t,n,r,this)}),this)}),this)},S.K=function(){bn(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},S.C=function(e){bn(this);var t=[];if(D(e))En(this,e)&&(t=K(t,this.a.get(In(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=K(t,e[n])}return t},S.set=function(e,t){return bn(this),this.c=null,En(this,e=In(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},S.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},S.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},U((function(){}),(function(){})),(S=Cn.prototype).M=null,S.$=function(e){return this.a.$(e)},S.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},S.Ca=function(){return!1},S.Fa=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=nr(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=nr(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void yr(t,2)}this.f=r[0]}else(t=this.a).m=this.c,yr(t,2)}else 1==this.M&&(this.g?wt(6):"11111"==t?(wt(5),this.g=!0,(!ce||10<=Number(ve))&&(this.c=200,this.b.cancel(),wt(11),pr(this.a,this,!0))):(wt(7),this.g=!1))},S.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,kn(this)):1==this.M&&(this.g?(wt(11),pr(this.a,this,!0)):(wt(10),pr(this.a,this,!1)));else{0==this.M?wt(8):1==this.M&&wt(9);var e=this.a;e.m=this.c,yr(e,2)}},S.Y=function(){return this.a.Y()},S.ma=function(){return this.a.ma()},An.prototype.add=function(e){this.a.set(Nn(e),e)},An.prototype.C=function(){return this.a.C()};var Rn=10;function Mn(e,t){!e.a&&(X(t,"spdy")||X(t,"quic")||X(t,"h2"))&&(e.f=e.g,e.a=new An,e.b&&(Ln(e,e.b),e.b=null))}function On(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function Pn(e){return e.b?1:e.a?e.a.a.c:0}function Vn(e,t){return e.b?e.b==t:!!e.a&&(t=Nn(t),Jt(e.a.a.b,t))}function Ln(e,t){e.a?e.a.add(t):e.b=t}function $n(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=Nn(t),n=Jt(e.a.a.b,n)),n&&Yt(e.a.a,Nn(t)))}function Fn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null==e.a||0==e.a.a.c)return G(e.c);var t=e.c;return W(e.a.C(),(function(e){t=t.concat(e.j)})),t}function qn(){}function Bn(){this.a=new qn}function Un(e,t,n){var r=n||"";try{Qt(e,(function(e,n){var i=e;O(e)&&(i=Qe(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function jn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}_n.prototype.cancel=function(){this.c=Fn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(W(this.a.C(),(function(e){e.cancel()})),function(e){e.b={},e.a.length=0,e.c=0}(this.a.a))},qn.prototype.stringify=function(e){return k.JSON.stringify(e,void 0)},qn.prototype.parse=function(e){return k.JSON.parse(e,void 0)};var zn=k.JSON.parse;function Wn(e){Ke.call(this),this.headers=new Ht,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Kn,this.D=this.F=!1}U(Wn,Ke);var Kn="",Gn=/^https?$/i,Qn=["POST","PUT"];function Hn(e){return"content-type"==e.toLowerCase()}function Yn(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Xn(e),Zn(e)}function Xn(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Jn(e){if(e.b&&void 0!==C&&(!e.s[1]||4!=tr(e)||2!=e.T()))if(e.l&&4==tr(e))st(e.Ea,0,e);else if(e.dispatchEvent("readystatechange"),4==tr(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.A).match(Zt)[1]||null;if(!o&&k.self&&k.self.location){var a=k.self.location.protocol;o=a.substr(0,a.length-1)}i=!Gn.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var s=2<tr(e)?e.a.statusText:""}catch(e){s=""}e.f=s+" ["+e.T()+"]",Xn(e)}}finally{Zn(e)}}}function Zn(e,t){if(e.a){er(e);var n=e.a,r=e.s[0]?x:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function er(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(k.clearTimeout(e.m),e.m=null)}function tr(e){return e.a?e.a.readyState:0}function nr(e,t){return e.a?e.a.getResponseHeader(t):null}function rr(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return te(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),D(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=e.indexOf("#"))<0&&(n=e.length),(r=e.indexOf("?"))<0||n<r){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return sn(e,t,n),e}function ir(e){this.f=[],this.F=new Dn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!N("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=N("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Ra=N("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Pa=N("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=N("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.Ka=e&&e.zb||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new _n(e&&e.concurrentRequestLimit),this.ja=new Bn,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function or(e){if(ar(e),3==e.u){var t=e.P++,n=tn(e.B);sn(n,"SID",e.H),sn(n,"RID",t),sn(n,"TYPE","terminate"),lr(e,n),(t=new Mt(e,t,void 0)).F=2,t.f=cn(tn(n)),n=!1,k.navigator&&k.navigator.sendBeacon&&(n=k.navigator.sendBeacon(t.f.toString(),"")),!n&&k.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=B(),Ut(t)}vr(e)}function ar(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(k.clearTimeout(e.l),e.l=null),mr(e),e.b.cancel(),e.h&&(A(e.h)&&k.clearTimeout(e.h),e.h=null)}function sr(e,t){e.f.push(new xn(e.Qa++,t)),3==e.u&&ur(e)}function ur(e){On(e.b)||e.h||(e.h=!0,tt(e.Ha,e),e.A=0)}function cr(e,t){var n;n=t?t.W:e.P++;var r=tn(e.B);sn(r,"SID",e.H),sn(r,"RID",n),sn(r,"AID",e.O),lr(e,r),e.g&&e.i&&rr(r,e.g,e.i),n=new Mt(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=hr(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),Ln(e.b,n),Lt(n,r,t)}function lr(e,t){e.c&&Qt({},(function(e,n){sn(t,n,e)}))}function hr(e,t,n){n=Math.min(e.f.length,n);var r=e.c?F(e.c.Sa,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{Un(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function fr(e){e.a||e.l||(e.S=1,tt(e.Ga,e),e.v=0)}function dr(e){return!(e.a||e.l||3<=e.v||(e.S++,e.l=Tt(F(e.Ga,e),gr(e,e.v)),e.v++,0))}function pr(e,t,n){var r=t.l;r&&Mn(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=br(e,null,e.ha),ur(e)}function mr(e){null!=e.s&&(k.clearTimeout(e.s),e.s=null)}function gr(e,t){var n=e.Na+Math.floor(Math.random()*e.Ra);return e.ma()||(n*=2),n*t}function yr(e,t){if(2==t){var n=null;e.c&&(n=null);var r=F(e.eb,e);n||(n=new en("//www.google.com/images/cleardot.gif"),k.location&&"http"==k.location.protocol||nn(n,"https"),cn(n)),function(e,t){var n=new pt;if(k.Image){var r=new Image;r.onload=q(jn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=q(jn,n,r,"TestLoadImage: error",!1,t),r.onabort=q(jn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=q(jn,n,r,"TestLoadImage: timeout",!1,t),k.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else wt(2);e.u=0,e.c&&e.c.ta(t),vr(e),ar(e)}function vr(e){e.u=0,e.m=-1,e.c&&(0==Fn(e.b).length&&0==e.f.length||(e.b.c.length=0,G(e.f),e.f.length=0),e.c.sa())}function br(e,t,n){var r=function(e){return e instanceof en?tn(e):new en(e,void 0)}(n);if(""!=r.b)t&&rn(r,t+"."+r.b),on(r,r.i);else{var i,o=k.location;i=t?t+"."+o.hostname:o.hostname,r=function(e,t,n,r){var i=new en(null,void 0);return e&&nn(i,e),t&&rn(i,t),n&&on(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return e.V&&te(e.V,(function(e,t){sn(r,t,e)})),t=e.j,n=e.I,t&&n&&sn(r,t,n),sn(r,"VER",e.wa),lr(e,r),r}function wr(){}function Er(){if(ce&&!(10<=Number(ve)))throw Error("Environmental error: no available transport.")}function Tr(e,t){Ke.call(this),this.a=new ir(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=e,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!Q(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Q(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new Cr(this)}function Sr(e){xt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function Ir(){_t.call(this),this.status=1}function Cr(e){this.a=e}(S=Wn.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?kt(this.H):kt(At),this.a.onreadystatechange=F(this.Ea,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void Yn(this,e)}e=n||"";var i=new Ht(this.headers);r&&Qt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Hn,n=e.length,r=D(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:D(e)?e.charAt(t):e[t]}(i.K()),n=k.FormData&&e instanceof k.FormData,0<=z(Qn,t)&&!r&&!n&&i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{er(this),0<this.o&&((this.D=function(e){return ce&&we(9)&&A(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=F(this.Ba,this)):this.m=st(this.Ba,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){Yn(this,e)}},S.Ba=function(){void 0!==C&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},S.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Zn(this))},S.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Zn(this,!0)),Wn.N.G.call(this)},S.Ea=function(){this.j||(this.w||this.l||this.g?Jn(this):this.Za())},S.Za=function(){Jn(this)},S.T=function(){try{return 2<tr(this)?this.a.status:-1}catch(e){return-1}},S.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},S.Ua=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),zn(t)}},S.ya=function(){return this.h},S.Xa=function(){return D(this.f)?this.f:String(this.f)},(S=ir.prototype).wa=8,S.u=1,S.Ca=function(){return 0==this.u},S.Ha=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new Mt(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?ie(r=ne(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&D(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=hr(this,n,t),sn(i=tn(this.B),"RID",e),sn(i,"CVER",22),this.o&&this.j&&sn(i,"X-HTTP-Session-Id",this.j),lr(this,i),this.g&&r&&rr(i,this.g,r),Ln(this.b,n),this.W?(sn(i,"$req",t),sn(i,"SID","null"),n.S=!0,Lt(n,i,null)):Lt(n,i,t),this.u=2}}else 3==this.u&&(e?cr(this,e):0==this.f.length||On(this.b)||cr(this))},S.Ga=function(){this.l=null,this.a=new Mt(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=tn(this.pa);sn(e,"RID","rpc"),sn(e,"SID",this.H),sn(e,"CI",this.ia?"0":"1"),sn(e,"AID",this.O),lr(this,e),sn(e,"TYPE","xmlhttp"),this.g&&this.i&&rr(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),$t(this.a,e,!0,this.ga)},S.Fa=function(e,t){if(0!=this.u&&(this.a==e||Vn(this.b,e)))if(this.m=e.o,!e.s&&Vn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(R(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;mr(this),this.a.cancel(),this.a=null}dr(this),wt(18)}}else this.ra=t[1],0<this.ra-this.O&&t[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=Tt(F(this.Ya,this),6e3));if(Pn(this.b)<=1&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else yr(this,11)}else if(!e.s&&this.a!=e||mr(this),!Q(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&A(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=nr(r,"X-Client-Wire-Protocol"))&&Mn(this.b,i),this.j&&(r=nr(r,"X-HTTP-Session-Id")))&&(this.I=r,sn(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=br(this,this.Y()?this.ga:null,this.ha),r.s?($n(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(zt(r),Ut(r)),this.a=r):fr(this),0<this.f.length&&ur(this)}else"stop"!=r[0]&&"close"!=r[0]||yr(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?yr(this,7):or(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},S.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,dr(this),wt(19))},S.na=function(e){var t=null;if(this.a==e){mr(this),this.a=null;var n=2}else{if(!Vn(this.b,e))return;t=e.j,$n(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=B()-e.v,mt.dispatchEvent(new Et(mt,e.l?e.l.length:0,t,this.A)),ur(this)):fr(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(Pn(e.b)>=e.b.f-(e.h?1:0)||(e.h?(e.f=t.j.concat(e.f),0):1==e.u||2==e.u||e.A>=(e.Oa?0:e.Pa)||(e.h=Tt(F(e.Ha,e,t),gr(e,e.A)),e.A++,0)))}(this,e)||2==n&&dr(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:yr(this,5);break;case 4:yr(this,10);break;case 3:yr(this,6);break;default:yr(this,2)}}},S.eb=function(e){wt(e?2:1)},S.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wn(this.Ka)).F=this.R,e},S.ma=function(){return!!this.c&&!0},S.Y=function(){return this.R},(S=wr.prototype).va=function(){},S.ua=function(){},S.ta=function(){},S.sa=function(){},S.Sa=function(){},Er.prototype.a=function(e,t){return new Tr(e,t)},U(Tr,Ke),(S=Tr.prototype).addEventListener=function(e,t,n,r){Tr.N.addEventListener.call(this,e,t,n,r)},S.removeEventListener=function(e,t,n,r){Tr.N.removeEventListener.call(this,e,t,n,r)},S.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;wt(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new Cn(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=rr(t,e.g,e.i)),(e=e.w).i=n,t=br(e.a,null,e.i),wt(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,kn(e)):(un(t,"MODE","init"),!e.a.o&&e.a.j&&un(t,"X-HTTP-Session-Id",e.a.j),e.b=new Mt(e,void 0,void 0),e.b.h=e.h,$t(e.b,t,!1,null),e.M=0)},S.close=function(){or(this.a)},S.Wa=function(e){if(D(e)){var t={};t.__data__=e,sr(this.a,t)}else this.h?((t={}).__data__=Qe(e),sr(this.a,t)):sr(this.a,e)},S.G=function(){this.a.c=null,delete this.f,or(this.a),delete this.a,Tr.N.G.call(this)},U(Sr,xt),U(Ir,_t),U(Cr,wr),Cr.prototype.va=function(){this.a.dispatchEvent("a")},Cr.prototype.ua=function(e){this.a.dispatchEvent(new Sr(e))},Cr.prototype.ta=function(e){this.a.dispatchEvent(new Ir(e))},Cr.prototype.sa=function(){this.a.dispatchEvent("b")};var kr=q((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),Er);Er.prototype.createWebChannel=Er.prototype.a,Tr.prototype.send=Tr.prototype.Wa,Tr.prototype.open=Tr.prototype.Va,Tr.prototype.close=Tr.prototype.close,St.NO_ERROR=0,St.TIMEOUT=8,St.HTTP_ERROR=6,It.COMPLETE="complete",(Dt.EventType=Nt).OPEN="a",Nt.CLOSE="b",Nt.ERROR="c",Nt.MESSAGE="d",Ke.prototype.listen=Ke.prototype.za,Wn.prototype.listenOnce=Wn.prototype.Aa,Wn.prototype.getLastError=Wn.prototype.Xa,Wn.prototype.getLastErrorCode=Wn.prototype.ya,Wn.prototype.getStatus=Wn.prototype.T,Wn.prototype.getResponseJson=Wn.prototype.Ua,Wn.prototype.getResponseText=Wn.prototype.aa,Wn.prototype.send=Wn.prototype.ca;var Dr,Ar,Nr={createWebChannelTransport:kr,ErrorCode:St,EventType:It,WebChannel:Dt,XhrIo:Wn},xr=Nr.createWebChannelTransport,_r=Nr.ErrorCode,Rr=Nr.EventType,Mr=Nr.WebChannel,Or=Nr.XhrIo,Pr=e.SDK_VERSION,Vr=new f("@firebase/firestore");function Lr(){return Vr.logLevel===r.DEBUG?Dr.DEBUG:Vr.logLevel===r.SILENT?Dr.SILENT:Dr.ERROR}function $r(e){switch(e){case Dr.DEBUG:Vr.logLevel=r.DEBUG;break;case Dr.ERROR:Vr.logLevel=r.ERROR;break;case Dr.SILENT:Vr.logLevel=r.SILENT;break;default:Vr.error("Firestore ("+Pr+"): Invalid value passed to `setLogLevel`")}}function Fr(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(Vr.logLevel<=r.DEBUG){var o=n.map(Br);Vr.debug.apply(Vr,u(["Firestore ("+Pr+") ["+e+"]: "+t],o))}}function qr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Vr.logLevel<=r.ERROR){var i=t.map(Br);Vr.error.apply(Vr,u(["Firestore ("+Pr+"): "+e],i))}}function Br(e){if("string"==typeof e)return e;var t=zr.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function Ur(e){var t="FIRESTORE ("+Pr+") INTERNAL ASSERTION FAILED: "+e;throw qr(t),new Error(t)}function jr(e,t){e||Ur(t)}(Ar=Dr=Dr||{})[Ar.DEBUG=0]="DEBUG",Ar[Ar.ERROR=1]="ERROR",Ar[Ar.SILENT=2]="SILENT";var zr=(Wr.setPlatform=function(e){Wr.platform&&Ur("Platform already defined"),Wr.platform=e},Wr.getPlatform=function(){return Wr.platform||Ur("Platform not set"),Wr.platform},Wr);function Wr(){}function Kr(){return zr.getPlatform().emptyByteString}var Gr,Qr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Hr=(n(Yr,Gr=Error),Yr);function Yr(e,t){var n=Gr.call(this,t)||this;return n.code=e,n.message=t,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Xr(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new Hr(Qr.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function Jr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Zr(e,t){return void 0!==e?e:t}function ei(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function ti(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ni(e){for(var t in jr(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ri(e,t){if(0!==t.length)throw new Hr(Qr.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+wi(t.length,"argument")+".")}function ii(e,t,n){if(t.length!==n)throw new Hr(Qr.INVALID_ARGUMENT,"Function "+e+"() requires "+wi(n,"argument")+", but was called with "+wi(t.length,"argument")+".")}function oi(e,t,n){if(t.length<n)throw new Hr(Qr.INVALID_ARGUMENT,"Function "+e+"() requires at least "+wi(n,"argument")+", but was called with "+wi(t.length,"argument")+".")}function ai(e,t,n,r){if(t.length<n||t.length>r)throw new Hr(Qr.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+wi(t.length,"argument")+".")}function si(e,t,n,r){fi(e,t,bi(n)+" argument",r)}function ui(e,t,n,r){void 0!==r&&si(e,t,n,r)}function ci(e,t,n,r){fi(e,t,n+" option",r)}function li(e,t,n,r){void 0!==r&&ci(e,t,n,r)}function hi(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(pi(u))}var c=pi(r);throw new Hr(Qr.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function fi(e,t,n,r){if(!("object"===t?di(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=pi(r);throw new Hr(Qr.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function di(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function pi(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Ur("Unknown wrong type: "+typeof e);if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}function mi(e,t,n){if(void 0===n)throw new Hr(Qr.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+bi(t)+" argument, but it was undefined.")}function gi(e,t,n){ti(t,(function(t,r){if(n.indexOf(t)<0)throw new Hr(Qr.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function yi(e,t,n,r){var i=pi(r);return new Hr(Qr.INVALID_ARGUMENT,"Function "+e+"() requires its "+bi(n)+" argument to be a "+t+", but it was: "+i)}function vi(e,t,n){if(n<=0)throw new Hr(Qr.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+bi(t)+" argument to be a positive number, but it was: "+n+".")}function bi(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function wi(e,t){return e+" "+t+(1===e?"":"s")}var Ei=(Ti.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return jr(20===t.length,"Invalid auto ID: "+t),t},Ti);function Ti(){}function Si(e,t){return e<t?-1:t<e?1:0}function Ii(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function Ci(e){return e+"\0"}function ki(){if("undefined"==typeof Uint8Array)throw new Hr(Qr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Di(){if(!zr.getPlatform().base64Available)throw new Hr(Qr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ai=(Ni.fromBase64String=function(e){ii("Blob.fromBase64String",arguments,1),si("Blob.fromBase64String","string",1,e),Di();try{return new Ni(zr.getPlatform().atob(e))}catch(e){throw new Hr(Qr.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},Ni.fromUint8Array=function(e){if(ii("Blob.fromUint8Array",arguments,1),ki(),!(e instanceof Uint8Array))throw yi("Blob.fromUint8Array","Uint8Array",1,e);return new Ni(Array.prototype.map.call(e,(function(e){return String.fromCharCode(e)})).join(""))},Ni.prototype.toBase64=function(){return ii("Blob.toBase64",arguments,0),Di(),zr.getPlatform().btoa(this._binaryString)},Ni.prototype.toUint8Array=function(){ii("Blob.toUint8Array",arguments,0),ki();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},Ni.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Ni.prototype.isEqual=function(e){return this._binaryString===e._binaryString},Ni.prototype._approximateByteSize=function(){return 2*this._binaryString.length},Ni.prototype._compareTo=function(e){return Si(this._binaryString,e._binaryString)},Ni);function Ni(e){Di(),this._binaryString=e}var xi=Xr(Ai,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),_i=function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},Ri="(default)",Mi=(Object.defineProperty(Oi.prototype,"isDefaultDatabase",{get:function(){return this.database===Ri},enumerable:!0,configurable:!0}),Oi.prototype.isEqual=function(e){return e instanceof Oi&&e.projectId===this.projectId&&e.database===this.database},Oi.prototype.compareTo=function(e){return Si(this.projectId,e.projectId)||Si(this.database,e.database)},Oi);function Oi(e,t){this.projectId=e,this.database=t||Ri}var Pi=(Vi.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},Vi.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},Vi.INVALID=-1,Vi);function Vi(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}var Li="__name__",$i=(Object.defineProperty(Fi.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),Fi.prototype.isEqual=function(e){return 0===Fi.comparator(this,e)},Fi.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof Fi?e.forEach((function(e){t.push(e)})):t.push(e),this.construct(t)},Fi.prototype.limit=function(){return this.offset+this.length},Fi.prototype.popFirst=function(e){return e=void 0===e?1:e,jr(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},Fi.prototype.popLast=function(){return jr(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},Fi.prototype.firstSegment=function(){return jr(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},Fi.prototype.lastSegment=function(){return this.get(this.length-1)},Fi.prototype.get=function(e){return jr(e<this.length,"Index out of range"),this.segments[this.offset+e]},Fi.prototype.isEmpty=function(){return 0===this.length},Fi.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},Fi.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},Fi.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},Fi.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},Fi.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(o<i)return 1}return e.length<t.length?-1:e.length>t.length?1:0},Fi);function Fi(e,t,n){void 0===t?t=0:t>e.length&&Ur("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&Ur("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}var qi,Bi=(n(Ui,qi=$i),Ui.prototype.construct=function(e,t,n){return new Ui(e,t,n)},Ui.prototype.canonicalString=function(){return this.toArray().join("/")},Ui.prototype.toString=function(){return this.canonicalString()},Ui.fromString=function(e){if(0<=e.indexOf("//"))throw new Hr(Qr.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new Ui(e.split("/").filter((function(e){return 0<e.length})))},Ui.EMPTY_PATH=new Ui([]),Ui);function Ui(){return null!==qi&&qi.apply(this,arguments)||this}var ji,zi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wi=(n(Ki,ji=$i),Ki.prototype.construct=function(e,t,n){return new Ki(e,t,n)},Ki.isValidIdentifier=function(e){return zi.test(e)},Ki.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),Ki.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},Ki.prototype.toString=function(){return this.canonicalString()},Ki.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===Li},Ki.keyField=function(){return new Ki([Li])},Ki.fromServerFormat=function(e){for(var t=[],n="",r=0,i=function(){if(0===n.length)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");t.push(n),n=""},o=!1;r<e.length;){var a=e[r];if("\\"===a){if(r+1===e.length)throw new Hr(Qr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Hr(Qr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new Hr(Qr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ki(t)},Ki.EMPTY_PATH=new Ki([]),Ki);function Ki(){return null!==ji&&ji.apply(this,arguments)||this}var Gi=(Qi.prototype.hasCollectionId=function(e){return 2<=this.path.length&&this.path.get(this.path.length-2)===e},Qi.prototype.isEqual=function(e){return null!==e&&0===Bi.comparator(this.path,e.path)},Qi.prototype.toString=function(){return this.path.toString()},Qi.comparator=function(e,t){return Bi.comparator(e.path,t.path)},Qi.isDocumentKey=function(e){return e.length%2==0},Qi.fromSegments=function(e){return new Qi(new Bi(e.slice()))},Qi.fromPathString=function(e){return new Qi(Bi.fromString(e))},Qi.EMPTY=new Qi(new Bi([])),Qi);function Qi(e){this.path=e,jr(Qi.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}var Hi,Yi,Xi=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};(Yi=Hi=Hi||{}).All="all",Yi.ListenStreamIdle="listen_stream_idle",Yi.ListenStreamConnectionBackoff="listen_stream_connection_backoff",Yi.WriteStreamIdle="write_stream_idle",Yi.WriteStreamConnectionBackoff="write_stream_connection_backoff",Yi.OnlineStateTimeout="online_state_timeout",Yi.ClientMetadataRefresh="client_metadata_refresh",Yi.LruGarbageCollection="lru_garbage_collection",Yi.RetryTransaction="retry_transaction";var Ji=(Zi.createAndSchedule=function(e,t,n,r,i){var o=new Zi(e,t,Date.now()+n,r,i);return o.start(n),o},Zi.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},Zi.prototype.skipDelay=function(){return this.handleDelayElapsed()},Zi.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Hr(Qr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},Zi.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},Zi.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},Zi);function Zi(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}var eo=(Object.defineProperty(to.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),to.prototype.enqueueAndForget=function(e){this.enqueue(e)},to.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},to.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},to.prototype.enqueueAndInitiateShutdown=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},to.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},to.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw qr("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n},to.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),jr(0<=t,"Attempted to schedule an operation with a negative delay of "+t),-1<this.timerIdsToSkip.indexOf(e)&&(t=0);var i=Ji.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},to.prototype.verifyNotFailed=function(){this.failure&&Ur("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},to.prototype.verifyOperationInProgress=function(){jr(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},to.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},to.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},to.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){jr(e===Hi.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==Hi.All&&i.timerId===e)break}return t.drain()}))},to.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},to.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);jr(0<=t,"Delayed operation not found."),this.delayedOperations.splice(t,1)},to);function to(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}function no(e){for(var t="",n=0;n<e.length;n++)0<t.length&&(t=io(t)),t=ro(e.get(n),t);return io(t)}function ro(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function io(e){return e+""}function oo(e){var t=e.length;if(jr(2<=t,"Invalid path "+e),2===t)return jr(""===e.charAt(0)&&""===e.charAt(1),"Non-empty path "+e+" had length 2"),Bi.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("",o);switch((a<0||n<a)&&Ur('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case"":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:Ur('Invalid encoded resource path: "'+e+'"')}o=a+2}return new Bi(r)}var ao=(so.now=function(){return so.fromMillis(Date.now())},so.fromDate=function(e){return so.fromMillis(e.getTime())},so.fromMillis=function(e){var t=Math.floor(e/1e3);return new so(t,1e6*(e-1e3*t))},so.prototype.toDate=function(){return new Date(this.toMillis())},so.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},so.prototype._compareTo=function(e){return this.seconds===e.seconds?Si(this.nanoseconds,e.nanoseconds):Si(this.seconds,e.seconds)},so.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},so.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},so);function so(e,t){if(this.seconds=e,(this.nanoseconds=t)<0)throw new Hr(Qr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(1e9<=t)throw new Hr(Qr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Hr(Qr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(253402300800<=e)throw new Hr(Qr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}var uo=(co.fromMicroseconds=function(e){var t=Math.floor(e/1e6);return new co(new ao(t,e%1e6*1e3))},co.fromTimestamp=function(e){return new co(e)},co.forDeletedDoc=function(){return co.MIN},co.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},co.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},co.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},co.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},co.prototype.toTimestamp=function(){return this.timestamp},co.MIN=new co(new ao(0,0)),co);function co(e){this.timestamp=e}var lo=(ho.prototype.insert=function(e,t){return new ho(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mo.BLACK,null,null))},ho.prototype.remove=function(e){return new ho(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mo.BLACK,null,null))},ho.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:0<n&&(t=t.right)}return null},ho.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;n=r<0?n.left:(t+=n.left.size+1,n.right)}return-1},ho.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(ho.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),ho.prototype.minKey=function(){return this.root.minKey()},ho.prototype.maxKey=function(){return this.root.maxKey()},ho.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},ho.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},ho.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},ho.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},ho.prototype.getIterator=function(){return new fo(this.root,null,this.comparator,!1)},ho.prototype.getIteratorFrom=function(e){return new fo(this.root,e,this.comparator,!1)},ho.prototype.getReverseIterator=function(){return new fo(this.root,null,this.comparator,!0)},ho.prototype.getReverseIteratorFrom=function(e){return new fo(this.root,e,this.comparator,!0)},ho);function ho(e,t){this.comparator=e,this.root=t||mo.EMPTY}var fo=(po.prototype.getNext=function(){jr(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},po.prototype.hasNext=function(){return 0<this.nodeStack.length},po.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},po);function po(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}var mo=(go.prototype.copy=function(e,t,n,r,i){return new go(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},go.prototype.isEmpty=function(){return!1},go.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},go.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},go.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},go.prototype.minKey=function(){return this.min().key},go.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},go.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},go.prototype.removeMin=function(){if(this.left.isEmpty())return go.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},go.prototype.remove=function(e,t){var n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return go.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()},go.prototype.isRed=function(){return this.color},go.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},go.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},go.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},go.prototype.rotateLeft=function(){var e=this.copy(null,null,go.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},go.prototype.rotateRight=function(){var e=this.copy(null,null,go.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},go.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},go.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},go.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Ur("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw Ur("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw Ur("Black depths differ");return e+(this.isRed()?0:1)},go.EMPTY=null,go.RED=!0,go.BLACK=!1,go);function go(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:go.RED,this.left=null!=r?r:go.EMPTY,this.right=null!=i?i:go.EMPTY,this.size=this.left.size+1+this.right.size}var yo=(Object.defineProperty(vo.prototype,"key",{get:function(){throw Ur("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(vo.prototype,"value",{get:function(){throw Ur("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(vo.prototype,"color",{get:function(){throw Ur("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(vo.prototype,"left",{get:function(){throw Ur("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(vo.prototype,"right",{get:function(){throw Ur("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),vo.prototype.copy=function(e,t,n,r,i){return this},vo.prototype.insert=function(e,t,n){return new mo(e,t)},vo.prototype.remove=function(e,t){return this},vo.prototype.isEmpty=function(){return!0},vo.prototype.inorderTraversal=function(e){return!1},vo.prototype.reverseTraversal=function(e){return!1},vo.prototype.minKey=function(){return null},vo.prototype.maxKey=function(){return null},vo.prototype.isRed=function(){return!1},vo.prototype.checkMaxDepth=function(){return!0},vo.prototype.check=function(){return 0},vo);function vo(){this.size=0}mo.EMPTY=new yo;var bo=(wo.fromMapKeys=function(e){var t=new wo(e.comparator);return e.forEach((function(e){t=t.add(e)})),t},wo.prototype.has=function(e){return null!==this.data.get(e)},wo.prototype.first=function(){return this.data.minKey()},wo.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(wo.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),wo.prototype.indexOf=function(e){return this.data.indexOf(e)},wo.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},wo.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,e[1]))return;t(r.key)}},wo.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},wo.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},wo.prototype.getIterator=function(){return new Eo(this.data.getIterator())},wo.prototype.getIteratorFrom=function(e){return new Eo(this.data.getIteratorFrom(e))},wo.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},wo.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},wo.prototype.isEmpty=function(){return this.data.isEmpty()},wo.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},wo.prototype.isEqual=function(e){if(!(e instanceof wo))return!1;if(this.size!==e.size)return!1;for(var t=this.data.getIterator(),n=e.data.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},wo.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},wo.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},wo.prototype.copy=function(e){var t=new wo(this.comparator);return t.data=e,t},wo);function wo(e){this.comparator=e,this.data=new lo(this.comparator)}var Eo=(To.prototype.getNext=function(){return this.iter.getNext().key},To.prototype.hasNext=function(){return this.iter.hasNext()},To);function To(e){this.iter=e}var So=new lo(Gi.comparator);function Io(){return So}function Co(){return Io()}var ko=new lo(Gi.comparator);function Do(){return ko}var Ao=new lo(Gi.comparator);function No(){return Ao}var xo=new bo(Gi.comparator);function _o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=xo,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ro=new bo(Si);function Mo(){return Ro}var Oo=(Po.prototype.applyToRemoteDocument=function(e,t,n){t&&jr(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;jr(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},Po.prototype.applyToLocalView=function(e,t){t&&jr(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},Po.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},Po.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),_o())},Po.prototype.isEqual=function(e){return this.batchId===e.batchId&&Ii(this.mutations,e.mutations)&&Ii(this.baseMutations,e.baseMutations)},Po);function Po(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,jr(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}var Vo=(Lo.from=function(e,t,n,r){jr(e.mutations.length===n.length,"Mutations sent "+e.mutations.length+" must equal results received "+n.length);for(var i=No(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new Lo(e,t,n,r,i)},Lo);function Lo(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}var $o=(Fo.prototype.catch=function(e){return this.next(void 0,e)},Fo.prototype.next=function(e,t){var n=this;return this.callbackAttached&&Ur("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Fo((function(r,i){n.nextCallback=function(t){n.wrapSuccess(e,t).next(r,i)},n.catchCallback=function(e){n.wrapFailure(t,e).next(r,i)}}))},Fo.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},Fo.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof Fo?t:Fo.resolve(t)}catch(e){return Fo.reject(e)}},Fo.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction((function(){return e(t)})):Fo.resolve(t)},Fo.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction((function(){return e(t)})):Fo.reject(t)},Fo.resolve=function(e){return new Fo((function(t,n){t(e)}))},Fo.reject=function(e){return new Fo((function(t,n){n(e)}))},Fo.waitFor=function(e){return new Fo((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(e){return n(e)}))})),o=!0,i===r&&t()}))},Fo.or=function(e){for(var t=Fo.resolve(!1),n=function(e){t=t.next((function(t){return t?Fo.resolve(t):e()}))},r=0,i=e;r<i.length;r++)n(i[r]);return t},Fo.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},Fo);function Fo(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}var qo="SimpleDb",Bo=(Uo.openOrCreate=function(e,t,n){return jr(Uo.isAvailable(),"IndexedDB not supported in current environment."),Fr(qo,"Opening database:",e),new $o((function(r,i){var o=window.indexedDB.open(e,t);o.onsuccess=function(e){var t=e.target.result;r(new Uo(t))},o.onblocked=function(){i(new Hr(Qr.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(e){var t=e.target.error;"VersionError"===t.name?i(new Hr(Qr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i(t)},o.onupgradeneeded=function(t){Fr(qo,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var r=t.target.result;n.createOrUpgrade(r,o.transaction,t.oldVersion,cu).next((function(){Fr(qo,"Database upgrade to version "+cu+" complete")}))}})).toPromise()},Uo.delete=function(e){return Fr(qo,"Removing database:",e),Ho(window.indexedDB.deleteDatabase(e)).toPromise()},Uo.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(Uo.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=p(),t=Uo.getIOSVersion(e),n=0<t&&t<10,r=Uo.getAndroidVersion(e),i=0<r&&r<4.5;return!(0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")||0<e.indexOf("Edge/")||n||i)},Uo.isMockPersistence=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.USE_MOCK_PERSISTENCE)},Uo.getStore=function(e,t){return e.store(t)},Uo.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},Uo.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},Uo.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},Uo.prototype.runTransaction=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i,o,a,u,c;return s(this,(function(l){switch(l.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),o=0,a=function(){var e,a,c,l;return s(this,(function(s){switch(s.label){case 0:++o,e=Wo.open(u.db,r?"readonly":"readwrite",t),s.label=1;case 1:return s.trys.push([1,3,,4]),(a=n(e).catch((function(t){return e.abort(t),$o.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return s.sent(),[2,{value:a}];case 3:return c=s.sent(),l=i&&"FirebaseError"!==c.name&&o<3,Fr(qo,"Transaction failed with error: %s. Retrying: %s.",c.message,l),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},u=this,l.label=1;case 1:return[5,a()];case 2:return"object"==typeof(c=l.sent())?[2,c.value]:[3,1];case 3:return[2]}}))}))},Uo.prototype.close=function(){this.db.close()},Uo);function Uo(e){this.db=e,12.2===Uo.getIOSVersion(p())&&qr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}var jo=(Object.defineProperty(zo.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(zo.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(zo.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),zo.prototype.done=function(){this.shouldStop=!0},zo.prototype.skip=function(e){this.nextKey=e},zo.prototype.delete=function(){return Ho(this.dbCursor.delete())},zo);function zo(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}var Wo=(Ko.open=function(e,t,n){return new Ko(e.transaction(n,t))},Object.defineProperty(Ko.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),Ko.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(Fr(qo,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Ko.prototype.store=function(e){var t=this.transaction.objectStore(e);return jr(!!t,"Object store not part of transaction: "+e),new Go(t)},Ko);function Ko(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new Xi,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=Xo(e.target.error);t.completionDeferred.reject(n)}}var Go=(Qo.prototype.put=function(e,t){return Ho(void 0!==t?(Fr(qo,"PUT",this.store.name,e,t),this.store.put(t,e)):(Fr(qo,"PUT",this.store.name,"<auto-key>",e),this.store.put(e)))},Qo.prototype.add=function(e){return Fr(qo,"ADD",this.store.name,e,e),Ho(this.store.add(e))},Qo.prototype.get=function(e){var t=this;return Ho(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Fr(qo,"GET",t.store.name,e,n),n}))},Qo.prototype.delete=function(e){return Fr(qo,"DELETE",this.store.name,e),Ho(this.store.delete(e))},Qo.prototype.count=function(){return Fr(qo,"COUNT",this.store.name),Ho(this.store.count())},Qo.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},Qo.prototype.deleteAll=function(e,t){Fr(qo,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},Qo.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},Qo.prototype.iterateSerial=function(e){var t=this.cursor({});return new $o((function(n,r){t.onerror=function(e){var t=Xo(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},Qo.prototype.iterateCursor=function(e,t){var n=[];return new $o((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new jo(i),a=t(i.primaryKey,i.value,o);if(a instanceof $o){var s=a.catch((function(e){return o.done(),$o.reject(e)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return $o.waitFor(n)}))},Qo.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(jr(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},Qo.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},Qo);function Qo(e){this.store=e}function Ho(e){return new $o((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Xo(e.target.error);n(t)}}))}var Yo=!1;function Xo(e){var t=Bo.getIOSVersion(p());if(12.2<=t&&t<13){var n="An internal error was encountered in the Indexed Database server";if(0<=e.message.indexOf(n)){var r=new Hr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Yo||(Yo=!0,setTimeout((function(){throw r}),0)),r}}return e}var Jo,Zo,ea=(ta.forUser=function(e,t,n,r){return jr(""!==e.uid,"UserID must not be an empty string."),new ta(e.isAuthenticated()?e.uid:"",t,n,r)},ta.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oa(e).iterate({index:yu.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},ta.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=ia(n),sa(e).put(t)}))},ta.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return e.lastStreamToken}))},ta.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=ia(t),sa(e).put(n)}))},ta.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=aa(e),a=oa(e);return a.add({}).next((function(s){jr("number"==typeof s,"Auto-generated key is not a number");for(var u=new Oo(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],h=new bo((function(e,t){return Si(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],m=bu.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,bu.PLACEHOLDER))}return h.forEach((function(t){l.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=u.keys()})),$o.waitFor(l).next((function(){return u}))}))},ta.prototype.lookupMutationBatch=function(e,t){var n=this;return oa(e).get(t).next((function(e){return e?(jr(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},ta.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?$o.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r}return null}))},ta.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return oa(e).iterate({index:yu.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(jr(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()})).next((function(){return o}))},ta.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return oa(e).iterate({index:yu.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},ta.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return oa(e).loadAll(yu.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},ta.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=bu.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return aa(e).iterate({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=oo(u);if(s===n.userId&&t.path.isEqual(l))return oa(e).get(c).next((function(e){if(!e)throw Ur("Dangling document-mutation reference found: "+r+" which points to "+c);jr(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(e))}));a.done()})).next((function(){return o}))},ta.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new bo(Si),i=[];return t.forEach((function(t){var o=bu.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=aa(e).iterate({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=oo(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),$o.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},ta.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;jr(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),jr(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=bu.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new bo(Si);return aa(e).iterate({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=oo(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.lookupMutationBatches(e,s)}))},ta.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(oa(e).get(t).next((function(e){if(null===e)throw Ur("Dangling document-mutation reference found, which points to "+t);jr(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),$o.waitFor(i).next((function(){return r}))},ta.prototype.removeMutationBatch=function(e,t){var n=this;return ra(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),$o.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},ta.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},ta.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return $o.resolve();var r=IDBKeyRange.lowerBound(bu.prefixForUser(t.userId)),i=[];return aa(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=oo(e[1]);i.push(o)}else r.done()})).next((function(){jr(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},ta.prototype.containsKey=function(e,t){return na(e,this.userId,t)},ta.prototype.getMutationQueueMetadata=function(e){var t=this;return sa(e).get(this.userId).next((function(e){return e||new mu(t.userId,-1,"")}))},ta);function ta(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}function na(e,t,n){var r=bu.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return aa(e).iterate({range:o,keysOnly:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function ra(e,t,n){var r=e.store(yu.store),i=e.store(bu.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){jr(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=bu.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return $o.waitFor(o).next((function(){return c}))}function ia(e){return e instanceof Uint8Array?(jr(Bo.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function oa(e){return Tc.getStore(e,yu.store)}function aa(e){return Tc.getStore(e,bu.store)}function sa(e){return Tc.getStore(e,mu.store)}(Zo=Jo=Jo||{})[Zo.QueryCache=0]="QueryCache",Zo[Zo.SyncEngine=1]="SyncEngine";var ua=(ca.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},ca.prototype.after=function(e){return this.seek(e+2),this.next()},ca.prototype.seek=function(e){jr((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},ca.forTargetCache=function(){return new ca(Jo.QueryCache,2)},ca.forSyncEngine=function(){return new ca(Jo.SyncEngine)},ca);function ca(e,t){jr((1&(this.generatorId=e))===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}var la=(ha.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},ha.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return uo.fromTimestamp(new ao(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},ha.prototype.getHighestSequenceNumber=function(e){return pa(e.simpleDbTransaction)},ha.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},ha.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)}))}))},ha.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},ha.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return fa(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return jr(0<t.targetCount,"Removing from an empty target cache"),t.targetCount-=1,n.saveMetadata(e,t)}))},ha.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return fa(e).iterate((function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return $o.waitFor(o)})).next((function(){return i}))},ha.prototype.forEachTarget=function(e,t){var n=this;return fa(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},ha.prototype.retrieveMetadata=function(e){return da(e.simpleDbTransaction)},ha.prototype.saveMetadata=function(e,t){return function(e){return Tc.getStore(e,_u.store)}(e).put(_u.key,t)},ha.prototype.saveTargetData=function(e,t){return fa(e).put(this.serializer.toDbTarget(t))},ha.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},ha.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},ha.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return fa(e).iterate({range:i,index:Du.queryTargetsIndexName},(function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},ha.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=ma(e);return t.forEach((function(t){var a=no(t.path);i.push(o.put(new Nu(n,a))),i.push(r.referenceDelegate.addReference(e,t))})),$o.waitFor(i)},ha.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=ma(e);return $o.forEach(t,(function(t){var o=no(t.path);return $o.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},ha.prototype.removeMatchingKeysForTargetId=function(e,t){var n=ma(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},ha.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ma(e),i=_o();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=oo(e[1]),o=new Gi(r);i=i.add(o)})).next((function(){return i}))},ha.prototype.containsKey=function(e,t){var n=no(t.path),r=IDBKeyRange.bound([n],[Ci(n)],!1,!0),i=0;return ma(e).iterate({index:Nu.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return 0<i}))},ha.prototype.getTargetDataForTarget=function(e,t){var n=this;return fa(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},ha);function ha(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=ua.forTargetCache()}function fa(e){return Tc.getStore(e,Du.store)}function da(e){return Bo.getStore(e,_u.store).get(_u.key).next((function(e){return jr(null!==e,"Missing metadata row."),e}))}function pa(e){return da(e).next((function(e){return e.highestListenSequenceNumber}))}function ma(e){return Tc.getStore(e,Nu.store)}var ga=(ya.fromSet=function(e){return new ya(e)},ya.fromArray=function(e){var t=new bo(Wi.comparator);return e.forEach((function(e){return t=t.add(e)})),new ya(t)},ya.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},ya.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},ya);function ya(e){this.fields=e}var va=(ba.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},ba);function ba(e,t){this.field=e,this.transform=t}var wa,Ea,Ta=function(e,t){this.version=e,this.transformResults=t};(Ea=wa=wa||{})[Ea.Set=0]="Set",Ea[Ea.Patch=1]="Patch",Ea[Ea.Transform=2]="Transform",Ea[Ea.Delete=3]="Delete",Ea[Ea.Verify=4]="Verify";var Sa=(Ia.exists=function(e){return new Ia(void 0,e)},Ia.updateTime=function(e){return new Ia(e)},Object.defineProperty(Ia.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),Ia.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Fs&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Fs:(jr(this.isNone,"Precondition should be empty"),!0)},Ia.prototype.isEqual=function(e){return function(e,t){return null!=e?!(!t||!e.isEqual(t)):e===t}(this.updateTime,e.updateTime)&&this.exists===e.exists},Ia.NONE=new Ia,Ia);function Ia(e,t){this.updateTime=e,this.exists=t,jr(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}var Ca=(ka.prototype.verifyKeyMatches=function(e){null!=e&&jr(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},ka.getPostMutationVersion=function(e){return e instanceof Fs?e.version:uo.MIN},ka);function ka(){}var Da,Aa=(n(Na,Da=Ca),Na.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),jr(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Fs(this.key,n,{hasCommittedMutations:!0},this.value)},Na.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Ca.getPostMutationVersion(e);return new Fs(this.key,r,{hasLocalMutations:!0},this.value)},Na.prototype.extractBaseValue=function(e){return null},Na.prototype.isEqual=function(e){return e instanceof Na&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},Na);function Na(e,t,n){var r=Da.call(this)||this;return r.key=e,r.value=t,r.precondition=n,r.type=wa.Set,r}var xa,_a=(n(Ra,xa=Ca),Ra.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),jr(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Ws(this.key,t.version);var n=this.patchDocument(e);return new Fs(this.key,t.version,{hasCommittedMutations:!0},n)},Ra.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Ca.getPostMutationVersion(e),i=this.patchDocument(e);return new Fs(this.key,r,{hasLocalMutations:!0},i)},Ra.prototype.extractBaseValue=function(e){return null},Ra.prototype.isEqual=function(e){return e instanceof Ra&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},Ra.prototype.patchDocument=function(e){var t;return t=e instanceof Fs?e.data():_s.EMPTY,this.patchObject(t)},Ra.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}})),e},Ra);function Ra(e,t,n,r){var i=xa.call(this)||this;return i.key=e,i.data=t,i.fieldMask=n,i.precondition=r,i.type=wa.Patch,i}var Ma,Oa=(n(Pa,Ma=Ca),Pa.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),jr(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Ws(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new Fs(this.key,i,{hasCommittedMutations:!0},o)},Pa.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new Fs(this.key,r.version,{hasLocalMutations:!0},o)},Pa.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Fs?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?_s.EMPTY.set(i.field,a):t.set(i.field,a))}return t},Pa.prototype.isEqual=function(e){return e instanceof Pa&&this.key.isEqual(e.key)&&Ii(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},Pa.prototype.requireDocument=function(e){return jr(e instanceof Fs,"Unknown MaybeDocument type "+e),jr(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},Pa.prototype.serverTransformResults=function(e,t){var n=[];jr(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof Fs&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},Pa.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof Fs&&(u=t.field(a.field)),null===u&&n instanceof Fs&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},Pa.prototype.transformObject=function(e,t){jr(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},Pa);function Pa(e,t){var n=Ma.call(this)||this;return n.key=e,n.fieldTransforms=t,n.type=wa.Transform,n.precondition=Sa.exists(!0),n}var Va,La=(n($a,Va=Ca),$a.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),jr(null==t.transformResults,"Transform results received by DeleteMutation."),new Us(this.key,t.version,{hasCommittedMutations:!0})},$a.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&jr(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Us(this.key,uo.forDeletedDoc())):e},$a.prototype.extractBaseValue=function(e){return null},$a.prototype.isEqual=function(e){return e instanceof $a&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},$a);function $a(e,t){var n=Va.call(this)||this;return n.key=e,n.precondition=t,n.type=wa.Delete,n}var Fa,qa,Ba,Ua,ja,za=(n(Wa,Fa=Ca),Wa.prototype.applyToRemoteDocument=function(e,t){Ur("VerifyMutation should only be used in Transactions.")},Wa.prototype.applyToLocalView=function(e,t,n){Ur("VerifyMutation should only be used in Transactions.")},Wa.prototype.extractBaseValue=function(e){Ur("VerifyMutation should only be used in Transactions.")},Wa.prototype.isEqual=function(e){return e instanceof Wa&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},Wa);function Wa(e,t){var n=Fa.call(this)||this;return n.key=e,n.precondition=t,n.type=wa.Verify,n}(Ba=qa=qa||{})[Ba.NullValue=0]="NullValue",Ba[Ba.BooleanValue=1]="BooleanValue",Ba[Ba.NumberValue=2]="NumberValue",Ba[Ba.TimestampValue=3]="TimestampValue",Ba[Ba.StringValue=4]="StringValue",Ba[Ba.BlobValue=5]="BlobValue",Ba[Ba.RefValue=6]="RefValue",Ba[Ba.GeoPointValue=7]="GeoPointValue",Ba[Ba.ArrayValue=8]="ArrayValue",Ba[Ba.ObjectValue=9]="ObjectValue",(ja=Ua=Ua||{})[ja.Default=0]="Default",ja[ja.Estimate=1]="Estimate",ja[ja.Previous=2]="Previous";var Ka=(Ga.fromSnapshotOptions=function(e,t){switch(e.serverTimestamps){case"estimate":return new Ga(Ua.Estimate,t);case"previous":return new Ga(Ua.Previous,t);case"none":case void 0:return new Ga(Ua.Default,t);default:return Ur("fromSnapshotOptions() called with invalid options.")}},Ga);function Ga(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}var Qa=(Ha.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},Ha.prototype.defaultCompareTo=function(e){return jr(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),Si(this.typeOrder,e.typeOrder)},Ha);function Ha(){}var Ya,Xa=(n(Ja,Ya=Qa),Ja.prototype.value=function(e){return null},Ja.prototype.isEqual=function(e){return e instanceof Ja},Ja.prototype.compareTo=function(e){return e instanceof Ja?0:this.defaultCompareTo(e)},Ja.prototype.approximateByteSize=function(){return 4},Ja.INSTANCE=new Ja,Ja);function Ja(){var e=Ya.call(this)||this;return e.typeOrder=qa.NullValue,e.internalValue=null,e}var Za,es=(n(ts,Za=Qa),ts.prototype.value=function(e){return this.internalValue},ts.prototype.isEqual=function(e){return e instanceof ts&&this.internalValue===e.internalValue},ts.prototype.compareTo=function(e){return e instanceof ts?Si(this,e):this.defaultCompareTo(e)},ts.prototype.approximateByteSize=function(){return 4},ts.of=function(e){return e?ts.TRUE:ts.FALSE},ts.TRUE=new ts(!0),ts.FALSE=new ts(!1),ts);function ts(e){var t=Za.call(this)||this;return t.internalValue=e,t.typeOrder=qa.BooleanValue,t}var ns,rs=(n(is,ns=Qa),is.prototype.value=function(e){return this.internalValue},is.prototype.compareTo=function(e){return e instanceof is?function(e,t){return e<t?-1:t<e?1:e===t?0:isNaN(e)?isNaN(t)?0:-1:1}(this.internalValue,e.internalValue):this.defaultCompareTo(e)},is.prototype.approximateByteSize=function(){return 8},is);function is(e){var t=ns.call(this)||this;return t.internalValue=e,t.typeOrder=qa.NumberValue,t}function os(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var as,ss=(n(us,as=rs),us.prototype.isEqual=function(e){return e instanceof us&&os(this.internalValue,e.internalValue)},us);function us(){return null!==as&&as.apply(this,arguments)||this}var cs,ls=(n(hs,cs=rs),hs.prototype.isEqual=function(e){return e instanceof hs&&os(this.internalValue,e.internalValue)},hs.NAN=new hs(NaN),hs.POSITIVE_INFINITY=new hs(1/0),hs.NEGATIVE_INFINITY=new hs(-1/0),hs);function hs(){return null!==cs&&cs.apply(this,arguments)||this}var fs,ds=(n(ps,fs=Qa),ps.prototype.value=function(e){return this.internalValue},ps.prototype.isEqual=function(e){return e instanceof ps&&this.internalValue===e.internalValue},ps.prototype.compareTo=function(e){return e instanceof ps?Si(this.internalValue,e.internalValue):this.defaultCompareTo(e)},ps.prototype.approximateByteSize=function(){return 2*this.internalValue.length},ps);function ps(e){var t=fs.call(this)||this;return t.internalValue=e,t.typeOrder=qa.StringValue,t}var ms,gs=(n(ys,ms=Qa),ys.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},ys.prototype.isEqual=function(e){return e instanceof ys&&this.internalValue.isEqual(e.internalValue)},ys.prototype.compareTo=function(e){return e instanceof ys?this.internalValue._compareTo(e.internalValue):e instanceof bs?-1:this.defaultCompareTo(e)},ys.prototype.approximateByteSize=function(){return 16},ys);function ys(e){var t=ms.call(this)||this;return t.internalValue=e,t.typeOrder=qa.TimestampValue,t}var vs,bs=(n(ws,vs=Qa),ws.prototype.value=function(e){return e&&e.serverTimestampBehavior===Ua.Estimate?new gs(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===Ua.Previous&&this.previousValue?this.previousValue.value(e):null},ws.prototype.isEqual=function(e){return e instanceof ws&&this.localWriteTime.isEqual(e.localWriteTime)},ws.prototype.compareTo=function(e){return e instanceof ws?this.localWriteTime._compareTo(e.localWriteTime):e instanceof gs?1:this.defaultCompareTo(e)},ws.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},ws.prototype.approximateByteSize=function(){return 16+(this.previousValue?this.previousValue.approximateByteSize():0)},ws);function ws(e,t){var n=vs.call(this)||this;return n.localWriteTime=e,n.previousValue=t,n.typeOrder=qa.TimestampValue,n}var Es,Ts=(n(Ss,Es=Qa),Ss.prototype.value=function(e){return this.internalValue},Ss.prototype.isEqual=function(e){return e instanceof Ss&&this.internalValue.isEqual(e.internalValue)},Ss.prototype.compareTo=function(e){return e instanceof Ss?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},Ss.prototype.approximateByteSize=function(){return this.internalValue._approximateByteSize()},Ss);function Ss(e){var t=Es.call(this)||this;return t.internalValue=e,t.typeOrder=qa.BlobValue,t}var Is,Cs=(n(ks,Is=Qa),ks.prototype.value=function(e){return this.key},ks.prototype.isEqual=function(e){return e instanceof ks&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},ks.prototype.compareTo=function(e){if(e instanceof ks){var t=this.databaseId.compareTo(e.databaseId);return 0!==t?t:Gi.comparator(this.key,e.key)}return this.defaultCompareTo(e)},ks.prototype.approximateByteSize=function(){return this.databaseId.projectId.length+this.databaseId.database.length+this.key.toString().length},ks);function ks(e,t){var n=Is.call(this)||this;return n.databaseId=e,n.key=t,n.typeOrder=qa.RefValue,n}var Ds,As=(n(Ns,Ds=Qa),Ns.prototype.value=function(e){return this.internalValue},Ns.prototype.isEqual=function(e){return e instanceof Ns&&this.internalValue.isEqual(e.internalValue)},Ns.prototype.compareTo=function(e){return e instanceof Ns?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},Ns.prototype.approximateByteSize=function(){return 16},Ns);function Ns(e){var t=Ds.call(this)||this;return t.internalValue=e,t.typeOrder=qa.GeoPointValue,t}var xs,_s=(n(Rs,xs=Qa),Rs.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},Rs.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},Rs.prototype.isEqual=function(e){if(e instanceof Rs){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!t.hasNext()&&!n.hasNext()}return!1},Rs.prototype.compareTo=function(e){if(e instanceof Rs){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext(),o=Si(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return Si(t.hasNext(),n.hasNext())}return this.defaultCompareTo(e)},Rs.prototype.set=function(e,t){if(jr(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),t);var n=this.child(e.firstSegment());n instanceof Rs||(n=Rs.EMPTY);var r=n.set(e.popFirst(),t);return this.setChild(e.firstSegment(),r)},Rs.prototype.delete=function(e){if(jr(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new Rs(this.internalValue.remove(e.firstSegment()));var t=this.child(e.firstSegment());if(t instanceof Rs){var n=t.delete(e.popFirst());return new Rs(this.internalValue.insert(e.firstSegment(),n))}return this},Rs.prototype.contains=function(e){return null!==this.field(e)},Rs.prototype.field=function(e){jr(!e.isEmpty(),"Can't get field of empty path");var t=this;return e.forEach((function(e){t=t instanceof Rs?t.internalValue.get(e):null})),t},Rs.prototype.fieldMask=function(){var e=new bo(Wi.comparator);return this.internalValue.forEach((function(t,n){var r=new Wi([t]);if(n instanceof Rs){var i=n.fieldMask().fields;i.isEmpty()?e=e.add(r):i.forEach((function(t){e=e.add(r.child(t))}))}else e=e.add(r)})),ga.fromSet(e)},Rs.prototype.approximateByteSize=function(){var e=0;return this.internalValue.inorderTraversal((function(t,n){e+=t.length+n.approximateByteSize()})),e},Rs.prototype.toString=function(){return this.internalValue.toString()},Rs.prototype.child=function(e){return this.internalValue.get(e)||void 0},Rs.prototype.setChild=function(e,t){return new Rs(this.internalValue.insert(e,t))},Rs.EMPTY=new Rs(new lo(Si)),Rs);function Rs(e){var t=xs.call(this)||this;return t.internalValue=e,t.typeOrder=qa.ObjectValue,t}var Ms,Os=(n(Ps,Ms=Qa),Ps.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},Ps.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++)if(n[t].isEqual(e))return!0;return!1},Ps.prototype.forEach=function(e){this.internalValue.forEach(e)},Ps.prototype.isEqual=function(e){if(e instanceof Ps){if(this.internalValue.length!==e.internalValue.length)return!1;for(var t=0;t<this.internalValue.length;t++)if(!this.internalValue[t].isEqual(e.internalValue[t]))return!1;return!0}return!1},Ps.prototype.compareTo=function(e){if(e instanceof Ps){for(var t=Math.min(this.internalValue.length,e.internalValue.length),n=0;n<t;n++){var r=this.internalValue[n].compareTo(e.internalValue[n]);if(r)return r}return Si(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},Ps.prototype.approximateByteSize=function(){return this.internalValue.reduce((function(e,t){return e+t.approximateByteSize()}),0)},Ps.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},Ps);function Ps(e){var t=Ms.call(this)||this;return t.internalValue=e,t.typeOrder=qa.ArrayValue,t}var Vs=(Ls.compareByKey=function(e,t){return Gi.comparator(e.key,t.key)},Ls);function Ls(e,t){this.key=e,this.version=t}var $s,Fs=(n(qs,$s=Vs),qs.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},qs.prototype.data=function(){var e=this;if(!this.objectValue){var t=_s.EMPTY;ti(this.proto.fields||{},(function(n,r){t=t.set(new Wi([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},qs.prototype.value=function(){return this.data().value()},qs.prototype.isEqual=function(e){return e instanceof qs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},qs.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(qs.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),qs.prototype.getProtoField=function(e){jr(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},qs.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):Ur("Trying to compare documents on fields that don't exist")},qs);function qs(e,t,n,r,i,o){var a=$s.call(this,e,t)||this;return a.objectValue=r,a.proto=i,a.converter=o,jr(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.hasLocalMutations=!!n.hasLocalMutations,a.hasCommittedMutations=!!n.hasCommittedMutations,a}var Bs,Us=(n(js,Bs=Vs),js.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(js.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),js.prototype.isEqual=function(e){return e instanceof js&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},js);function js(e,t,n){var r=Bs.call(this,e,t)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}var zs,Ws=(n(Ks,zs=Vs),Ks.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Ks.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Ks.prototype.isEqual=function(e){return e instanceof Ks&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Ks);function Ks(){return null!==zs&&zs.apply(this,arguments)||this}var Gs=(Qs.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},Qs.prototype.has=function(e){return void 0!==this.get(e)},Qs.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},Qs.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},Qs.prototype.forEach=function(e){ti(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},Qs.prototype.isEmpty=function(){return ni(this.inner)},Qs);function Qs(e){this.mapKeyFn=e,this.inner={}}var Hs=(Object.defineProperty(Ys.prototype,"readTime",{get:function(){return jr(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){jr(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),Ys.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},Ys.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},Ys.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?$o.resolve(n):this.getFromCache(e,t)},Ys.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},Ys.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},Ys.prototype.assertNotApplied=function(){jr(!this.changesApplied,"Changes have already been applied.")},Ys);function Ys(){this.changes=new Gs((function(e){return e.toString()})),this.changesApplied=!1}var Xs,Js=(Zs.prototype.addEntry=function(e,t,n){return nu(e).put(ru(t),n)},Zs.prototype.removeEntry=function(e,t){var n=nu(e),r=ru(t);return n.delete(r)},Zs.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},Zs.prototype.getEntry=function(e,t){var n=this;return nu(e).get(ru(t)).next((function(e){return n.maybeDecodeDocument(e)}))},Zs.prototype.getSizedEntry=function(e,t){var n=this;return nu(e).get(ru(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:iu(e)}:null}))},Zs.prototype.getEntries=function(e,t){var n=this,r=Co();return this.forEachDbEntry(e,t,(function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)})).next((function(){return r}))},Zs.prototype.getSizedEntries=function(e,t){var n=this,r=Co(),i=new lo(Gi.comparator);return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);i=o?(r=r.insert(e,o),i.insert(e,iu(t))):(r=r.insert(e,null),i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},Zs.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return $o.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return nu(e).iterate({range:r},(function(e,t,r){for(var a=Gi.fromSegments(e);o&&Gi.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},Zs.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;jr(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Do(),o=t.path.length+1,a={};if(n.isEqual(uo.MIN)){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Su.collectionReadTimeIndex}return nu(e).iterate(a,(function(e,n,a){if(e.length===o){var s=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(s.key.path)?s instanceof Fs&&t.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},Zs.prototype.getNewDocumentChanges=function(e,t){var n=this,r=Io(),i=this.serializer.toDbTimestampKey(t),o=nu(e),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:Su.readTimeIndex,range:a},(function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},Zs.prototype.getLastReadTime=function(e){var t=this,n=nu(e),r=uo.MIN;return n.iterate({index:Su.readTimeIndex,reverse:!0},(function(e,n,i){n.readTime&&(r=t.serializer.fromDbTimestampKey(n.readTime)),i.done()})).next((function(){return r}))},Zs.prototype.newChangeBuffer=function(e){return new Zs.RemoteDocumentChangeBuffer(this,!!e&&e.trackRemovals)},Zs.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},Zs.prototype.getMetadata=function(e){return tu(e).get(Cu.key).next((function(e){return jr(!!e,"Missing document cache metadata"),e}))},Zs.prototype.setMetadata=function(e,t){return tu(e).put(Cu.key,t)},Zs.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof Us&&t.version.isEqual(uo.forDeletedDoc())?null:t}return null},Zs.RemoteDocumentChangeBuffer=(n(eu,Xs=Hs),eu.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new bo((function(e,t){return Si(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.documentSizes.get(o);if(jr(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){jr(!t.readTime.isEqual(uo.MIN),"Cannot add a document with a read time of zero");var u=t.documentCache.serializer.toDbRemoteDocument(a,t.readTime);i=i.add(o.path.popLast());var c=iu(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=t.documentCache.serializer.toDbRemoteDocument(new Us(o,uo.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,l))}else n.push(t.documentCache.removeEntry(e,o))})),i.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),$o.waitFor(n)},eu.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},eu.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},eu),Zs);function Zs(e,t){this.serializer=e,this.indexManager=t}function eu(e,t){var n=Xs.call(this)||this;return n.documentCache=e,n.trackRemovals=t,n.documentSizes=new Gs((function(e){return e.toString()})),n}function tu(e){return Tc.getStore(e,Cu.store)}function nu(e){return Tc.getStore(e,Su.store)}function ru(e){return e.path.toArray()}function iu(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ur("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var ou=(au.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),$o.resolve()},au.prototype.getCollectionParents=function(e,t){return $o.resolve(this.collectionParentIndex.getEntries(t))},au);function au(){this.collectionParentIndex=new su}var su=(uu.prototype.add=function(e){jr(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new bo(Bi.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},uu.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},uu.prototype.getEntries=function(e){return(this.index[e]||new bo(Bi.comparator)).toArray()},uu);function uu(){this.index={}}var cu=9,lu=(hu.prototype.createOrUpgrade=function(e,t,n,r){var i=this;jr(n<r&&0<=n&&r<=cu,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Wo(t);n<1&&1<=r&&(function(e){e.createObjectStore(du.store)}(e),function(e){e.createObjectStore(mu.store,{keyPath:mu.keyPath}),e.createObjectStore(yu.store,{keyPath:yu.keyPath,autoIncrement:!0}).createIndex(yu.userMutationsIndex,yu.userMutationsKeyPath,{unique:!0}),e.createObjectStore(bu.store)}(e),Pu(e),function(e){e.createObjectStore(Su.store)}(e));var a=$o.resolve();return n<3&&3<=r&&(0!==n&&(function(e){e.deleteObjectStore(Nu.store),e.deleteObjectStore(Du.store),e.deleteObjectStore(_u.store)}(e),Pu(e)),a=a.next((function(){return function(e){var t=e.store(_u.store),n=new _u(0,0,uo.MIN.toTimestamp(),0);return t.put(_u.key,n)}(o)}))),n<4&&4<=r&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(yu.store).loadAll().next((function(n){e.deleteObjectStore(yu.store),e.createObjectStore(yu.store,{keyPath:yu.keyPath,autoIncrement:!0}).createIndex(yu.userMutationsIndex,yu.userMutationsKeyPath,{unique:!0});var r=t.store(yu.store),i=n.map((function(e){return r.put(e)}));return $o.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(Vu.store,{keyPath:Vu.keyPath})}(e)}))),n<5&&5<=r&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&6<=r&&(a=a.next((function(){return function(e){e.createObjectStore(Cu.store)}(e),i.addDocumentGlobal(o)}))),n<7&&7<=r&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&8<=r&&(a=a.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&9<=r&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Su.store);t.createIndex(Su.readTimeIndex,Su.readTimeIndexPath,{unique:!1}),t.createIndex(Su.collectionReadTimeIndex,Su.collectionReadTimeIndexPath,{unique:!1})}(t)}))),a},hu.prototype.addDocumentGlobal=function(e){var t=0;return e.store(Su.store).iterate((function(e,n){t+=iu(n)})).next((function(){var n=new Cu(t);return e.store(Cu.store).put(Cu.key,n)}))},hu.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(mu.store),r=e.store(yu.store);return n.loadAll().next((function(n){return $o.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(yu.userMutationsIndex,i).next((function(r){return $o.forEach(r,(function(r){jr(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return ra(e,n.userId,i).next((function(){}))}))}))}))}))},hu.prototype.ensureSequenceNumbers=function(e){var t=e.store(Nu.store),n=e.store(Su.store);return pa(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new Bi(n),a=function(e){return[0,no(e)]}(o);r.push(t.get(a).next((function(n){return n?$o.resolve():function(n){return t.put(new Nu(0,no(n),e))}(o)})))})).next((function(){return $o.waitFor(r)}))}))},hu.prototype.createCollectionParentIndex=function(e,t){function n(e){if(i.add(e)){var t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:no(n)})}}e.createObjectStore(Mu.store,{keyPath:Mu.keyPath});var r=t.store(Mu.store),i=new su;return t.store(Su.store).iterate({keysOnly:!0},(function(e,t){return n(new Bi(e).popLast())})).next((function(){return t.store(bu.store).iterate({keysOnly:!0},(function(e,t){e[0];var r=e[1];return n((e[2],oo(r)).popLast())}))}))},hu);function hu(e){this.serializer=e}var fu=function(e,t){this.seconds=e,this.nanoseconds=t},du=(pu.store="owner",pu.key="owner",pu);function pu(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}var mu=(gu.store="mutationQueues",gu.keyPath="userId",gu);function gu(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}var yu=(vu.store="mutations",vu.keyPath="batchId",vu.userMutationsIndex="userMutationsIndex",vu.userMutationsKeyPath=["userId","batchId"],vu);function vu(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}var bu=(wu.prefixForUser=function(e){return[e]},wu.prefixForPath=function(e,t){return[e,no(t)]},wu.key=function(e,t,n){return[e,no(t),n]},wu.store="documentMutations",wu.PLACEHOLDER=new wu,wu);function wu(){}var Eu=function(e,t){this.path=e,this.readTime=t},Tu=function(e,t){this.path=e,this.version=t},Su=(Iu.store="remoteDocuments",Iu.readTimeIndex="readTimeIndex",Iu.readTimeIndexPath="readTime",Iu.collectionReadTimeIndex="collectionReadTimeIndex",Iu.collectionReadTimeIndexPath=["parentPath","readTime"],Iu);function Iu(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}var Cu=(ku.store="remoteDocumentGlobal",ku.key="remoteDocumentGlobalKey",ku);function ku(e){this.byteSize=e}var Du=(Au.store="targets",Au.keyPath="targetId",Au.queryTargetsIndexName="queryTargetsIndex",Au.queryTargetsKeyPath=["canonicalId","targetId"],Au);function Au(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}var Nu=(xu.store="targetDocuments",xu.keyPath=["targetId","path"],xu.documentTargetsIndex="documentTargetsIndex",xu.documentTargetsKeyPath=["path","targetId"],xu);function xu(e,t,n){this.targetId=e,this.path=t,jr(0===e==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}var _u=(Ru.key="targetGlobalKey",Ru.store="targetGlobal",Ru);function Ru(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}var Mu=(Ou.store="collectionParents",Ou.keyPath=["collectionId","parent"],Ou);function Ou(e,t){this.collectionId=e,this.parent=t}function Pu(e){e.createObjectStore(Nu.store,{keyPath:Nu.keyPath}).createIndex(Nu.documentTargetsIndex,Nu.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Du.store,{keyPath:Du.keyPath}).createIndex(Du.queryTargetsIndexName,Du.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(_u.store)}var Vu=(Lu.store="clientMetadata",Lu.keyPath="clientId",Lu);function Lu(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}var $u,Fu,qu=u(u(u([mu.store,yu.store,bu.store,Su.store,Du.store,du.store,_u.store,Nu.store],[Vu.store]),[Cu.store]),[Mu.store]),Bu=(Uu.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(jr(t.length%2==1,"Expected a collection path."),this.collectionParentsCache.has(t))return $o.resolve();var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)}));var o={collectionId:r,parent:no(i)};return ju(e).put(o)},Uu.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ci(t),""],!1,!0);return ju(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(oo(o.parent))}return n}))},Uu);function Uu(){this.collectionParentsCache=new su}function ju(e){return Tc.getStore(e,Mu.store)}(Fu=$u=$u||{})[Fu.Listen=0]="Listen",Fu[Fu.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",Fu[Fu.LimboResolution=2]="LimboResolution";var zu=(Wu.prototype.withSequenceNumber=function(e){return new Wu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Wu.prototype.withResumeToken=function(e,t){return new Wu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)},Wu.prototype.withLastLimboFreeSnapshotVersion=function(e){return new Wu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},Wu.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.target.isEqual(e.target)},Wu);function Wu(e,t,n,r,i,o,a){void 0===i&&(i=uo.MIN),void 0===o&&(o=uo.MIN),void 0===a&&(a=Kr()),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}var Ku=(Gu.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=Gi.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Us(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=Gi.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new Ws(t,n)):Ur("Unexpected DbRemoteDocument")},Gu.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof Fs){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e),o=e.hasCommittedMutations;return new Su(null,null,i,o,n,r)}if(e instanceof Us){var a=e.key.path.toArray(),s=this.toDbTimestamp(e.version);return o=e.hasCommittedMutations,new Su(null,new Eu(a,s),null,o,n,r)}if(e instanceof Ws){a=e.key.path.toArray();var u=this.toDbTimestamp(e.version);return new Su(new Tu(a,u),null,null,!0,n,r)}return Ur("Unexpected MaybeDocument")},Gu.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},Gu.prototype.fromDbTimestampKey=function(e){var t=new ao(e[0],e[1]);return uo.fromTimestamp(t)},Gu.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new fu(t.seconds,t.nanoseconds)},Gu.prototype.fromDbTimestamp=function(e){var t=new ao(e.seconds,e.nanoseconds);return uo.fromTimestamp(t)},Gu.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new yu(e,t.batchId,t.localWriteTime.toMillis(),r,i)},Gu.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=ao.fromMillis(e.localWriteTimeMs);return new Oo(e.batchId,i,n,r)},Gu.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(no(e.path))})),t},Gu.prototype.fromDbResourcePaths=function(e){for(var t=_o(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new Gi(oo(i)))}return t},Gu.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):uo.MIN,i=e.resumeToken;return t=function(e){return void 0!==e.documents}(e.query)?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new zu(t,e.targetId,$u.Listen,e.lastListenSequenceNumber,n,r,i)},Gu.prototype.toDbTarget=function(e){jr($u.Listen===e.purpose,"Only queries with purpose "+$u.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),i=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target),n=e.resumeToken instanceof Uint8Array?(jr(Bo.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),e.resumeToken.toString()):e.resumeToken,new Du(e.targetId,e.target.canonicalId(),r,n,e.sequenceNumber,i,t)},Gu);function Gu(e){this.remoteSerializer=e}var Qu=(Hu.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},Hu.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e}))},Hu.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=Co();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)})),r},Hu.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},Hu.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Io();return i.forEach((function(e,t){t=t||new Us(e,uo.forDeletedDoc()),o=o.insert(e,t)})),o}))},Hu.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},Hu.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new Gi(t)).next((function(e){var t=Do();return e instanceof Fs&&(t=t.insert(e.key,e)),t}))},Hu.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;jr(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=Do();return this.indexManager.getCollectionParents(e,i).next((function(a){return $o.forEach(a,(function(a){var s=t.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},Hu.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.addMissingBaseDocuments(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);r=h instanceof Fs?r.insert(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},Hu.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=_o(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof _a&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof Fs&&(c=c.insert(e,t))})),c}))},Hu);function Hu(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}var Yu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Xu=(Ju.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},Ju.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},Ju);function Ju(){this.onCommittedListeners=[]}var Zu=(ec.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},ec.prototype.addReference=function(e,t){var n=new tc(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},ec.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},ec.prototype.removeReference=function(e,t){this.removeRef(new tc(e,t))},ec.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},ec.prototype.removeReferencesForId=function(e){var t=this,n=Gi.EMPTY,r=new tc(n,e),i=new tc(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},ec.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},ec.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},ec.prototype.referencesForId=function(e){var t=Gi.EMPTY,n=new tc(t,e),r=new tc(t,e+1),i=_o();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},ec.prototype.containsKey=function(e){var t=new tc(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},ec);function ec(){this.refsByKey=new bo(tc.compareByKey),this.refsByTarget=new bo(tc.compareByTargetId)}var tc=(nc.compareByKey=function(e,t){return Gi.comparator(e.key,t.key)||Si(e.targetOrBatchId,t.targetOrBatchId)},nc.compareByTargetId=function(e,t){return Si(e.targetOrBatchId,t.targetOrBatchId)||Gi.comparator(e.key,t.key)},nc);function nc(e,t){this.key=e,this.targetOrBatchId=t}var rc="LocalStore",ic=(oc.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},oc.prototype.handleUserChange=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i=this;return s(this,(function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,t=i.persistence.getMutationQueue(e),n=new Qu(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],i=[],a=_o(),s=0,u=o;s<u.length;s++){var c=u[s];t.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){c=p[d],i.push(c.batchId);for(var m=0,g=c.mutations;m<g.length;m++)f=g[m],a=a.add(f.key)}return n.getDocuments(r,a).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},oc.prototype.localWrite=function(e){var t,n=this,r=ao.now(),i=e.reduce((function(e,t){return e.add(t.key)}),_o());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){t=i;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=c.extractBaseValue(t.get(c.key));null!=l&&a.push(new _a(c.key,l,l.fieldMask(),Sa.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},oc.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):$o.resolve(null)}))}))},oc.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},oc.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return jr(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},oc.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},oc.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},oc.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},oc.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)}))},oc.prototype.applyRemoteEvent=function(e){var t=this,n=e.snapshotVersion,r=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(i){var o=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});r=t.targetDataByTarget;var a=[];ei(e.targetChanges,(function(e,o){var s=r.get(e);if(s){a.push(t.targetCache.removeMatchingKeys(i,o.removedDocuments,e).next((function(){return t.targetCache.addMatchingKeys(i,o.addedDocuments,e)})));var u=o.resumeToken;if(0<u.length){var c=s.withResumeToken(u,n).withSequenceNumber(i.currentSequenceNumber);r=r.insert(e,c),oc.shouldPersistTargetData(s,c,o)&&a.push(t.targetCache.updateTargetData(i,c))}}}));var s=Io(),u=_o();if(e.documentUpdates.forEach((function(e,t){u=u.add(e)})),a.push(o.getEntries(i,u).next((function(r){e.documentUpdates.forEach((function(u,c){var l=r.get(u);c instanceof Us&&c.version.isEqual(uo.MIN)?(o.removeEntry(u,n),s=s.insert(u,c)):null==l||0<c.version.compareTo(l.version)||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(jr(!uo.MIN.isEqual(n),"Cannot add a document when the remote version is zero"),o.addEntry(c,n),s=s.insert(u,c)):Fr(rc,"Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,u))}))}))),!n.isEqual(uo.MIN)){var c=t.targetCache.getLastRemoteSnapshotVersion(i).next((function(e){return jr(0<=n.compareTo(e),"Watch stream reverted to previous snapshot?? "+n+" < "+e),t.targetCache.setTargetsMetadata(i,i.currentSequenceNumber,n)}));a.push(c)}return $o.waitFor(a).next((function(){return o.apply(i)})).next((function(){return t.localDocuments.getLocalViewOfDocuments(i,s)}))})).then((function(e){return t.targetDataByTarget=r,e}))},oc.shouldPersistTargetData=function(e,t,n){return jr(0<t.resumeToken.length,"Attempted to persist target data with no resume token"),0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size},oc.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);jr(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,u=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return $o.forEach(e,(function(e){return $o.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},oc.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},oc.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},oc.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return t.targetCache.getTargetData(n,e).next((function(i){return i?(r=i,$o.resolve(r)):t.targetCache.allocateTargetId(n).next((function(i){return r=new zu(e,i,$u.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n}))},oc.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?$o.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},oc.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);jr(null!==r,"Tried to release nonexistent target: "+e);var i=t?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.localViewReferences.removeReferencesForId(e);return t?$o.resolve():$o.forEach(o,(function(e){return n.persistence.referenceDelegate.removeReference(i,e)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)}))},oc.prototype.executeQuery=function(e,t){var n=this,r=uo.MIN,i=_o();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,e.toTarget()).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,e.targetId).next((function(e){i=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:uo.MIN,t?i:_o())})).next((function(e){return{documents:e,remoteKeys:i}}))}))},oc.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)}))},oc.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},oc.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},oc.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},oc.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=$o.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,a=t.docVersions.get(r);jr(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o,t.commitVersion):jr(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},oc.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.targetDataByTarget)}))},oc.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return t.targetCache.getTargetDataForTarget(n,e).next((function(e){return e?e.target:null}))}))},oc.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs,r=t.readTime;return e.lastDocumentChangeReadTime=r,n}))},oc.prototype.synchronizeLastDocumentChangeReadTime=function(){return a(this,void 0,void 0,(function(){var e,t=this;return s(this,(function(n){switch(n.label){case 0:return[4,(e=this).persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(e){return t.remoteDocuments.getLastReadTime(e)}))];case 1:return e.lastDocumentChangeReadTime=n.sent(),[2]}}))}))},oc.RESUME_TOKEN_MAX_AGE_MICROS=3e8,oc);function oc(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new Zu,this.targetDataByTarget=new lo(Si),this.targetIdByTarget=new Gs((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=uo.MIN,jr(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new Qu(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}function ac(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){if(e.code!==Qr.FAILED_PRECONDITION||e.message!==Yu)throw e;return Fr(rc,"Unexpectedly lost primary lease"),[2]}))}))}function sc(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Si(n,i);return 0===a?Si(r,o):a}var uc=(cc.prototype.nextIndex=function(){return++this.previousIndex},cc.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();sc(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(cc.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),cc);function cc(e){this.maxElements=e,this.buffer=new bo(sc),this.previousIndex=0}var lc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hc=(fc.withCacheSize=function(e){return new fc(e,fc.DEFAULT_COLLECTION_PERCENTILE,fc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},fc.COLLECTION_DISABLED=-1,fc.MINIMUM_CACHE_SIZE_BYTES=1048576,fc.DEFAULT=new fc(fc.DEFAULT_CACHE_SIZE_BYTES=41943040,fc.DEFAULT_COLLECTION_PERCENTILE=10,fc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),fc.DISABLED=new fc(fc.COLLECTION_DISABLED,0,0),fc);function fc(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}var dc=(pc.prototype.start=function(){jr(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==hc.COLLECTION_DISABLED&&this.scheduleGC()},pc.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(pc.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),pc.prototype.scheduleGC=function(){var e=this;jr(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;Fr("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Hi.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(ac)}))},pc);function pc(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}var mc=(gc.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},gc.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return $o.resolve(Pi.INVALID);var r=new uc(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},gc.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},gc.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},gc.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===hc.COLLECTION_DISABLED?(Fr("LruGarbageCollector","Garbage collection skipped; disabled"),$o.resolve(lc)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Fr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),lc):n.runGarbageCollection(e,t)}))},gc.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},gc.prototype.runGarbageCollection=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return r=t>c.params.maximumSequenceNumbersToCollect?(Fr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),c.params.maximumSequenceNumbersToCollect):t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Lr()<=Dr.DEBUG&&Fr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),$o.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},gc);function gc(e,t){this.delegate=e,this.params=t}var yc,vc="IndexedDbPersistence",bc="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",wc=(n(Ec,yc=Xu),Ec);function Ec(e,t){var n=yc.call(this)||this;return n.simpleDbTransaction=e,n.currentSequenceNumber=t,n}var Tc=(Sc.getStore=function(e,t){if(e instanceof wc)return Bo.getStore(e.simpleDbTransaction,t);throw Ur("IndexedDbPersistence must use instances of IndexedDbTransaction")},Sc.createIndexedDbPersistence=function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:if(!Sc.isAvailable())throw new Hr(Qr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(t=new Sc(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.lruParams,e.queue,e.serializer,e.sequenceNumberSyncer)).start()];case 1:return n.sent(),[2,t]}}))}))},Sc.prototype.start=function(){var e=this;return jr(!this.started,"IndexedDbPersistence double-started!"),jr(null!==this.window,"Expected 'window' to be defined"),Bo.openOrCreate(this.dbName,cu,new lu(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[_u.store],(function(e){return pa(e)}))})).then((function(t){e.listenSequence=new Pi(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},Sc.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return a(t,void 0,void 0,(function(){return s(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},Sc.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return a(t,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},Sc.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return a(t,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},Sc.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",qu,(function(t){return Cc(t).put(new Vu(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next((function(){return!1})):!!n&&e.acquireOrExtendPrimaryLease(t).next((function(){return!0}))}))})).catch((function(t){if(!e.allowTabSynchronization)throw t;return Fr(vc,"Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(t)})),e.isPrimary=t}))},Sc.prototype.verifyPrimaryLease=function(e){var t=this;return Ic(e).get(du.key).next((function(e){return $o.resolve(t.isLocalClient(e))}))},Sc.prototype.removeClientMetadata=function(e){return Cc(e).delete(this.clientId)},Sc.prototype.maybeGarbageCollectMultiClientState=function(){return a(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){switch(t.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(t){var n=Sc.getStore(t,Vu.store);return n.loadAll().next((function(t){var r=e.filterActiveClients(t,18e5),i=t.filter((function(e){return-1===r.indexOf(e)}));return $o.forEach(i,(function(e){return n.delete(e.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:t.sent().forEach((function(t){e.window.localStorage.removeItem(e.zombiedClientLocalStorageKey(t.clientId))})),t.label=2;case 2:return[2]}}))}))},Sc.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Hi.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},Sc.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},Sc.prototype.canActAsPrimary=function(e){var t=this;return Ic(e).get(du.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new Hr(Qr.FAILED_PRECONDITION,bc);return!1}}return!(!t.networkEnabled||!t.inForeground)||Cc(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Fr(vc,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},Sc.prototype.shutdown=function(){return a(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[du.store,Vu.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},Sc.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},Sc.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[Vu.store],(function(t){return Cc(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},Sc.clearPersistence=function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return Sc.isAvailable()?(t=e+Sc.MAIN_DATABASE,[4,Bo.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(Sc.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),Sc.prototype.getMutationQueue=function(e){return jr(this.started,"Cannot initialize MutationQueue before persistence is started."),ea.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},Sc.prototype.getTargetCache=function(){return jr(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},Sc.prototype.getRemoteDocumentCache=function(){return jr(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},Sc.prototype.getIndexManager=function(){return jr(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},Sc.prototype.runTransaction=function(e,t,n){var r=this;Fr(vc,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),a=t.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,qu,(function(o){return i=new wc(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next((function(e){return!!e||r.canActAsPrimary(o)})).next((function(t){if(!t)throw qr("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new Hr(Qr.FAILED_PRECONDITION,Yu);return n(i)})).next((function(e){return r.acquireOrExtendPrimaryLease(o).next((function(){return e}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},Sc.prototype.verifyAllowTabSynchronization=function(e){var t=this;return Ic(e).get(du.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new Hr(Qr.FAILED_PRECONDITION,bc)}))},Sc.prototype.acquireOrExtendPrimaryLease=function(e){var t=new du(this.clientId,this.allowTabSynchronization,Date.now());return Ic(e).put(du.key,t)},Sc.isAvailable=function(){return Bo.isAvailable()},Sc.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},Sc.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Ic(e);return n.get(du.key).next((function(e){return t.isLocalClient(e)?(Fr(vc,"Releasing primary lease."),n.delete(du.key)):$o.resolve()}))},Sc.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||n<e&&(qr("Detected an update time that is in the future: "+e+" > "+n),1))},Sc.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},Sc.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(jr(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},Sc.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},Sc.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(jr("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},Sc.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return Fr(vc,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return qr(vc,"Failed to get zombied client id.",e),!1}},Sc.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){qr("Failed to set zombie client id.",e)}},Sc.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},Sc.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},Sc.MAIN_DATABASE="main",Sc);function Sc(e,t,n,r,i,o,a,s){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.queue=o,this.sequenceNumberSyncer=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new kc(this,i),this.dbName=t+Sc.MAIN_DATABASE,this.serializer=new Ku(a),this.document=r.document,this.targetCache=new la(this.referenceDelegate,this.serializer),this.indexManager=new Bu,this.remoteDocumentCache=new Js(this.serializer,this.indexManager),!r.window||!r.window.localStorage)throw new Hr(Qr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}function Ic(e){return e.store(du.store)}function Cc(e){return e.store(Vu.store)}var kc=(Dc.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},Dc.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},Dc.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},Dc.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},Dc.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},Dc.prototype.addReference=function(e,t){return Ac(e,t)},Dc.prototype.removeReference=function(e,t){return Ac(e,t)},Dc.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},Dc.prototype.removeMutationReference=function(e,t){return Ac(e,t)},Dc.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?$o.resolve(!0):function(e,t){var n=!1;return sa(e).iterateSerial((function(r){return na(e,r,t).next((function(e){return e&&(n=!0),$o.resolve(!e)}))})).next((function(){return n}))}(e,t)},Dc.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,(function(a,s){if(s<=t){var u=n.isPinned(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),ma(e).delete(function(e){return[0,no(e.path)]}(a))}))}));i.push(u)}})).next((function(){return $o.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},Dc.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},Dc.prototype.updateLimboDocument=function(e,t){return Ac(e,t)},Dc.prototype.forEachOrphanedDocument=function(e,t){var n,r=ma(e),i=Pi.INVALID;return r.iterate({index:Nu.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==Pi.INVALID&&t(new Gi(oo(n)),i),i=s,n=a):i=Pi.INVALID})).next((function(){i!==Pi.INVALID&&t(new Gi(oo(n)),i)}))},Dc.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},Dc);function Dc(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new mc(this,t)}function Ac(e,t){return ma(e).put(function(e,t){return new Nu(0,no(e.path),t)}(t,e.currentSequenceNumber))}var Nc=Number,xc=Nc.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),_c=Nc.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Rc=Nc.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function Mc(e){return null==e}function Oc(e){return Rc(e)&&e<=_c&&xc<=e}var Pc,Vc,Lc=($c.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";Mc(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},$c.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(e+=", filters: ["+this.filters.join(", ")+"]"),Mc(this.limit)||(e+=", limit: "+this.limit),0<this.orderBy.length&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},$c.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},$c.prototype.isDocumentQuery=function(){return Gi.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},$c);function $c(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}(Vc=Pc=Pc||{}).First="F",Vc.Last="L";var Fc=(qc.atPath=function(e){return new qc(e)},Object.defineProperty(qc.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[dl]:this.memoizedOrderBy=[new hl(e),dl];else{jr(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:sl.ASCENDING;this.memoizedOrderBy.push(a===sl.ASCENDING?dl:pl)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),qc.prototype.addFilter=function(e){jr(null==this.getInequalityFilterField()||!(e instanceof zc)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),jr(!this.isDocumentQuery(),"No filtering allowed for document query");var t=this.filters.concat([e]);return new qc(this.path,this.collectionGroup,this.explicitOrderBy.slice(),t,this.limit,this.limitType,this.startAt,this.endAt)},qc.prototype.addOrderBy=function(e){jr(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var t=this.explicitOrderBy.concat([e]);return new qc(this.path,this.collectionGroup,t,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},qc.prototype.withLimitToFirst=function(e){return new qc(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,Pc.First,this.startAt,this.endAt)},qc.prototype.withLimitToLast=function(e){return new qc(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,Pc.Last,this.startAt,this.endAt)},qc.prototype.withStartAt=function(e){return new qc(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,e,this.endAt)},qc.prototype.withEndAt=function(e){return new qc(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,e)},qc.prototype.asCollectionQueryAtPath=function(e){return new qc(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},qc.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},qc.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},qc.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},qc.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},qc.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return jr(n,"orderBy used that doesn't compare on key field"),0},qc.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},qc.prototype.hasLimitToFirst=function(){return!Mc(this.limit)&&this.limitType===Pc.First},qc.prototype.hasLimitToLast=function(){return!Mc(this.limit)&&this.limitType===Pc.Last},qc.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},qc.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof zc&&n.isInequality())return n.field}return null},qc.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof zc&&0<=e.indexOf(r.op))return r.op}return null},qc.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},qc.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},qc.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===Pc.First)this.memoizedTarget=new Lc(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t],i=r.dir===sl.DESCENDING?sl.ASCENDING:sl.DESCENDING;e.push(new hl(r.field,i))}var o=this.endAt?new cl(this.endAt.position,!this.endAt.before):null,a=this.startAt?new cl(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new Lc(this.path,this.collectionGroup,e,this.filters,this.limit,o,a)}return this.memoizedTarget},qc.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):Gi.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},qc.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},qc.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},qc.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},qc.prototype.assertValidBound=function(e){jr(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},qc);function qc(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Pc.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}var Bc=(Uc.fromString=function(e){switch(e){case"<":return Uc.LESS_THAN;case"<=":return Uc.LESS_THAN_OR_EQUAL;case"==":return Uc.EQUAL;case">=":return Uc.GREATER_THAN_OR_EQUAL;case">":return Uc.GREATER_THAN;case"array-contains":return Uc.ARRAY_CONTAINS;case"in":return Uc.IN;case"array-contains-any":return Uc.ARRAY_CONTAINS_ANY;default:return Ur("Unknown FieldFilter operator: "+e)}},Uc.prototype.toString=function(){return this.name},Uc.prototype.isEqual=function(e){return this.name===e.name},Uc.LESS_THAN=new Uc("<"),Uc.LESS_THAN_OR_EQUAL=new Uc("<="),Uc.EQUAL=new Uc("=="),Uc.GREATER_THAN=new Uc(">"),Uc.GREATER_THAN_OR_EQUAL=new Uc(">="),Uc.ARRAY_CONTAINS=new Uc("array-contains"),Uc.IN=new Uc("in"),Uc.ARRAY_CONTAINS_ANY=new Uc("array-contains-any"),Uc);function Uc(e){this.name=e}var jc,zc=(n(Wc,jc=function(){}),Wc.create=function(e,t,n){if(e.isKeyField())return t===Bc.IN?(jr(n instanceof Os,"Comparing on key with IN, but filter value not an ArrayValue"),jr(n.internalValue.every((function(e){return e instanceof Cs})),"Comparing on key with IN, but an array value was not a RefValue"),new Yc(e,n)):(jr(n instanceof Cs,"Comparing on key, but filter value not a RefValue"),jr(t!==Bc.ARRAY_CONTAINS&&t!==Bc.ARRAY_CONTAINS_ANY,"'"+t.toString()+"' queries don't make sense on document keys."),new Gc(e,t,n));if(n.isEqual(Xa.INSTANCE)){if(t!==Bc.EQUAL)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new Wc(e,t,n)}if(n.isEqual(ls.NAN)){if(t!==Bc.EQUAL)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new Wc(e,t,n)}return t===Bc.ARRAY_CONTAINS?new Zc(e,n):t===Bc.IN?(jr(n instanceof Os,"IN filter has invalid value: "+n.toString()),new nl(e,n)):t===Bc.ARRAY_CONTAINS_ANY?(jr(n instanceof Os,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new ol(e,n)):new Wc(e,t,n)},Wc.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},Wc.prototype.matchesComparison=function(e){switch(this.op){case Bc.LESS_THAN:return e<0;case Bc.LESS_THAN_OR_EQUAL:return e<=0;case Bc.EQUAL:return 0===e;case Bc.GREATER_THAN:return 0<e;case Bc.GREATER_THAN_OR_EQUAL:return 0<=e;default:return Ur("Unknown FieldFilter operator: "+this.op)}},Wc.prototype.isInequality=function(){return 0<=[Bc.LESS_THAN,Bc.LESS_THAN_OR_EQUAL,Bc.GREATER_THAN,Bc.GREATER_THAN_OR_EQUAL].indexOf(this.op)},Wc.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},Wc.prototype.isEqual=function(e){return e instanceof Wc&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},Wc.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},Wc);function Wc(e,t,n){var r=jc.call(this)||this;return r.field=e,r.op=t,r.value=n,r}var Kc,Gc=(n(Qc,Kc=zc),Qc.prototype.matches=function(e){var t=this.value,n=Gi.comparator(e.key,t.key);return this.matchesComparison(n)},Qc);function Qc(){return null!==Kc&&Kc.apply(this,arguments)||this}var Hc,Yc=(n(Xc,Hc=zc),Xc.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},Xc);function Xc(e,t){var n=Hc.call(this,e,Bc.IN,t)||this;return n.value=t,n}var Jc,Zc=(n(el,Jc=zc),el.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Os&&t.contains(this.value)},el);function el(e,t){return Jc.call(this,e,Bc.ARRAY_CONTAINS,t)||this}var tl,nl=(n(rl,tl=zc),rl.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},rl);function rl(e,t){var n=tl.call(this,e,Bc.IN,t)||this;return n.value=t,n}var il,ol=(n(al,il=zc),al.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Os&&n.internalValue.some((function(e){return t.value.contains(e)}))},al);function al(e,t){var n=il.call(this,e,Bc.ARRAY_CONTAINS_ANY,t)||this;return n.value=t,n}var sl=(ul.prototype.toString=function(){return this.name},ul.ASCENDING=new ul("asc"),ul.DESCENDING=new ul("desc"),ul);function ul(e){this.name=e}var cl=(ll.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},ll.prototype.sortsBeforeDocument=function(e,t){jr(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())jr(o instanceof Cs,"Bound has a non-key value where the key path is being used."),n=Gi.comparator(o.key,t.key);else{var a=t.field(i.field);jr(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===sl.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},ll.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},ll);function ll(e,t){this.position=e,this.before=t}var hl=(fl.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Fs.compareByKey(e,t):Fs.compareByField(this.field,e,t);switch(this.dir){case sl.ASCENDING:return n;case sl.DESCENDING:return-1*n;default:return Ur("Unknown direction: "+this.dir)}},fl.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},fl.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},fl.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},fl);function fl(e,t){this.field=e,void 0===t&&(t=sl.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}var dl=new hl(Wi.keyField(),sl.ASCENDING),pl=new hl(Wi.keyField(),sl.DESCENDING),ml=(gl.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},gl.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return jr(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),t.matchesAllDocuments()?this.executeFullCollectionScan(e,t):n.isEqual(uo.MIN)?this.executeFullCollectionScan(e,t):this.localDocumentsView.getDocuments(e,r).next((function(o){var a=i.applyQuery(t,o);return(t.hasLimitToFirst()||t.hasLimitToLast())&&i.needsRefill(t.limitType,a,r,n)?i.executeFullCollectionScan(e,t):(Lr()<=Dr.DEBUG&&Fr("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),t.toString()),i.localDocumentsView.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},gl.prototype.applyQuery=function(e,t){var n=new bo((function(t,n){return e.docComparator(t,n)}));return t.forEach((function(t,r){r instanceof Fs&&e.matches(r)&&(n=n.add(r))})),n},gl.prototype.needsRefill=function(e,t,n,r){if(n.size!==t.size)return!0;var i=e===Pc.First?t.last():t.first();return!!i&&(i.hasPendingWrites||0<i.version.compareTo(r))},gl.prototype.executeFullCollectionScan=function(e,t){return Lr()<=Dr.DEBUG&&Fr("IndexFreeQueryEngine","Using full collection scan to execute query: %s",t.toString()),this.localDocumentsView.getDocumentsMatchingQuery(e,t,uo.MIN)},gl);function gl(){}var yl=(vl.prototype.checkEmpty=function(e){return $o.resolve(0===this.mutationQueue.length)},vl.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");jr(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return jr(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,$o.resolve()},vl.prototype.getLastStreamToken=function(e){return $o.resolve(this.lastStreamToken)},vl.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,$o.resolve()},vl.prototype.addMutationBatch=function(e,t,n,r){jr(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&jr(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Oo(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new tc(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return $o.resolve(o)},vl.prototype.lookupMutationBatch=function(e,t){return $o.resolve(this.findMutationBatch(t))},vl.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return jr(null!=n,"Failed to find local mutation batch."),$o.resolve(n.keys())},vl.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return $o.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},vl.prototype.getHighestUnacknowledgedBatchId=function(){return $o.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},vl.prototype.getAllMutationBatches=function(e){return $o.resolve(this.mutationQueue.slice())},vl.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new tc(t,0),i=new tc(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){jr(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);jr(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),$o.resolve(o)},vl.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new bo(Si);return t.forEach((function(e){var t=new tc(e,0),i=new tc(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){jr(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),$o.resolve(this.findMutationBatches(r))},vl.prototype.getAllMutationBatchesAffectingQuery=function(e,t){jr(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;Gi.isDocumentKey(i)||(i=i.child(""));var o=new tc(new Gi(i),0),a=new bo(Si);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)}),o),$o.resolve(this.findMutationBatches(a))},vl.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},vl.prototype.removeMutationBatch=function(e,t){var n=this;jr(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return $o.forEach(t.mutations,(function(i){var o=new tc(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},vl.prototype.removeCachedMutationKeys=function(e){},vl.prototype.containsKey=function(e,t){var n=new tc(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return $o.resolve(t.isEqual(r&&r.key))},vl.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&jr(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),$o.resolve()},vl.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return jr(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},vl.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},vl.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return jr(n.batchId===e,"If found batch must match"),n},vl);function vl(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=Kr(),this.batchesByDocumentKey=new bo(tc.compareByKey)}var bl,wl=(El.prototype.addEntry=function(e,t,n){jr(!n.isEqual(uo.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},El.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},El.prototype.getEntry=function(e,t){var n=this.docs.get(t);return $o.resolve(n?n.maybeDocument:null)},El.prototype.getEntries=function(e,t){var n=this,r=Co();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),$o.resolve(r)},El.prototype.getDocumentsMatchingQuery=function(e,t,n){jr(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Do(),i=new Gi(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof Fs&&t.matches(c)&&(r=r.insert(c.key,c))}return $o.resolve(r)},El.prototype.forEachDocumentKey=function(e,t){return $o.forEach(this.docs,(function(e){return t(e)}))},El.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},El.prototype.getLastReadTime=function(e){return $o.resolve(uo.MIN)},El.prototype.newChangeBuffer=function(e){return new El.RemoteDocumentChangeBuffer(this)},El.prototype.getSize=function(e){return $o.resolve(this.size)},El.RemoteDocumentChangeBuffer=(n(Tl,bl=Hs),Tl.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)})),$o.waitFor(n)},Tl.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},Tl.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},Tl),El);function El(e,t){this.indexManager=e,this.sizer=t,this.docs=new lo(Gi.comparator),this.size=0}function Tl(e){var t=bl.call(this)||this;return t.documentCache=e,t}var Sl=(Il.prototype.forEachTarget=function(e,t){return this.targets.forEach((function(e,n){return t(n)})),$o.resolve()},Il.prototype.getLastRemoteSnapshotVersion=function(e){return $o.resolve(this.lastRemoteSnapshotVersion)},Il.prototype.getHighestSequenceNumber=function(e){return $o.resolve(this.highestSequenceNumber)},Il.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,$o.resolve(t)},Il.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),$o.resolve()},Il.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},Il.prototype.addTargetData=function(e,t){return jr(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,$o.resolve()},Il.prototype.updateTargetData=function(e,t){return jr(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),$o.resolve()},Il.prototype.removeTargetData=function(e,t){return jr(0<this.targetCount,"Removing a target from an empty cache"),jr(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,$o.resolve()},Il.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.targets.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),$o.waitFor(o).next((function(){return i}))},Il.prototype.getTargetCount=function(e){return $o.resolve(this.targetCount)},Il.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return $o.resolve(n)},Il.prototype.getTargetDataForTarget=function(e,t){return Ur("Not yet implemented.")},Il.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),$o.waitFor(i)},Il.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),$o.waitFor(i)},Il.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),$o.resolve()},Il.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return $o.resolve(n)},Il.prototype.containsKey=function(e,t){return $o.resolve(this.references.containsKey(t))},Il);function Il(e){this.persistence=e,this.targets=new Gs((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=uo.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Zu,this.targetCount=0,this.targetIdGenerator=ua.forTargetCache()}var Cl=(kl.createLruPersistence=function(e,t){return new kl(e,(function(e){return new Rl(e,t)}))},kl.createEagerPersistence=function(e){return new kl(e,(function(e){return new xl(e)}))},kl.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(kl.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),kl.prototype.getActiveClients=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){return[2,[this.clientId]]}))}))},kl.prototype.setPrimaryStateListener=function(e){return e(!0)},kl.prototype.setDatabaseDeletedListener=function(){},kl.prototype.setNetworkEnabled=function(e){},kl.prototype.getIndexManager=function(){return this.indexManager},kl.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new yl(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},kl.prototype.getTargetCache=function(){return this.targetCache},kl.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},kl.prototype.runTransaction=function(e,t,n){var r=this;Fr("MemoryPersistence","Starting transaction:",e);var i=new Al(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},kl.prototype.mutationQueuesContainKey=function(e,t){return $o.or(function(e){var t=[];return ti(e,(function(e,n){return t.push(n)})),t}(this.mutationQueues).map((function(n){return function(){return n.containsKey(e,t)}})))},kl);function kl(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new Pi(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new Sl(this),this.indexManager=new ou,this.remoteDocumentCache=new wl(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}var Dl,Al=(n(Nl,Dl=Xu),Nl);function Nl(e){var t=Dl.call(this)||this;return t.currentSequenceNumber=e,t}var xl=(Object.defineProperty(_l.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw Ur("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),_l.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},_l.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),$o.resolve()},_l.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),$o.resolve()},_l.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),$o.resolve()},_l.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeTargetData(e,t)}))},_l.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},_l.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $o.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},_l.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},_l.prototype.documentSize=function(e){return 0},_l.prototype.isReferenced=function(e,t){var n=this;return $o.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return $o.resolve(n.inMemoryPins.containsKey(t))}])},_l);function _l(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}var Rl=(Ml.prototype.onTransactionStarted=function(){},Ml.prototype.onTransactionCommitted=function(e){return $o.resolve()},Ml.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},Ml.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},Ml.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},Ml.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return $o.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?$o.resolve():t(i)}))}))},Ml.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},Ml.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},Ml.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,(function(i){return n.isPinned(e,i,t).next((function(e){e||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(e)})).next((function(){return r}))},Ml.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),$o.resolve()},Ml.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},Ml.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),$o.resolve()},Ml.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),$o.resolve()},Ml.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),$o.resolve()},Ml.prototype.documentSize=function(e){var t=e.key.toString().length;return e instanceof Fs&&(t+=e.data().approximateByteSize()),t},Ml.prototype.isPinned=function(e,t,n){var r=this;return $o.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return $o.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return $o.resolve(void 0!==e&&n<e)}])},Ml.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},Ml);function Ml(e,t){this.persistence=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Gs((function(e){return no(e.path)})),this.garbageCollector=new mc(this,t)}var Ol=(Pl.prototype.reset=function(){this.currentBaseMs=0},Pl.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},Pl.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&Fr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},Pl.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},Pl.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},Pl);function Pl(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}var Vl,Ll,$l="PersistentStream";(Ll=Vl=Vl||{})[Ll.Initial=0]="Initial",Ll[Ll.Starting=1]="Starting",Ll[Ll.Open=2]="Open",Ll[Ll.Error=3]="Error",Ll[Ll.Backoff=4]="Backoff";var Fl=(ql.prototype.isStarted=function(){return this.state===Vl.Starting||this.state===Vl.Open||this.state===Vl.Backoff},ql.prototype.isOpen=function(){return this.state===Vl.Open},ql.prototype.start=function(){this.state!==Vl.Error?(jr(this.state===Vl.Initial,"Already started"),this.auth()):this.performBackoff()},ql.prototype.stop=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(Vl.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},ql.prototype.inhibitBackoff=function(){jr(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Vl.Initial,this.backoff.reset()},ql.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},ql.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},ql.prototype.handleIdleCloseTimer=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){return this.isOpen()?[2,this.close(Vl.Initial)]:[2]}))}))},ql.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},ql.prototype.close=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return jr(this.isStarted(),"Only started streams should be closed."),jr(e===Vl.Error||Mc(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==Vl.Error?this.backoff.reset():t&&t.code===Qr.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===Qr.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},ql.prototype.tearDown=function(){},ql.prototype.auth=function(){var e=this;jr(this.state===Vl.Initial,"Must be in initial state to auth"),this.state=Vl.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new Hr(Qr.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},ql.prototype.startStream=function(e){var t=this;jr(this.state===Vl.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return jr(t.state===Vl.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=Vl.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},ql.prototype.performBackoff=function(){var e=this;jr(this.state===Vl.Error,"Should only perform backoff when in Error state"),this.state=Vl.Backoff,this.backoff.backoffAndRun((function(){return a(e,void 0,void 0,(function(){return s(this,(function(e){return jr(this.state===Vl.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Vl.Initial,this.start(),jr(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},ql.prototype.handleStreamClose=function(e){return jr(this.isStarted(),"Can't handle server close on non-started stream"),Fr($l,"close with error: "+e),this.stream=null,this.close(Vl.Error,e)},ql.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(Fr($l,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},ql);function ql(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Vl.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Ol(e,t)}var Bl,Ul=(n(jl,Bl=Fl),jl.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},jl.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},jl.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},jl.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},jl);function jl(e,t,n,r,i){var o=Bl.call(this,e,Hi.ListenStreamConnectionBackoff,Hi.ListenStreamIdle,t,n,i)||this;return o.serializer=r,o}var zl,Wl=(n(Kl,zl=Fl),Object.defineProperty(Kl.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),Kl.prototype.start=function(){this.handshakeComplete_=!1,zl.prototype.start.call(this)},Kl.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},Kl.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},Kl.prototype.onMessage=function(e){if(jr(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return jr(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},Kl.prototype.writeHandshake=function(){jr(this.isOpen(),"Writing handshake requires an opened stream"),jr(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},Kl.prototype.writeMutations=function(e){var t=this;jr(this.isOpen(),"Writing mutations requires an opened stream"),jr(this.handshakeComplete_,"Handshake must be complete before writing mutations"),jr(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},Kl);function Kl(e,t,n,r,i){var o=zl.call(this,e,Hi.WriteStreamConnectionBackoff,Hi.WriteStreamIdle,t,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o.lastStreamToken=Kr(),o}var Gl=(Ql.prototype.newPersistentWriteStream=function(e){return new Wl(this.queue,this.connection,this.credentials,this.serializer,e)},Ql.prototype.newPersistentWatchStream=function(e){return new Ul(this.queue,this.connection,this.credentials,this.serializer,e)},Ql.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},Ql.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Io();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);jr(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},Ql.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===Qr.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},Ql.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===Qr.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},Ql);function Ql(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}var Hl,Yl,Xl,Jl,Zl=(eh.prototype.lookup=function(e){return a(this,void 0,void 0,(function(){var t,n=this;return s(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new Hr(Qr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof Us||e instanceof Fs?n.recordVersion(e):Ur("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},eh.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},eh.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},eh.prototype.delete=function(e){this.write([new La(e,this.precondition(e))]),this.writtenDocs.add(e)},eh.prototype.commit=function(){return a(this,void 0,void 0,(function(){var e,t=this;return s(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),e.forEach((function(e,n){t.mutations.push(new za(e,t.precondition(e)))})),[4,this.datastore.commit(this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},eh.prototype.recordVersion=function(e){var t;if(e instanceof Fs)t=e.version;else{if(!(e instanceof Us))throw Ur("Document in a transaction was a "+e.constructor.name);t=uo.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new Hr(Qr.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},eh.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?Sa.updateTime(t):Sa.NONE},eh.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(this.writtenDocs.has(e)||!t)return Sa.exists(!0);if(t.isEqual(uo.forDeletedDoc()))throw new Hr(Qr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sa.updateTime(t)},eh.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},eh.prototype.ensureCommitNotCalled=function(){jr(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},eh);function eh(e){this.datastore=e,this.readVersions=No(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}(Yl=Hl=Hl||{})[Yl.Unknown=0]="Unknown",Yl[Yl.Online=1]="Online",Yl[Yl.Offline=2]="Offline",(Jl=Xl=Xl||{})[Jl.RemoteStore=0]="RemoteStore",Jl[Jl.SharedClientState=1]="SharedClientState";var th,nh,rh=(ih.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Hl.Unknown),jr(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Hi.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,jr(e.state===Hl.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Hl.Offline),Promise.resolve()})))},ih.prototype.handleWatchStreamFailure=function(e){this.state===Hl.Online?(this.setAndBroadcast(Hl.Unknown),jr(0===this.watchStreamFailures,"watchStreamFailures must be 0"),jr(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Hl.Offline)))},ih.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Hl.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},ih.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},ih.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(qr(t),this.shouldWarnClientIsOffline=!1):Fr("OnlineStateTracker",t)},ih.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},ih);function ih(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Hl.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}function oh(e){switch(e){case Qr.OK:return Ur("Treated status OK as error");case Qr.CANCELLED:case Qr.UNKNOWN:case Qr.DEADLINE_EXCEEDED:case Qr.RESOURCE_EXHAUSTED:case Qr.INTERNAL:case Qr.UNAVAILABLE:case Qr.UNAUTHENTICATED:return!1;case Qr.INVALID_ARGUMENT:case Qr.NOT_FOUND:case Qr.ALREADY_EXISTS:case Qr.PERMISSION_DENIED:case Qr.FAILED_PRECONDITION:case Qr.ABORTED:case Qr.OUT_OF_RANGE:case Qr.UNIMPLEMENTED:case Qr.DATA_LOSS:return!0;default:return Ur("Unknown status code: "+e)}}function ah(e){if(void 0===e)return qr("GRPC error has no .code"),Qr.UNKNOWN;switch(e){case th.OK:return Qr.OK;case th.CANCELLED:return Qr.CANCELLED;case th.UNKNOWN:return Qr.UNKNOWN;case th.DEADLINE_EXCEEDED:return Qr.DEADLINE_EXCEEDED;case th.RESOURCE_EXHAUSTED:return Qr.RESOURCE_EXHAUSTED;case th.INTERNAL:return Qr.INTERNAL;case th.UNAVAILABLE:return Qr.UNAVAILABLE;case th.UNAUTHENTICATED:return Qr.UNAUTHENTICATED;case th.INVALID_ARGUMENT:return Qr.INVALID_ARGUMENT;case th.NOT_FOUND:return Qr.NOT_FOUND;case th.ALREADY_EXISTS:return Qr.ALREADY_EXISTS;case th.PERMISSION_DENIED:return Qr.PERMISSION_DENIED;case th.FAILED_PRECONDITION:return Qr.FAILED_PRECONDITION;case th.ABORTED:return Qr.ABORTED;case th.OUT_OF_RANGE:return Qr.OUT_OF_RANGE;case th.UNIMPLEMENTED:return Qr.UNIMPLEMENTED;case th.DATA_LOSS:return Qr.DATA_LOSS;default:return Ur("Unknown status code: "+e)}}(nh=th=th||{})[nh.OK=0]="OK",nh[nh.CANCELLED=1]="CANCELLED",nh[nh.UNKNOWN=2]="UNKNOWN",nh[nh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nh[nh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nh[nh.NOT_FOUND=5]="NOT_FOUND",nh[nh.ALREADY_EXISTS=6]="ALREADY_EXISTS",nh[nh.PERMISSION_DENIED=7]="PERMISSION_DENIED",nh[nh.UNAUTHENTICATED=16]="UNAUTHENTICATED",nh[nh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nh[nh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nh[nh.ABORTED=10]="ABORTED",nh[nh.OUT_OF_RANGE=11]="OUT_OF_RANGE",nh[nh.UNIMPLEMENTED=12]="UNIMPLEMENTED",nh[nh.INTERNAL=13]="INTERNAL",nh[nh.UNAVAILABLE=14]="UNAVAILABLE",nh[nh.DATA_LOSS=15]="DATA_LOSS";var sh,uh,ch,lh,hh=(fh.emptySet=function(e){return new fh(e.comparator)},fh.prototype.has=function(e){return null!=this.keyedMap.get(e)},fh.prototype.get=function(e){return this.keyedMap.get(e)},fh.prototype.first=function(){return this.sortedSet.minKey()},fh.prototype.last=function(){return this.sortedSet.maxKey()},fh.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},fh.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(fh.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),fh.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},fh.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},fh.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},fh.prototype.isEqual=function(e){if(!(e instanceof fh))return!1;if(this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},fh.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},fh.prototype.copy=function(e,t){var n=new fh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n},fh);function fh(e){this.comparator=e?function(t,n){return e(t,n)||Gi.comparator(t.key,n.key)}:function(e,t){return Gi.comparator(e.key,t.key)},this.keyedMap=Do(),this.sortedSet=new lo(this.comparator)}(uh=sh=sh||{})[uh.Added=0]="Added",uh[uh.Removed=1]="Removed",uh[uh.Modified=2]="Modified",uh[uh.Metadata=3]="Metadata",(lh=ch=ch||{})[lh.Local=0]="Local",lh[lh.Synced=1]="Synced";var dh=(ph.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==sh.Added&&n.type===sh.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===sh.Metadata&&n.type!==sh.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===sh.Modified&&n.type===sh.Modified?this.changeMap=this.changeMap.insert(t,{type:sh.Modified,doc:e.doc}):e.type===sh.Modified&&n.type===sh.Added?this.changeMap=this.changeMap.insert(t,{type:sh.Added,doc:e.doc}):e.type===sh.Removed&&n.type===sh.Added?this.changeMap=this.changeMap.remove(t):e.type===sh.Removed&&n.type===sh.Modified?this.changeMap=this.changeMap.insert(t,{type:sh.Removed,doc:n.doc}):e.type===sh.Added&&n.type===sh.Removed?this.changeMap=this.changeMap.insert(t,{type:sh.Modified,doc:e.doc}):Ur("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},ph.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},ph);function ph(){this.changeMap=new lo(Gi.comparator)}var mh=(gh.fromInitialDocuments=function(e,t,n,r){var i=[];return t.forEach((function(e){i.push({type:sh.Added,doc:e})})),new gh(e,t,hh.emptySet(t),i,n,r,!0,!1)},Object.defineProperty(gh.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),gh.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},gh);function gh(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}var yh=(vh.createSynthesizedRemoteEventForCurrentChange=function(e,t){var n,r=((n={})[e]=bh.createSynthesizedTargetChangeForCurrentChange(e,t),n);return new vh(uo.MIN,r,Mo(),Io(),_o())},vh);function vh(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}var bh=(wh.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new wh(Kr(),t,_o(),_o(),_o())},wh);function wh(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}var Eh,Th,Sh=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},Ih=function(e,t){this.targetId=e,this.existenceFilter=t};(Th=Eh=Eh||{})[Th.NoChange=0]="NoChange",Th[Th.Added=1]="Added",Th[Th.Removed=2]="Removed",Th[Th.Current=3]="Current",Th[Th.Reset=4]="Reset";var Ch=function(e,t,n,r){void 0===n&&(n=Kr()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},kh=(Object.defineProperty(Dh.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(Dh.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(Dh.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(Dh.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),Dh.prototype.updateResumeToken=function(e){0<e.length&&(this._hasPendingChanges=!0,this._resumeToken=e)},Dh.prototype.toTargetChange=function(){var e=_o(),t=_o(),n=_o();return this.documentChanges.forEach((function(r,i){switch(i){case sh.Added:e=e.add(r);break;case sh.Modified:t=t.add(r);break;case sh.Removed:n=n.add(r);break;default:Ur("Encountered invalid change type: "+i)}})),new bh(this._resumeToken,this._current,e,t,n)},Dh.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=_h()},Dh.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},Dh.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},Dh.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},Dh.prototype.recordTargetResponse=function(){this.pendingResponses-=1},Dh.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},Dh);function Dh(){this.pendingResponses=0,this.documentChanges=_h(),this._resumeToken=Kr(),this._current=!1,this._hasPendingChanges=!0}var Ah=(Nh.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Fs?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Us&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,e.key,e.newDoc)},Nh.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case Eh.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Eh.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Eh.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),jr(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Eh.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Eh.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:Ur("Unknown target watch change state: "+e.state)}}))},Nh.prototype.forEachTarget=function(e,t){0<e.targetIds.length?e.targetIds.forEach(t):ei(this.targetStates,t)},Nh.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new Gi(i.path);this.removeDocumentFromTarget(t,o,new Us(o,uo.forDeletedDoc()))}else jr(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},Nh.prototype.createRemoteEvent=function(e){var t=this,n={};ei(this.targetStates,(function(r,i){var o=t.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new Gi(o.target.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new Us(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=_o();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===$u.LimboResolution||(i=!1)})),i&&(r=r.add(e))}));var i=new yh(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Io(),this.pendingDocumentTargetMapping=xh(),this.pendingTargetResets=new bo(Si),i},Nh.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?sh.Modified:sh.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},Nh.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,sh.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},Nh.prototype.removeTarget=function(e){delete this.targetStates[e]},Nh.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},Nh.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},Nh.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new kh),this.targetStates[e]},Nh.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new bo(Si),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},Nh.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||Fr("WatchChangeAggregator","Detected inactive target",e),t},Nh.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},Nh.prototype.resetTarget=function(e){var t=this;jr(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new kh,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},Nh.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},Nh);function Nh(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Io(),this.pendingDocumentTargetMapping=xh(),this.pendingTargetResets=new bo(Si)}function xh(){return new lo(Gi.comparator)}function _h(){return new lo(Gi.comparator)}var Rh="RemoteStore",Mh=(Oh.prototype.start=function(){return this.enableNetwork()},Oh.prototype.enableNetwork=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Hl.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},Oh.prototype.disableNetwork=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Hl.Offline),[2]}}))}))},Oh.prototype.disableNetworkInternal=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),0<this.writePipeline.length&&(Fr(Rh,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},Oh.prototype.shutdown=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return Fr(Rh,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Hl.Unknown),[2]}}))}))},Oh.prototype.listen=function(e){Jr(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},Oh.prototype.unlisten=function(e){jr(Jr(this.listenTargets,e),"unlisten called on target no currently watched: "+e),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),ni(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Hl.Unknown))},Oh.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},Oh.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},Oh.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},Oh.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},Oh.prototype.startWatchStream=function(){jr(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Ah(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},Oh.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!ni(this.listenTargets)},Oh.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},Oh.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},Oh.prototype.onWatchStreamOpen=function(){return a(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){return ei(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},Oh.prototype.onWatchStreamClose=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return void 0===e&&jr(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Hl.Unknown),[2]}))}))},Oh.prototype.onWatchStreamChange=function(e,t){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Hl.Online),e instanceof Ch&&e.state===Eh.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Sh?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Ih?this.watchChangeAggregator.handleExistenceFilter(e):(jr(e instanceof Ch,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(uo.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),0<=t.compareTo(n)?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},Oh.prototype.raiseWatchSnapshot=function(e){var t=this;jr(!e.isEqual(uo.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return ei(n.targetChanges,(function(n,r){if(0<r.resumeToken.length){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(Kr(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new zu(n.target,e,$u.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},Oh.prototype.handleTargetError=function(e){var t=this;jr(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return a(t,void 0,void 0,(function(){return s(this,(function(t){return Jr(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},Oh.prototype.fillWritePipeline=function(){return a(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},Oh.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},Oh.prototype.outstandingWrites=function(){return this.writePipeline.length},Oh.prototype.addToWritePipeline=function(e){jr(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},Oh.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},Oh.prototype.startWriteStream=function(){jr(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},Oh.prototype.onWriteStreamOpen=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},Oh.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}})).catch(ac)},Oh.prototype.onMutationResult=function(e,t){var n=this;jr(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Vo.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},Oh.prototype.onWriteStreamClose=function(e){return a(this,void 0,void 0,(function(){var t=this;return s(this,(function(n){return void 0===e&&jr(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]:[2]}))}))},Oh.prototype.handleHandshakeError=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return oh(e.code)?(Fr(Rh,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=Kr(),[2,this.localStore.setLastStreamToken(Kr()).catch(ac)]):[2]}))}))},Oh.prototype.handleWriteError=function(e){return a(this,void 0,void 0,(function(){var t,n=this;return s(this,(function(r){return function(e){return oh(e)&&e!==Qr.ABORTED}(e.code)?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2]}))}))},Oh.prototype.createTransaction=function(){return new Zl(this.datastore)},Oh.prototype.restartNetwork=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Hl.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},Oh.prototype.handleCredentialChange=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(Fr(Rh,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},Oh.prototype.applyPrimaryState=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Hl.Unknown),t.label=4;case 4:return[2]}}))}))},Oh);function Oh(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return a(o,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(Fr(Rh,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new rh(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}var Ph=(Object.defineProperty(Vh.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(Vh.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),Vh.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},Vh.prototype._compareTo=function(e){return Si(this._lat,e._lat)||Si(this._long,e._long)},Vh);function Vh(e,t){if(ii("GeoPoint",arguments,2),si("GeoPoint","number",1,e),si("GeoPoint","number",2,t),!isFinite(e)||e<-90||90<e)throw new Hr(Qr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||180<t)throw new Hr(Qr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}var Lh=($h.prototype.applyToLocalView=function(e,t){return new bs(t,e)},$h.prototype.applyToRemoteDocument=function(e,t){return t},$h.prototype.computeBaseValue=function(e){return null},$h.prototype.isEqual=function(e){return e instanceof $h},$h.instance=new $h,$h);function $h(){}var Fh=(qh.prototype.applyToLocalView=function(e,t){return this.apply(e)},qh.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},qh.prototype.apply=function(e){for(var t=Wh(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Os(t)},qh.prototype.computeBaseValue=function(e){return null},qh.prototype.isEqual=function(e){return e instanceof qh&&Ii(e.elements,this.elements)},qh);function qh(e){this.elements=e}var Bh=(Uh.prototype.applyToLocalView=function(e,t){return this.apply(e)},Uh.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},Uh.prototype.apply=function(e){for(var t=Wh(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Os(t)},Uh.prototype.computeBaseValue=function(e){return null},Uh.prototype.isEqual=function(e){return e instanceof Uh&&Ii(e.elements,this.elements)},Uh);function Uh(e){this.elements=e}var jh=(zh.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof ss&&this.operand instanceof ss){var r=n.internalValue+this.operand.internalValue;return new ss(r)}return r=n.internalValue+this.operand.internalValue,new ls(r)},zh.prototype.applyToRemoteDocument=function(e,t){return jr(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},zh.prototype.computeBaseValue=function(e){return e instanceof rs?e:new ss(0)},zh.prototype.isEqual=function(e){return e instanceof zh&&this.operand.isEqual(e.operand)},zh);function zh(e){this.operand=e}function Wh(e){return e instanceof Os?e.internalValue.slice():[]}var Kh=(Gh.prototype.isEqual=function(e){return e&&e.count===this.count},Gh);function Gh(e){this.count=e}var Qh,Hh,Yh=((Qh={})[sl.ASCENDING.name]="ASCENDING",Qh[sl.DESCENDING.name]="DESCENDING",Qh),Xh=((Hh={})[Bc.LESS_THAN.name]="LESS_THAN",Hh[Bc.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Hh[Bc.GREATER_THAN.name]="GREATER_THAN",Hh[Bc.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Hh[Bc.EQUAL.name]="EQUAL",Hh[Bc.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Hh[Bc.IN.name]="IN",Hh[Bc.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",Hh),Jh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zh(e,t){jr(!Mc(e),t+" is missing")}function ef(e){return"number"==typeof e?e:"string"==typeof e?Number(e):Ur("can't parse "+e)}var tf=(nf.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},nf.prototype.unsafeCastProtoByteString=function(e){return e},nf.prototype.fromRpcStatus=function(e){var t=void 0===e.code?Qr.UNKNOWN:ah(e.code);return new Hr(t,e.message||"")},nf.prototype.toInt32Value=function(e){return this.options.useProto3Json||Mc(e)?e:{value:e}},nf.prototype.fromInt32Value=function(e){var t;return Mc(t="object"==typeof e?e.value:e)?null:t},nf.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},nf.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);jr(!!e,"Cannot deserialize null or undefined timestamp.");var t=ef(e.seconds||"0"),n=e.nanos||0;return new ao(t,n)},nf.prototype.fromIso8601String=function(e){var t=0,n=Jh.exec(e);if(jr(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new ao(o,t)},nf.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},nf.prototype.fromBlob=function(e){return"string"==typeof e?(jr(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Ai.fromBase64String(e)):(jr(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Ai.fromUint8Array(e))},nf.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},nf.prototype.fromVersion=function(e){return jr(!!e,"Trying to deserialize version that isn't set"),uo.fromTimestamp(this.fromTimestamp(e))},nf.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},nf.prototype.fromResourceName=function(e){var t=Bi.fromString(e);return jr(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},nf.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},nf.prototype.fromName=function(e){var t=this.fromResourceName(e);return jr(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),jr(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new Gi(this.extractLocalPathFromResourceName(t))},nf.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},nf.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?Bi.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(nf.prototype,"encodedDatabaseId",{get:function(){return new Bi(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),nf.prototype.fullyQualifiedPrefixPath=function(e){return new Bi(["projects",e.projectId,"databases",e.database])},nf.prototype.extractLocalPathFromResourceName=function(e){return jr(4<e.length&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},nf.prototype.isValidResourceName=function(e){return 4<=e.length&&"projects"===e.get(0)&&"databases"===e.get(2)},nf.prototype.toValue=function(e){if(e instanceof Xa)return{nullValue:"NULL_VALUE"};if(e instanceof es)return{booleanValue:e.value()};if(e instanceof ss)return{integerValue:""+e.value()};if(e instanceof ls){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof ds?{stringValue:e.value()}:e instanceof _s?{mapValue:this.toMapValue(e)}:e instanceof Os?{arrayValue:this.toArrayValue(e)}:e instanceof gs?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof As?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Ts?{bytesValue:this.toBytes(e.value())}:e instanceof Cs?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:Ur("Unknown FieldValue "+JSON.stringify(e))},nf.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return Xa.INSTANCE;if("booleanValue"in e)return es.of(e.booleanValue);if("integerValue"in e)return new ss(ef(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return ls.NAN;if("Infinity"===e.doubleValue)return ls.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return ls.NEGATIVE_INFINITY}return new ls(e.doubleValue)}if("stringValue"in e)return new ds(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){Zh(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new Os(n.map((function(e){return t.fromValue(e)})))}if("timestampValue"in e)return Zh(e.timestampValue,"timestampValue"),new gs(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){Zh(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new As(new Ph(r,i))}if("bytesValue"in e){Zh(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new Ts(o)}if("referenceValue"in e){Zh(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new Mi(a.get(1),a.get(3)),u=new Gi(this.extractLocalPathFromResourceName(a));return new Cs(s,u)}return Ur("Unknown Value proto "+JSON.stringify(e))},nf.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},nf.prototype.toDocument=function(e){return jr(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},nf.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new Fs(r,i,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},nf.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},nf.prototype.fromFields=function(e){var t=this,n=e,r=_s.EMPTY;return ti(n,(function(e,n){r=r.set(new Wi([e]),t.fromValue(n))})),r},nf.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},nf.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},nf.prototype.fromFound=function(e){var t=this;jr(!!e.found,"Tried to deserialize a found document from a missing document."),Zh(e.found.name,"doc.found.name"),Zh(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new Fs(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},nf.prototype.fromMissing=function(e){jr(!!e.missing,"Tried to deserialize a missing document from a found document."),jr(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Us(t,n)},nf.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):Ur("invalid batch get response: "+JSON.stringify(e))},nf.prototype.toWatchTargetChangeState=function(e){switch(e){case Eh.Added:return"ADD";case Eh.Current:return"CURRENT";case Eh.NoChange:return"NO_CHANGE";case Eh.Removed:return"REMOVE";case Eh.Reset:return"RESET";default:return Ur("Unknown WatchTargetChangeState: "+e)}},nf.prototype.toTestWatchChange=function(e){if(e instanceof Ih)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Sh){if(e.newDoc instanceof Fs){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Us)return t=e.newDoc,{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof Ch){var n=void 0;return e.cause&&(n={code:function(e){if(void 0===e)return th.OK;switch(e){case Qr.OK:return th.OK;case Qr.CANCELLED:return th.CANCELLED;case Qr.UNKNOWN:return th.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return th.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return th.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return th.INTERNAL;case Qr.UNAVAILABLE:return th.UNAVAILABLE;case Qr.UNAUTHENTICATED:return th.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return th.INVALID_ARGUMENT;case Qr.NOT_FOUND:return th.NOT_FOUND;case Qr.ALREADY_EXISTS:return th.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return th.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return th.FAILED_PRECONDITION;case Qr.ABORTED:return th.ABORTED;case Qr.OUT_OF_RANGE:return th.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return th.UNIMPLEMENTED;case Qr.DATA_LOSS:return th.DATA_LOSS;default:return Ur("Unknown status code: "+e)}}(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return Ur("Unrecognized watch change: "+JSON.stringify(e))},nf.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){Zh(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new Ch(r,i,o,s||null)}else if("documentChange"in e){Zh(e.documentChange,"documentChange");var u=e.documentChange;Zh(u.document,"documentChange.name"),Zh(u.document.name,"documentChange.document.name"),Zh(u.document.updateTime,"documentChange.document.updateTime");var c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=new Fs(c,l,{},void 0,u.document,(function(e){return n.fromValue(e)})),f=u.targetIds||[],d=u.removedTargetIds||[];t=new Sh(f,d,h.key,h)}else if("documentDelete"in e){Zh(e.documentDelete,"documentDelete");var p=e.documentDelete;Zh(p.document,"documentDelete.document"),c=this.fromName(p.document),l=p.readTime?this.fromVersion(p.readTime):uo.forDeletedDoc(),h=new Us(c,l),d=p.removedTargetIds||[],t=new Sh([],d,h.key,h)}else if("documentRemove"in e){Zh(e.documentRemove,"documentRemove");var m=e.documentRemove;Zh(m.document,"documentRemove"),c=this.fromName(m.document),d=m.removedTargetIds||[],t=new Sh([],d,c,null)}else{if(!("filter"in e))return Ur("Unknown change type "+JSON.stringify(e));Zh(e.filter,"filter");var g=e.filter;Zh(g.targetId,"filter.targetId");var y=g.count||0,v=new Kh(y),b=g.targetId;t=new Ih(b,v)}return t},nf.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Eh.NoChange:"ADD"===e?Eh.Added:"REMOVE"===e?Eh.Removed:"CURRENT"===e?Eh.Current:"RESET"===e?Eh.Reset:Ur("Got unexpected TargetChange.state: "+e)},nf.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return uo.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?uo.MIN:t.readTime?this.fromVersion(t.readTime):uo.MIN},nf.prototype.toMutation=function(e){var t,n=this;if(e instanceof Aa)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof La)t={delete:this.toName(e.key)};else if(e instanceof _a)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else if(e instanceof Oa)t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}};else{if(!(e instanceof za))return Ur("Unknown mutation type "+e.type);t={verify:this.toName(e.key)}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},nf.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):Sa.NONE;if(e.update){Zh(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new _a(r,i,o,n)}return new Aa(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new La(r,n);if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return jr(!0===n.exists,'Transforms only support precondition "exists == true"'),new Oa(r,a)}return e.verify?(r=this.fromName(e.verify),new za(r,n)):Ur("unknown mutation proto: "+JSON.stringify(e))},nf.prototype.toPrecondition=function(e){return jr(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ur("Unknown precondition")},nf.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?Sa.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?Sa.exists(e.exists):Sa.NONE},nf.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t);r.isEqual(uo.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&0<e.transformResults.length&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new Ta(r,i)},nf.prototype.fromWriteResults=function(e,t){var n=this;return e&&0<e.length?(jr(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},nf.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof Lh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof Bh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof jh)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw Ur("Unknown transform: "+e.transform)},nf.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)jr("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=Lh.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Fh(r.map((function(e){return t.fromValue(e)})))}else if("removeAllFromArray"in e)r=e.removeAllFromArray.values||[],n=new Bh(r.map((function(e){return t.fromValue(e)})));else if("increment"in e){var i=this.fromValue(e.increment);jr(i instanceof rs,"NUMERIC_ADD transform requires a NumberValue"),n=new jh(i)}else Ur("Unknown transform proto: "+JSON.stringify(e));var o=Wi.fromServerFormat(e.fieldPath);return new va(o,n)},nf.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},nf.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;jr(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return Fc.atPath(this.fromQueryPath(n)).toTarget()},nf.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(jr(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(jr(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},nf.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){jr(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Fc(t,i,s,a,u,Pc.First,c,l).toTarget()},nf.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},nf.prototype.toLabel=function(e){switch(e){case $u.Listen:return null;case $u.ExistenceFilterMismatch:return"existence-filter-mismatch";case $u.LimboResolution:return"limbo-document";default:return Ur("Unrecognized query purpose: "+e)}},nf.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,0<e.resumeToken.length&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},nf.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof zc?t.toUnaryOrFieldFilter(e):Ur("Unrecognized filter: "+JSON.stringify(e))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},nf.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):Ur("Unknown filter: "+JSON.stringify(e)):[]},nf.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},nf.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},nf.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},nf.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new cl(r,n)},nf.prototype.toDirection=function(e){return Yh[e.name]},nf.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return sl.ASCENDING;case"DESCENDING":return sl.DESCENDING;default:return}},nf.prototype.toOperatorName=function(e){return Xh[e.name]},nf.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return Bc.EQUAL;case"GREATER_THAN":return Bc.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Bc.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Bc.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Bc.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Bc.ARRAY_CONTAINS;case"IN":return Bc.IN;case"ARRAY_CONTAINS_ANY":return Bc.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return Ur("Unspecified operator");default:return Ur("Unknown operator")}},nf.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},nf.prototype.fromFieldPathReference=function(e){return Wi.fromServerFormat(e.fieldPath)},nf.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},nf.prototype.fromPropertyOrder=function(e){return new hl(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},nf.prototype.fromFieldFilter=function(e){return zc.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},nf.prototype.toUnaryOrFieldFilter=function(e){if(e.op===Bc.EQUAL){if(e.value.isEqual(ls.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(Xa.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},nf.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return zc.create(t,Bc.EQUAL,ls.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return zc.create(n,Bc.EQUAL,Xa.INSTANCE);case"OPERATOR_UNSPECIFIED":return Ur("Unspecified filter");default:return Ur("Unknown filter")}},nf.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},nf.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return Wi.fromServerFormat(e)}));return ga.fromArray(t)},nf);function nf(e,t){this.databaseId=e,this.options=t}var rf=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},of=(af.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new rf,this.queries.set(t,r)),r.listeners.push(e),jr(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),!r.viewSnap||e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(t).then((function(e){return r.targetId=e})):Promise.resolve(r.targetId)},af.prototype.unlisten=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i;return s(this,(function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&0<=(i=r.listeners.indexOf(e))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},af.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].onViewSnapshot(i)&&(t=!0);a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},af.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},af.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(e)&&(t=!0)})),t&&this.raiseSnapshotsInSyncEvent()},af.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},af.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},af.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},af);function af(e){this.syncEngine=e,this.queries=new Gs((function(e){return e.canonicalId()})),this.onlineState=Hl.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}var sf=(uf.prototype.onViewSnapshot=function(e){if(jr(0<e.docChanges.length||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==sh.Metadata&&t.push(i)}e=new mh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},uf.prototype.onError=function(e){this.queryObserver.error(e)},uf.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},uf.prototype.shouldRaiseInitialEvent=function(e,t){if(jr(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Hl.Offline;return this.options.waitForSyncWhenOnline&&n?(jr(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Hl.Offline},uf.prototype.shouldRaiseEvent=function(e){if(0<e.docChanges.length)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},uf.prototype.raiseInitialEvent=function(e){jr(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=mh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},uf);function uf(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Hl.Unknown,this.options=n||{}}var cf=(lf.fromSnapshot=function(e,t){for(var n=_o(),r=_o(),i=0,o=t.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case sh.Added:n=n.add(a.doc.key);break;case sh.Removed:r=r.add(a.doc.key)}}return new lf(e,t.fromCache,n,r)},lf);function lf(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}var hf=function(e){this.key=e},ff=function(e){this.key=e},df=(Object.defineProperty(pf.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),pf.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new dh,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,c=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=t instanceof Fs?t:null;h&&(jr(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:sh.Metadata,doc:h}),p=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:sh.Modified,doc:h}),p=!0,(u&&0<n.query.docComparator(h,u)||c&&n.query.docComparator(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:sh.Added,doc:h}),p=!0):l&&!h&&(r.track({type:sh.Removed,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(o=h?(a=a.add(h),d?o.add(e):o.delete(e)):(a=a.delete(e),o.delete(e)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;a.size>this.query.limit;){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:sh.Removed,doc:l})}return jr(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},pf.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},pf.prototype.applyChanges=function(e,t,n){var r=this;jr(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return function(e,t){function n(e){switch(e){case sh.Added:return 1;case sh.Modified:case sh.Metadata:return 2;case sh.Removed:return 0;default:return Ur("Unknown ChangeType: "+e)}}return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)})),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?ch.Synced:ch.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new mh(this.query,e.documentSet,i,o,e.mutatedKeys,s===ch.Local,u,!1),limboChanges:a}:{limboChanges:a}},pf.prototype.applyOnlineStateChange=function(e){return this.current&&e===Hl.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new dh,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},pf.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},pf.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return jr(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},pf.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=_o(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new ff(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new hf(e))})),n},pf.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=_o();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},pf.prototype.computeInitialSnapshot=function(){return mh.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===ch.Local)},pf);function pf(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=_o(),this.mutatedKeys=_o(),this.documentSet=new hh(e.docComparator.bind(e))}var mf=(gf.prototype.run=function(){this.runWithBackOff()},gf.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return a(e,void 0,void 0,(function(){var e,t,n=this;return s(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},gf.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!Mc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},gf.prototype.handleTransactionError=function(e){var t=this;0<this.retries&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},gf.prototype.isRetryableTransactionError=function(e){if("FirebaseError"!==e.name)return!1;var t=e.code;return"aborted"===t||"failed-precondition"===t||!oh(t)},gf);function gf(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new Ol(this.asyncQueue,Hi.RetryTransaction)}var yf="SyncEngine",vf=function(e,t,n){this.query=e,this.targetId=t,this.view=n},bf=function(e){this.key=e,this.receivedDocument=!1},wf=(Object.defineProperty(Ef.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),Ef.prototype.subscribe=function(e){jr(null!==e,"SyncEngine listener cannot be null"),jr(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},Ef.prototype.listen=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o;return s(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(e,t,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},Ef.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i,o,a,u,c;return s(this,(function(s){switch(s.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=s.sent(),i=new df(e,r.remoteKeys),o=i.computeDocChanges(r.documents),a=bh.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==Hl.Offline),jr(0===(u=i.applyChanges(o,!0===this.isPrimary,a)).limboChanges.length,"View returned limbo docs before target ack from the server."),jr(!!u.snapshot,"applyChanges for new view should always return a snapshot"),c=new vf(e,t,i),this.queryViewsByQuery.set(e,c),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,u.snapshot]}}))}))},Ef.prototype.synchronizeViewAndComputeSnapshot=function(e){return a(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},Ef.prototype.unlisten=function(e){return a(this,void 0,void 0,(function(){var t,n,r=this;return s(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),jr(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),1<(n=this.queriesByTarget[t.targetId]).length?(this.queriesByTarget[t.targetId]=n.filter((function(t){return!t.isEqual(e)})),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then((function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)})).catch(ac)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},Ef.prototype.write=function(e,t){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},Ef.prototype.runTransaction=function(e,t,n){new mf(e,this.remoteStore,t,n).run()},Ef.prototype.applyRemoteEvent=function(e){return a(this,void 0,void 0,(function(){var t,n=this;return s(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),ti(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(jr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<t.addedDocuments.size?r.receivedDocument=!0:0<t.modifiedDocuments.size?jr(r.receivedDocument,"Received change for limbo target document without add."):0<t.removedDocuments.size&&(jr(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,ac(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},Ef.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===Xl.RemoteStore||!this.isPrimary&&t===Xl.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);jr(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},Ef.prototype.rejectListen=function(e,t){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u=this;return s(this,(function(s){switch(s.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new lo(Gi.comparator)).insert(r,new Us(r,uo.forDeletedDoc())),o=_o().add(r),a=new yh(uo.MIN,{},new bo(Si),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then((function(){return u.removeAndCleanupTarget(e,t)})).catch(ac)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))},Ef.prototype.applyBatchState=function(e,t,n){return a(this,void 0,void 0,(function(){var r;return s(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(Fr(yf,"Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):Ur("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},Ef.prototype.applySuccessfulWrite=function(e){return a(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,ac(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},Ef.prototype.rejectFailedWrite=function(e,t){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,ac(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},Ef.prototype.registerPendingWritesCallback=function(e){return a(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||Fr(yf,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?e.resolve():((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n)),[2]}}))}))},Ef.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},Ef.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new Hr(Qr.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},Ef.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n=(n=n||new lo(Si)).insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},Ef.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(jr(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},Ef.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),jr(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),a.forEach((function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)}))}},Ef.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},Ef.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof hf?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof ff?(Fr(yf,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):Ur("Unknown limbo change: "+JSON.stringify(i))}},Ef.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){Fr(yf,"New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=Fc.atPath(t.path);this.limboResolutionsByTarget[n]=new bf(t),this.remoteStore.listen(new zu(r.toTarget(),n,$u.LimboResolution,Pi.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},Ef.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},Ef.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return a(this,void 0,void 0,(function(){var n,r,i,o=this;return s(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query,!1).then((function(e){var n=e.documents;return s.view.computeDocChanges(n,t)})):t})).then((function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=cf.fromSnapshot(s.targetId,a.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},Ef.prototype.assertSubscribed=function(e){jr(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},Ef.prototype.handleCredentialChange=function(e){return a(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},Ef.prototype.applyPrimaryState=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o,a,u,c=this;return s(this,(function(s){switch(s.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return s.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=s.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],u=Promise.resolve(),ei(this.queriesByTarget,(function(e,t){c.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then((function(){return c.removeAndCleanupTarget(e),c.localStore.releaseTarget(e,!0)})),c.remoteStore.unlisten(e)})),[4,u]);case 4:return s.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return s.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:s.sent(),s.label=7;case 7:return[2]}}))}))},Ef.prototype.resetLimboDocuments=function(){var e=this;ei(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new lo(Gi.comparator)},Ef.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o,a,u,c,l,h,f,d,p;return s(this,(function(s){switch(s.label){case 0:t=[],n=[],r=0,i=e,s.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(u=this.queriesByTarget[o])&&0!==u.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return s.sent(),[4,this.localStore.allocateTarget(u[0].toTarget())];case 3:a=s.sent(),c=0,l=u,s.label=4;case 4:return c<l.length?(h=l[c],jr(!!(f=this.queryViewsByQuery.get(h)),"No query view found for "+h),[4,this.synchronizeViewAndComputeSnapshot(f)]):[3,7];case 5:(d=s.sent()).snapshot&&n.push(d.snapshot),s.label=6;case 6:return c++,[3,4];case 7:return[3,12];case 8:return jr(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return jr(!!(p=s.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(p)];case 10:return a=s.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(p),o,!1)];case 11:s.sent(),s.label=12;case 12:t.push(a),s.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},Ef.prototype.synthesizeTargetToQuery=function(e){return new Fc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,Pc.First,e.startAt,e.endAt)},Ef.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},Ef.prototype.applyTargetState=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i;return s(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return Fr(yf,"Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=yh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:Ur("Unexpected target state: "+t),o.label=7;case 7:return[2]}}))}))},Ef.prototype.applyActiveTargetsChange=function(e,t){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u,c,l,h,f=this;return s(this,(function(d){switch(d.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,d.label=1;case 1:return n<r.length?(h=r[n],jr(!this.queriesByTarget[h],"Trying to add an already active target"),[4,this.localStore.getTarget(h)]):[3,6];case 2:return jr(!!(i=d.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=d.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:d.sent(),this.remoteStore.listen(o),d.label=5;case 5:return n++,[3,1];case 6:a=function(e){return s(this,(function(t){switch(t.label){case 0:return u.queriesByTarget[e]?[4,u.localStore.releaseTarget(e,!1).then((function(){f.remoteStore.unlisten(e),f.removeAndCleanupTarget(e)})).catch(ac)]:[2,"continue"];case 1:return t.sent(),[2]}}))},u=this,c=0,l=t,d.label=7;case 7:return c<l.length?(h=l[c],[5,a(h)]):[3,10];case 8:d.sent(),d.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},Ef.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},Ef.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},Ef.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return _o().add(t.key);var n=_o(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);jr(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},Ef);function Ef(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Gs((function(e){return e.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new lo(Gi.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Zu,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=ua.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Hl.Unknown}var Tf=(Sf.prototype.isAuthenticated=function(){return null!=this.uid},Sf.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},Sf.prototype.isEqual=function(e){return e.uid===this.uid},Sf.UNAUTHENTICATED=new Sf(null),Sf.GOOGLE_CREDENTIALS=new Sf("google-credentials-uid"),Sf.FIRST_PARTY=new Sf("first-party-uid"),Sf);function Sf(e){this.uid=e}var If="firestore_clients";function Cf(e,t){return jr(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),If+"_"+e+"_"+t}var kf="firestore_mutations";function Df(e,t,n){var r=kf+"_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}var Af="firestore_targets";function Nf(e,t){return Af+"_"+e+"_"+t}var xf="SharedClientState",_f=(Rf.fromWebStorageEntry=function(e,t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Hr(r.error.code,r.error.message)),i?new Rf(e,t,r.state,o):(qr(xf,"Failed to parse mutation state for ID '"+t+"': "+n),null)},Rf.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},Rf);function Rf(e,t,n,r){this.user=e,this.batchId=t,this.state=n,jr(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}var Mf=(Of.fromWebStorageEntry=function(e,t){var n=JSON.parse(t),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Hr(n.error.code,n.error.message)),r?new Of(e,n.state,i):(qr(xf,"Failed to parse target state for ID '"+e+"': "+t),null)},Of.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},Of);function Of(e,t,n){this.targetId=e,this.state=t,jr(void 0!==(this.error=n)==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}var Pf=(Vf.fromWebStorageEntry=function(e,t){for(var n=JSON.parse(t),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Mo(),o=0;r&&o<n.activeTargetIds.length;++o)r=Oc(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Vf(e,i):(qr(xf,"Failed to parse client data for instance '"+e+"': "+t),null)},Vf);function Vf(e,t){this.clientId=e,this.activeTargetIds=t}var Lf=($f.fromWebStorageEntry=function(e){var t=JSON.parse(e);return"object"==typeof t&&t.onlineState in Hl&&"string"==typeof t.clientId?new $f(t.clientId,Hl[t.onlineState]):(qr(xf,"Failed to parse online state: "+e),null)},$f);function $f(e,t){this.clientId=e,this.onlineState=t}var Ff=(qf.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},qf.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},qf.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},qf);function qf(){this.activeTargetIds=Mo()}var Bf=(Uf.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},Uf.prototype.start=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,u,c,l,h,f=this;return s(this,(function(s){switch(s.label){case 0:return jr(!this.started,"WebStorageSharedClientState already started"),jr(null!==this.syncEngine,"syncEngine property must be set before calling start()"),jr(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=s.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(Cf(this.persistenceKey,r)))&&(o=Pf.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)h=l[c],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},Uf.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},Uf.prototype.getAllActiveQueryTargets=function(){var e=Mo();return ti(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},Uf.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},Uf.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},Uf.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},Uf.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Nf(this.persistenceKey,e));if(n){var r=Mf.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},Uf.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},Uf.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},Uf.prototype.clearQueryState=function(e){this.removeItem(Nf(this.persistenceKey,e))},Uf.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},Uf.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},Uf.prototype.setOnlineState=function(e){this.persistOnlineState(e)},Uf.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},Uf.prototype.getItem=function(e){var t=this.storage.getItem(e);return Fr(xf,"READ",e,t),t},Uf.prototype.setItem=function(e,t){Fr(xf,"SET",e,t),this.storage.setItem(e,t)},Uf.prototype.removeItem=function(e){Fr(xf,"REMOVE",e),this.storage.removeItem(e)},Uf.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(Fr(xf,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void qr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return a(t,void 0,void 0,(function(){var t,n,r,i,o,a;return s(this,(function(s){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(jr(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(e){var t=Pi.INVALID;if(null!=e)try{var n=JSON.parse(e);jr("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){qr(xf,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==Pi.INVALID&&this.sequenceNumberHandler(a));return[2]}))}))}))}},Object.defineProperty(Uf.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),Uf.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},Uf.prototype.persistMutationState=function(e,t,n){var r=new _f(this.currentUser,e,t,n),i=Df(this.persistenceKey,this.currentUser,e);this.setItem(i,r.toWebStorageJSON())},Uf.prototype.removeMutationState=function(e){var t=Df(this.persistenceKey,this.currentUser,e);this.removeItem(t)},Uf.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Hl[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},Uf.prototype.persistQueryTargetState=function(e,t,n){var r=Nf(this.persistenceKey,e),i=new Mf(e,t,n);this.setItem(r,i.toWebStorageJSON())},Uf.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},Uf.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return jr(null!==n,"Cannot parse client state key '"+e+"'"),Pf.fromWebStorageEntry(n,t)},Uf.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);jr(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return _f.fromWebStorageEntry(new Tf(i),r,t)},Uf.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);jr(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Mf.fromWebStorageEntry(r,t)},Uf.prototype.fromWebStorageOnlineState=function(e){return Lf.fromWebStorageEntry(e)},Uf.prototype.handleMutationBatchEvent=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return e.user.uid!==this.currentUser.uid?(Fr(xf,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},Uf.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},Uf.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],u=[];return i.forEach((function(e){return a(n,void 0,void 0,(function(){return s(this,(function(t){return r.has(e)||o.push(e),[2]}))}))})),r.forEach((function(e){return a(n,void 0,void 0,(function(){return s(this,(function(t){return i.has(e)||u.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,u)},Uf.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},Uf);function Uf(e,t,n,r,i){if(this.queue=e,this.platform=t,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!Uf.isAvailable(this.platform))throw new Hr(Qr.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=Cf(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.activeClients[this.localClientId]=new Ff,this.clientStateKeyRe=new RegExp("^"+If+"_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+kf+"_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Af+"_"+o+"_(\\d+)$"),this.onlineStateKey=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}var jf=(zf.prototype.addPendingMutation=function(e){},zf.prototype.updateMutationState=function(e,t,n){},zf.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},zf.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},zf.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},zf.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},zf.prototype.clearQueryState=function(e){delete this.queryState[e]},zf.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},zf.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},zf.prototype.start=function(){return this.localState=new Ff,Promise.resolve()},zf.prototype.handleUserChange=function(e,t,n){},zf.prototype.setOnlineState=function(e){},zf.prototype.shutdown=function(){},zf.prototype.writeSequenceNumber=function(e){},zf);function zf(){this.localState=new Ff,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}var Wf="FirestoreClient",Kf=(Gf.prototype.lruParams=function(){return hc.withCacheSize(this.cacheSizeBytes)},Gf);function Gf(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}var Qf=function(){},Hf=(Yf.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new Xi,r=new Xi,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},Yf.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},Yf.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Kf?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},Yf.prototype.canFallback=function(e){return e instanceof Hr?e.code===Qr.FAILED_PRECONDITION||e.code===Qr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},Yf.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Hr(Qr.FAILED_PRECONDITION,"The client has already been terminated.")},Yf.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Tc.buildStoragePrefix(this.databaseInfo),i=new tf(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return a(n,void 0,void 0,(function(){var n,o;return s(this,(function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!Bf.isAvailable(this.platform))throw new Hr(Qr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Bf(this.asyncQueue,this.platform,r,this.clientId,e):new jf,[4,Tc.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),[2,(this.persistence=o).referenceDelegate.garbageCollector]}}))}))}))},Yf.prototype.startMemoryPersistence=function(){return this.persistence=Cl.createEagerPersistence(this.clientId),this.sharedClientState=new jf,Promise.resolve(null)},Yf.prototype.initializeRest=function(e,t){var n=this;return Fr(Wf,"Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return a(n,void 0,void 0,(function(){var n,i,o,u,c,l,h=this;return s(this,(function(f){switch(f.label){case 0:return n=new ml,this.localStore=new ic(this.persistence,n,e),[4,this.localStore.start()];case 1:return f.sent(),t&&(this.lruScheduler=new dc(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),u=new Gl(this.asyncQueue,r,this.credentials,o),c=function(e){return h.syncEngine.applyOnlineStateChange(e,Xl.RemoteStore)},l=function(e){return h.syncEngine.applyOnlineStateChange(e,Xl.SharedClientState)},this.remoteStore=new Mh(this.localStore,u,this.asyncQueue,c,i),this.syncEngine=new wf(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=l,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new of(this.syncEngine),[4,this.sharedClientState.start()];case 2:return f.sent(),[4,this.remoteStore.start()];case 3:return f.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return a(h,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return f.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return a(h,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return f.sent(),[2]}}))}))}))},Yf.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),Fr(Wf,"Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},Yf.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},Yf.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return a(e,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},Yf.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new Xi;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},Yf.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new sf(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},Yf.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},Yf.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof Fs)return e;if(e instanceof Us)return null;throw new Hr(Qr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},Yf.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return a(t,void 0,void 0,(function(){var t,n,r;return s(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new df(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},Yf.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new Xi;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},Yf.prototype.databaseId=function(){return this.databaseInfo.databaseId},Yf.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},Yf.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(Yf.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),Yf.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new Xi;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},Yf);function Yf(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=Ei.newId()}var Xf=(Jf.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},Jf.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},Jf.prototype.mute=function(){this.muted=!0},Jf.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},Jf);function Jf(e){this.observer=e,this.muted=!1}var Zf=(ed.documentId=function(){return ed._DOCUMENT_ID},ed.prototype.isEqual=function(e){if(!(e instanceof ed))throw yi("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},ed._DOCUMENT_ID=new ed(Wi.keyField().canonicalString()),ed);function ed(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<1)throw new Hr(Qr.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+wi(1,"element")+".")}(0,e);for(var n=0;n<e.length;++n)if(si("FieldPath","string",n,e[n]),0===e[n].length)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wi(e)}var td=new RegExp("[~\\*/\\[\\]]"),nd=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},rd=(id.prototype.getToken=function(){return Promise.resolve(null)},id.prototype.invalidateToken=function(){},id.prototype.setChangeListener=function(e){jr(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(Tf.UNAUTHENTICATED)},id.prototype.removeChangeListener=function(){jr(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},id);function id(){this.changeListener=null}var od=(ad.prototype.getToken=function(){var e=this;jr(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new Hr(Qr.ABORTED,"getToken aborted due to token change.");return n?(jr("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new nd(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},ad.prototype.invalidateToken=function(){this.forceRefresh=!0},ad.prototype.setChangeListener=function(e){jr(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},ad.prototype.removeChangeListener=function(){jr(null!=this.tokenListener,"removeChangeListener() called twice"),jr(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},ad.prototype.getUser=function(){var e=this.auth&&this.auth.getUid();return jr(null===e||"string"==typeof e,"Received invalid UID: "+e),new Tf(e)},ad);function ad(e){var t=this;this.tokenListener=null,this.currentUser=Tf.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),e.get().then((function(e){t.auth=e,t.tokenListener&&t.auth.addAuthTokenListener(t.tokenListener)}),(function(){})))}var sd=(Object.defineProperty(ud.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),ud);function ud(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Tf.FIRST_PARTY}var cd=(ld.prototype.getToken=function(){return Promise.resolve(new sd(this.gapi,this.sessionIndex))},ld.prototype.setChangeListener=function(e){e(Tf.FIRST_PARTY)},ld.prototype.removeChangeListener=function(){},ld.prototype.invalidateToken=function(){},ld);function ld(e,t){this.gapi=e,this.sessionIndex=t}function hd(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var fd=(dd.delete=function(){return ri("FieldValue.delete",arguments),md.instance},dd.serverTimestamp=function(){return ri("FieldValue.serverTimestamp",arguments),vd.instance},dd.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return oi("FieldValue.arrayUnion",arguments,1),new Ed(e)},dd.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return oi("FieldValue.arrayRemove",arguments,1),new Id(e)},dd.increment=function(e){return si("FieldValue.increment","number",1,e),ii("FieldValue.increment",arguments,1),new Dd(e)},dd.prototype.isEqual=function(e){return this===e},dd);function dd(e){this._methodName=e}var pd,md=(n(gd,pd=fd),gd.instance=new gd,gd);function gd(){return pd.call(this,"FieldValue.delete")||this}var yd,vd=(n(bd,yd=fd),bd.instance=new bd,bd);function bd(){return yd.call(this,"FieldValue.serverTimestamp")||this}var wd,Ed=(n(Td,wd=fd),Td);function Td(e){var t=wd.call(this,"FieldValue.arrayUnion")||this;return t._elements=e,t}var Sd,Id=(n(Cd,Sd=fd),Cd);function Cd(e){var t=Sd.call(this,"FieldValue.arrayRemove")||this;return t._elements=e,t}var kd,Dd=(n(Ad,kd=fd),Ad);function Ad(e){var t=kd.call(this,"FieldValue.increment")||this;return t._operand=e,t}var Nd=Xr(fd,"Use FieldValue.<field>() instead."),xd=/^__.*__$/,_d=(Rd.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new _a(e,this.data,this.fieldMask,t)):n.push(new Aa(e,this.data,t)),0<this.fieldTransforms.length&&n.push(new Oa(e,this.fieldTransforms)),n},Rd);function Rd(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}var Md,Od,Pd=(Vd.prototype.toMutations=function(e,t){var n=[new _a(e,this.data,this.fieldMask,t)];return 0<this.fieldTransforms.length&&n.push(new Oa(e,this.fieldTransforms)),n},Vd);function Vd(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function Ld(e){switch(e){case Md.Set:case Md.MergeSet:case Md.Update:return!0;case Md.Argument:case Md.ArrayArgument:return!1;default:throw Ur("Unexpected case for UserDataSource: "+e)}}(Od=Md=Md||{})[Od.Set=0]="Set",Od[Od.Update=1]="Update",Od[Od.MergeSet=2]="MergeSet",Od[Od.Argument=3]="Argument",Od[Od.ArrayArgument=4]="ArrayArgument";var $d=(Fd.prototype.childContextForField=function(e){var t=null==this.path?null:this.path.child(e),n=new Fd(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(e),n},Fd.prototype.childContextForFieldPath=function(e){var t=null==this.path?null:this.path.child(e),n=new Fd(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},Fd.prototype.childContextForArray=function(e){return new Fd(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},Fd.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Hr(Qr.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},Fd.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},Fd.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},Fd.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(Ld(this.dataSource)&&xd.test(e))throw this.createError('Document fields cannot begin and end with "__"')},Fd);function Fd(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}var qd=function(e,t){this.databaseId=e,this.key=t},Bd=(Ud.prototype.parseSetData=function(e,t){var n=new $d(Md.Set,e,Wi.EMPTY_PATH);zd("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new _d(r,null,n.fieldTransforms)},Ud.prototype.parseMergeData=function(e,t,n){var r=new $d(Md.MergeSet,e,Wi.EMPTY_PATH);zd("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new bo(Wi.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof Zf)h=l._internalPath;else{if("string"!=typeof l)throw Ur("Expected stringOrFieldPath to be a string or a FieldPath");h=Kd(e,l)}if(!r.contains(h))throw new Hr(Qr.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=ga.fromSet(s),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=ga.fromArray(r.fieldMask),o=r.fieldTransforms;return new _d(a,i,o)},Ud.prototype.parseUpdateData=function(e,t){var n=this,r=new $d(Md.Update,e,Wi.EMPTY_PATH);zd("Data must be an object, but it was:",r,t);var i=new bo(Wi.comparator),o=_s.EMPTY;ti(t,(function(t,a){var s=Kd(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof md)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}}));var a=ga.fromSet(i);return new Pd(o,a,r.fieldTransforms)},Ud.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new $d(Md.Update,e,Wi.EMPTY_PATH),o=[Wd(e,t)],a=[n];if(r.length%2!=0)throw new Hr(Qr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Wd(e,r[s])),a.push(r[s+1]);var u=new bo(Wi.comparator),c=_s.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof md)u=u.add(l);else{var d=this.parseData(f,h);null!=d&&(u=u.add(l),c=c.set(l,d))}}var p=ga.fromSet(u);return new Pd(c,p,i.fieldTransforms)},Ud.prototype.parseQueryValue=function(e,t,n){void 0===n&&(n=!1);var r=new $d(n?Md.ArrayArgument:Md.Argument,e,Wi.EMPTY_PATH),i=this.parseData(t,r);return jr(null!=i,"Parsed data should not be null."),jr(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},Ud.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=Gd(e);throw t.createError(n)}},Ud.prototype.parseData=function(e,t){if(jd(e=this.runPreConverter(e,t)))return zd("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof fd)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement&&t.dataSource!==Md.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},Ud.prototype.parseObject=function(e,t){var n=this,r=new lo(Si);return ni(e)?t.path&&0<t.path.length&&t.fieldMask.push(t.path):ti(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new _s(r)},Ud.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=Xa.INSTANCE),n.push(s),r++}return new Os(n)},Ud.prototype.parseSentinelFieldValue=function(e,t){if(!Ld(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof md){if(t.dataSource!==Md.MergeSet)throw t.dataSource===Md.Update?(jr(0<t.path.length,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof vd)t.fieldTransforms.push(new va(t.path,Lh.instance));else if(e instanceof Ed){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new Fh(n);t.fieldTransforms.push(new va(t.path,r))}else if(e instanceof Id){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new Bh(n);t.fieldTransforms.push(new va(t.path,i))}else if(e instanceof Dd){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new jh(o);t.fieldTransforms.push(new va(t.path,a))}else Ur("Unknown FieldValue type: "+e)},Ud.prototype.parseScalarValue=function(e,t){if(null===e)return Xa.INSTANCE;if("number"==typeof e)return Oc(e)?new ss(e):new ls(e);if("boolean"==typeof e)return es.of(e);if("string"==typeof e)return new ds(e);if(e instanceof Date)return new gs(ao.fromDate(e));if(e instanceof ao)return new gs(new ao(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof Ph)return new As(e);if(e instanceof Ai)return new Ts(e);if(e instanceof qd)return new Cs(e.databaseId,e.key);throw t.createError("Unsupported field value: "+pi(e))},Ud.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new $d(Md.Argument,e,Wi.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},Ud);function Ud(e){this.preConverter=e}function jd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ao||e instanceof Ph||e instanceof Ai||e instanceof qd||e instanceof fd)}function zd(e,t,n){if(!jd(n)||!di(n)){var r=pi(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function Wd(e,t){if(t instanceof Zf)return t._internalPath;if("string"==typeof t)return Kd(e,t);throw new Hr(Qr.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Kd(e,t){try{return function(e){if(0<=e.search(td))throw new Hr(Qr.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Zf.bind.apply(Zf,u([void 0],e.split("."))))}catch(t){throw new Hr(Qr.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=Gd(t);throw new Hr(Qr.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Gd(e){return e instanceof Error?e.message:e.toString()}var Qd=hc.COLLECTION_DISABLED,Hd=(Yd.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},Yd);function Yd(e){if(void 0===e.host){if(void 0!==e.ssl)throw new Hr(Qr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else ci("settings","non-empty string","host",e.host),this.host=e.host,li("settings","boolean","ssl",e.ssl),this.ssl=Zr(e.ssl,!0);if(gi("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),li("settings","object","credentials",e.credentials),this.credentials=e.credentials,li("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?qr("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&qr("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=Zr(e.timestampsInSnapshots,!0),li("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=hc.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==Qd&&e.cacheSizeBytes<hc.MINIMUM_CACHE_SIZE_BYTES)throw new Hr(Qr.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+hc.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}li("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0!==e.experimentalForceLongPolling&&e.experimentalForceLongPolling}var Xd=(Jd.prototype.settings=function(e){if(ii("Firestore.settings",arguments,1),si("Firestore.settings","object",1,e),Jr(e,"persistence"))throw new Hr(Qr.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Hd(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new Hr(Qr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._settings=t).credentials&&(this._credentials=function(e){if(!e)return new rd;switch(e.type){case"gapi":var t=e.client;return jr(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new cd(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new Hr(Qr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},Jd.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},Jd.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},Jd.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new Hr(Qr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&qr("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=Zr(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Kf(this._settings.cacheSizeBytes,t))},Jd.prototype.clearPersistence=function(){var e=this,t=Tc.buildStoragePrefix(this.makeDatabaseInfo()),n=new Xi;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return a(e,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new Hr(Qr.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Tc.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},Jd.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(Jd.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),Jd.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},Jd.prototype.onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),hd(e))return this.onSnapshotsInSyncInternal(e);si("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},Jd.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new Xf({next:function(){e.next&&e.next()},error:function(e){throw Ur("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},Jd.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Qf),this._firestoreClient},Jd.prototype.makeDatabaseInfo=function(){return new _i(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},Jd.prototype.configureClient=function(e){jr(!!this._settings.host,"FirestoreSettings.host is not set"),jr(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Hf(zr.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},Jd.prototype.createDataConverter=function(e){return new Bd((function(t){if(t instanceof rp){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new Hr(Qr.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new qd(e,t._key)}return t}))},Jd.databaseIdFromApp=function(e){var t=e.options;if(!Jr(t,"projectId"))throw new Hr(Qr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new Hr(Qr.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Mi(n)},Object.defineProperty(Jd.prototype,"app",{get:function(){if(!this._firebaseApp)throw new Hr(Qr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),Jd.prototype.collection=function(e){return ii("Firestore.collection",arguments,1),si("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new yp(Bi.fromString(e),this)},Jd.prototype.doc=function(e){return ii("Firestore.doc",arguments,1),si("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),rp.forPath(Bi.fromString(e),this)},Jd.prototype.collectionGroup=function(e){if(ii("Firestore.collectionGroup",arguments,1),si("Firestore.collectionGroup","non-empty string",1,e),0<=e.indexOf("/"))throw new Hr(Qr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new fp(new Fc(Bi.EMPTY_PATH,e),this)},Jd.prototype.runTransaction=function(e){var t=this;return ii("Firestore.runTransaction",arguments,1),si("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new Zd(t,n))}))},Jd.prototype.batch=function(){return this.ensureClientConfigured(),new tp(this)},Object.defineProperty(Jd,"logLevel",{get:function(){switch(Lr()){case Dr.DEBUG:return"debug";case Dr.ERROR:return"error";case Dr.SILENT:return"silent";default:return Ur("Unknown log level: "+Lr())}},enumerable:!0,configurable:!0}),Jd.setLogLevel=function(e){switch(ii("Firestore.setLogLevel",arguments,1),si("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":$r(Dr.DEBUG);break;case"error":$r(Dr.ERROR);break;case"silent":$r(Dr.SILENT);break;default:throw new Hr(Qr.INVALID_ARGUMENT,"Invalid log level: "+e)}},Jd.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},Jd);function Jd(e,t){var n=this;if(this._firebaseApp=null,this._queue=new eo,this.INTERNAL={delete:function(){return a(n,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof e.options){var r=e;this._firebaseApp=r,this._databaseId=Jd.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new od(t)}else{var i=e;if(!i.projectId)throw new Hr(Qr.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new Mi(i.projectId,i.database),this._persistenceKey="[DEFAULT]",this._credentials=new rd}this._settings=new Hd({}),this._dataConverter=this.createDataConverter(this._databaseId)}var Zd=(ep.prototype.get=function(e){var t=this;ii("Transaction.get",arguments,1);var n=Tp("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ur("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Us)return new sp(t._firestore,n._key,null,!1,!1,n._converter);if(r instanceof Fs)return new sp(t._firestore,n._key,r,!1,!1,n._converter);throw Ur("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},ep.prototype.set=function(e,t,n){ai("Transaction.set",arguments,2,3);var r=Tp("Transaction.set",e,this._firestore);n=bp("Transaction.set",n);var i=Sp(r._converter,t,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._transaction.set(r._key,s),this},ep.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return i="string"==typeof t||t instanceof Zf?(oi("Transaction.update",arguments,3),r=Tp("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(ii("Transaction.update",arguments,2),r=Tp("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},ep.prototype.delete=function(e){ii("Transaction.delete",arguments,1);var t=Tp("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},ep);function ep(e,t){this._firestore=e,this._transaction=t}var tp=(np.prototype.set=function(e,t,n){ai("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Tp("WriteBatch.set",e,this._firestore);n=bp("WriteBatch.set",n);var i=Sp(r._converter,t,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._mutations=this._mutations.concat(s.toMutations(r._key,Sa.NONE)),this},np.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),i="string"==typeof t||t instanceof Zf?(oi("WriteBatch.update",arguments,3),r=Tp("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(ii("WriteBatch.update",arguments,2),r=Tp("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,Sa.exists(!0))),this},np.prototype.delete=function(e){ii("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Tp("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new La(t._key,Sa.NONE)),this},np.prototype.commit=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},np.prototype.verifyNotCommitted=function(){if(this._committed)throw new Hr(Qr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},np);function np(e){this._firestore=e,this._mutations=[],this._committed=!1}var rp=(ip.forPath=function(e,t,n){if(e.length%2!=0)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new ip(new Gi(e),t,n)},Object.defineProperty(ip.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(ip.prototype,"parent",{get:function(){return new yp(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(ip.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),ip.prototype.collection=function(e){if(ii("DocumentReference.collection",arguments,1),si("DocumentReference.collection","non-empty string",1,e),!e)throw new Hr(Qr.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=Bi.fromString(e);return new yp(this._key.path.child(t),this.firestore)},ip.prototype.isEqual=function(e){if(!(e instanceof ip))throw yi("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)&&this._converter===e._converter},ip.prototype.set=function(e,t){ai("DocumentReference.set",arguments,1,2),t=bp("DocumentReference.set",t);var n=Sp(this._converter,e,"DocumentReference.set"),r=n[0],i=n[1],o=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,t.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,Sa.NONE))},ip.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof e||e instanceof Zf?(oi("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(ii("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,Sa.exists(!0)))},ip.prototype.delete=function(){return ii("DocumentReference.delete",arguments,0),this._firestoreClient.write([new La(this._key,Sa.NONE)])},ip.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ai("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||hd(e[i])||(gi("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),li("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=hd(e[i])?e[i]:(si("DocumentReference.onSnapshot","function",i,e[i]),ui("DocumentReference.onSnapshot","function",i+1,e[i+1]),ui("DocumentReference.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},ip.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Xf({next:function(e){if(t.next){jr(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new sp(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen(Fc.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},ip.prototype.get=function(e){var t=this;return ai("DocumentReference.get",arguments,0,1),Ep("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new sp(t.firestore,t._key,e,!0,e instanceof Fs&&e.hasLocalMutations,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},ip.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new Hr(Qr.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new Hr(Qr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},ip.prototype.withConverter=function(e){return new ip(this._key,this.firestore,e)},ip);function ip(e,t,n){this._key=e,this.firestore=t,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}var op=(ap.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},ap);function ap(e,t){this.hasPendingWrites=e,this.fromCache=t}var sp=(up.prototype.data=function(e){if(ai("DocumentSnapshot.data",arguments,0,1),e=wp("DocumentSnapshot.data",e),this._document){if(this._converter){var t=new lp(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(t,e)}return this.toJSObject(this._document.data(),Ka.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},up.prototype.get=function(e,t){if(ai("DocumentSnapshot.get",arguments,1,2),t=wp("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(Wd("DocumentSnapshot.get",e));if(null!==n)return this.toJSValue(n,Ka.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(up.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(up.prototype,"ref",{get:function(){return new rp(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(up.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(up.prototype,"metadata",{get:function(){return new op(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),up.prototype.isEqual=function(e){if(!(e instanceof up))throw yi("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))&&this._converter===e._converter},up.prototype.toJSObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.toJSValue(i,t)})),r},up.prototype.toJSValue=function(e,t){if(e instanceof _s)return this.toJSObject(e,t);if(e instanceof Os)return this.toJSArray(e,t);if(e instanceof Cs){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||qr("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new rp(n,this._firestore,this._converter)}return e.value(t)},up.prototype.toJSArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.toJSValue(e,t)}))},up);function up(e,t,n,r,i,o){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}var cp,lp=(n(hp,cp=sp),hp.prototype.data=function(e){var t=cp.prototype.data.call(this,e);return jr(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t},hp);function hp(){return null!==cp&&cp.apply(this,arguments)||this}var fp=(dp.prototype.where=function(e,t,n){var r;ii("Query.where",arguments,3),mi("Query.where",3,n),function(e,t,n,r){if(!t.some((function(e){return e===r})))throw new Hr(Qr.INVALID_ARGUMENT,"Invalid value "+pi(r)+" provided to function Query.where() for its "+bi(2)+" argument. Acceptable values: "+t.join(", "))}(0,["<","<=","==",">=",">","array-contains","in","array-contains-any"],0,t);var i=Wd("Query.where",e),o=Bc.fromString(t);if(i.isKeyField()){if(o===Bc.ARRAY_CONTAINS||o===Bc.ARRAY_CONTAINS_ANY)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===Bc.IN){this.validateDisjunctiveFilterElements(n,o);for(var a=[],s=0,u=n;s<u.length;s++){var c=u[s];a.push(this.parseDocumentIdValue(c))}r=new Os(a)}else r=this.parseDocumentIdValue(n)}else o!==Bc.IN&&o!==Bc.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(n,o),r=this.firestore._dataConverter.parseQueryValue("Query.where",n,o===Bc.IN);var l=zc.create(i,o,r);return this.validateNewFilter(l),new dp(this._query.addFilter(l),this.firestore,this._converter)},dp.prototype.orderBy=function(e,t){var n;if(ai("Query.orderBy",arguments,1,2),ui("Query.orderBy","non-empty string",2,t),void 0===t||"asc"===t)n=sl.ASCENDING;else{if("desc"!==t)throw new Hr(Qr.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+t+"', expected 'asc' or 'desc'.");n=sl.DESCENDING}if(null!==this._query.startAt)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=Wd("Query.orderBy",e),i=new hl(r,n);return this.validateNewOrderBy(i),new dp(this._query.addOrderBy(i),this.firestore,this._converter)},dp.prototype.limit=function(e){return ii("Query.limit",arguments,1),si("Query.limit","number",1,e),vi("Query.limit",1,e),new dp(this._query.withLimitToFirst(e),this.firestore,this._converter)},dp.prototype.limitToLast=function(e){return ii("Query.limitToLast",arguments,1),si("Query.limitToLast","number",1,e),vi("Query.limitToLast",1,e),new dp(this._query.withLimitToLast(e),this.firestore,this._converter)},dp.prototype.startAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];oi("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",e,t,!0);return new dp(this._query.withStartAt(r),this.firestore,this._converter)},dp.prototype.startAfter=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];oi("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",e,t,!1);return new dp(this._query.withStartAt(r),this.firestore,this._converter)},dp.prototype.endBefore=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];oi("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",e,t,!0);return new dp(this._query.withEndAt(r),this.firestore,this._converter)},dp.prototype.endAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];oi("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",e,t,!1);return new dp(this._query.withEndAt(r),this.firestore,this._converter)},dp.prototype.isEqual=function(e){if(!(e instanceof dp))throw yi("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},dp.prototype.withConverter=function(e){return new dp(this._query,this.firestore,e)},dp.prototype.boundFromDocOrFields=function(e,t,n,r){if(mi(e,1,t),t instanceof sp){if(0<n.length)throw new Hr(Qr.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new Hr(Qr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},dp.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Cs(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof bs)throw new Hr(Qr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new Hr(Qr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new cl(r,n)},dp.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new Hr(Qr.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new Hr(Qr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(Bi.fromString(a));if(!Gi.isDocumentKey(s))throw new Hr(Qr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new Gi(s);i.push(new Cs(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new cl(i,n)},dp.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ai("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||hd(e[i])||(gi("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),li("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=hd(e[i])?e[i]:(si("Query.onSnapshot","function",i,e[i]),ui("Query.onSnapshot","function",i+1,e[i+1]),ui("Query.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},dp.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Xf({next:function(e){t.next&&t.next(new pp(n.firestore,n._query,e,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},dp.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new Hr(Qr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},dp.prototype.get=function(e){var t=this;return ai("Query.get",arguments,0,1),Ep("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new pp(t.firestore,t._query,e,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},dp.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new Hr(Qr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},dp.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new Hr(Qr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(Bi.fromString(e));if(!Gi.isDocumentKey(t))throw new Hr(Qr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Cs(this.firestore._databaseId,new Gi(t))}if(e instanceof rp){var n=e;return new Cs(this.firestore._databaseId,n._key)}throw new Hr(Qr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+pi(e)+".")},dp.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(10<e.length)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=e.indexOf(null))throw new Hr(Qr.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(0<e.filter((function(e){return Number.isNaN(e)})).length)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},dp.prototype.validateNewFilter=function(e){if(e instanceof zc){var t=[Bc.ARRAY_CONTAINS,Bc.ARRAY_CONTAINS_ANY],n=[Bc.IN,Bc.ARRAY_CONTAINS_ANY],r=0<=t.indexOf(e.op),i=0<=n.indexOf(e.op);if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new Hr(Qr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new Hr(Qr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Hr(Qr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},dp.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},dp.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new Hr(Qr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},dp);function dp(e,t,n){this._query=e,this.firestore=t,this._converter=n}var pp=(Object.defineProperty(mp.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(mp.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(mp.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),mp.prototype.forEach=function(e,t){var n=this;ai("QuerySnapshot.forEach",arguments,1,2),si("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(mp.prototype,"query",{get:function(){return new fp(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),mp.prototype.docChanges=function(e){e&&(gi("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),li("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new Hr(Qr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map((function(t){var a=new lp(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r);return jr(t.type===sh.Added,"Invalid event type for first snapshot"),jr(!i||n.query.docComparator(i,t.doc)<0,"Got added events in wrong order"),i=t.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}}))}var a=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==sh.Metadata})).map((function(t){var i=new lp(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r),o=-1,s=-1;return t.type!==sh.Added&&(jr(0<=(o=a.indexOf(t.doc.key)),"Index for document not found"),a=a.delete(t.doc.key)),t.type!==sh.Removed&&(s=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case sh.Added:return"added";case sh.Modified:case sh.Metadata:return"modified";case sh.Removed:return"removed";default:return Ur("Unknown change type: "+e)}}(t.type),doc:i,oldIndex:o,newIndex:s}}))}(this._firestore,t,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},mp.prototype.isEqual=function(e){if(!(e instanceof mp))throw yi("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)&&this._converter===e._converter},mp.prototype.convertToDocumentImpl=function(e){return new lp(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key),this._converter)},mp);function mp(e,t,n,r){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new op(n.hasPendingWrites,n.fromCache)}u(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(pp.prototype.docChanges,e,{get:function(){return function(){throw new Hr(Qr.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}}));var gp,yp=(n(vp,gp=fp),Object.defineProperty(vp.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(vp.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new rp(new Gi(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(vp.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),vp.prototype.doc=function(e){if(ai("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=Ei.newId()),si("CollectionReference.doc","non-empty string",1,e),""===e)throw new Hr(Qr.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=Bi.fromString(e);return rp.forPath(this._query.path.child(t),this.firestore,this._converter)},vp.prototype.add=function(e){ii("CollectionReference.add",arguments,1),si("CollectionReference.add","object",1,this._converter?this._converter.toFirestore(e):e);var t=this.doc();return t.set(e).then((function(){return t}))},vp.prototype.withConverter=function(e){return new vp(this._path,this.firestore,e)},vp);function vp(e,t,n){var r=gp.call(this,Fc.atPath(e),t,n)||this;if((r._path=e).length%2!=1)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}function bp(e,t){if(void 0===t)return{merge:!1};if(gi(e,t,["merge","mergeFields"]),li(e,"boolean","merge",t.merge),function(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new Hr(Qr.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+pi(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Hr(Qr.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+pi(r[o]))}(e,t,n,r,i)}(e,"mergeFields","a string or a FieldPath",t.mergeFields,(function(e){return"string"==typeof e||e instanceof Zf})),void 0!==t.mergeFields&&void 0!==t.merge)throw new Hr(Qr.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function wp(e,t){return void 0===t?{}:(gi(e,t,["serverTimestamps"]),hi(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Ep(e,t){ui(e,"object",1,t),t&&(gi(e,t,["source"]),hi(e,0,"source",t.source,["default","server","cache"]))}function Tp(e,t,n){if(t instanceof rp){if(t.firestore!==n)throw new Hr(Qr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw yi(e,"DocumentReference",1,t)}function Sp(e,t,n){var r;return e?(r=e.toFirestore(t),n="toFirestore() in "+n):r=t,[r,n]}var Ip=Xr(Xd,"Use firebase.firestore() instead."),Cp=Xr(Zd,"Use firebase.firestore().runTransaction() instead."),kp=Xr(tp,"Use firebase.firestore().batch() instead."),Dp=Xr(rp,"Use firebase.firestore().doc() instead."),Ap=Xr(sp),Np=Xr(lp),xp=Xr(fp),_p=Xr(pp),Rp=Xr(yp,"Use firebase.firestore().collection() instead."),Mp={Firestore:Ip,GeoPoint:Ph,Timestamp:ao,Blob:xi,Transaction:Cp,WriteBatch:kp,DocumentReference:Dp,DocumentSnapshot:Ap,Query:xp,QueryDocumentSnapshot:Np,QuerySnapshot:_p,CollectionReference:Rp,FieldPath:Zf,FieldValue:Nd,setLogLevel:Xd.setLogLevel,CACHE_SIZE_UNLIMITED:Qd},Op=(Pp.prototype.addCallback=function(e){},Pp.prototype.shutdown=function(){},Pp);function Pp(){}var Vp="ConnectivityMonitor",Lp=($p.prototype.addCallback=function(e){this.callbacks.push(e)},$p.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},$p.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},$p.prototype.onNetworkAvailable=function(){Fr(Vp,"Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(0)},$p.prototype.onNetworkUnavailable=function(){Fr(Vp,"Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(1)},$p.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},$p);function $p(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}var Fp=(qp.prototype.onOpen=function(e){jr(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},qp.prototype.onClose=function(e){jr(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},qp.prototype.onMessage=function(e){jr(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},qp.prototype.close=function(){this.closeFn()},qp.prototype.send=function(e){this.sendFn(e)},qp.prototype.callOnOpen=function(){jr(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},qp.prototype.callOnClose=function(e){jr(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},qp.prototype.callOnMessage=function(e){jr(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},qp);function qp(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}var Bp="Connection",Up={BatchGetDocuments:"batchGet",Commit:"commit"},jp="gl-js/ fire/"+Pr,zp=(Wp.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=jp},Wp.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(a,s){var u=new Or;u.listenOnce(Rr.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case _r.NO_ERROR:var t=u.getResponseJson();Fr(Bp,"XHR received:",JSON.stringify(t)),a(t);break;case _r.TIMEOUT:Fr(Bp,'RPC "'+e+'" timed out'),s(new Hr(Qr.DEADLINE_EXCEEDED,"Request time out"));break;case _r.HTTP_ERROR:var n=u.getStatus();if(Fr(Bp,'RPC "'+e+'" failed with status:',n,"response text:",u.getResponseText()),0<n){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=function(e){var t=e.toLowerCase().replace("_","-");return 0<=Object.values(Qr).indexOf(t)?t:Qr.UNKNOWN}(r.status);s(new Hr(i,r.message))}else s(new Hr(Qr.UNKNOWN,"Server responded with status "+u.getStatus()))}else Fr(Bp,'RPC "'+e+'" failed'),s(new Hr(Qr.UNAVAILABLE,"Connection failed."));break;default:Ur('RPC "'+e+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{Fr(Bp,'RPC "'+e+'" completed.')}}));var c=o({},t);delete c.database;var l=JSON.stringify(c);Fr(Bp,"XHR sending: ",i+" "+l);var h={"Content-Type":"text/plain"};r.modifyHeadersForRequest(h,n),u.send(i,"POST",l,h,15)}))},Wp.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},Wp.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=xr(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),"object"==typeof navigator&&"ReactNative"===navigator.product||0<=p().indexOf("Electron/")||function(){var e=p();return 0<=e.indexOf("MSIE ")||0<=e.indexOf("Trident/")}()||0<=p().indexOf("MSAppHost/")||function(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function a(e,t){s.listen(e,(function(e){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))}Fr(Bp,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,c=!1,l=new Fp({sendFn:function(e){c?Fr(Bp,"Not sending because WebChannel is closed:",e):(u||(Fr(Bp,"Opening WebChannel transport."),s.open(),u=!0),Fr(Bp,"WebChannel sending:",e),s.send(e))},closeFn:function(){return s.close()}});return a(Mr.EventType.OPEN,(function(){c||Fr(Bp,"WebChannel transport opened.")})),a(Mr.EventType.CLOSE,(function(){c||(c=!0,Fr(Bp,"WebChannel transport closed"),l.callOnClose())})),a(Mr.EventType.ERROR,(function(e){c||(c=!0,Fr(Bp,"WebChannel transport errored:",e),l.callOnClose(new Hr(Qr.UNAVAILABLE,"The operation could not be completed")))})),a(Mr.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];jr(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Fr(Bp,"WebChannel received error:",i);var o=i.status,a=function(e){var t=th[e];if(void 0!==t)return ah(t)}(o),u=i.message;void 0===a&&(a=Qr.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,l.callOnClose(new Hr(a,u)),s.close()}else Fr(Bp,"WebChannel received:",n),l.callOnMessage(n)}})),setTimeout((function(){l.callOnOpen()}),0),l},Wp.prototype.makeUrl=function(e){var t=Up[e];return jr(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},Wp);function Wp(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}var Kp,Gp=(Object.defineProperty(Qp.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(Qp.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),Qp.prototype.loadConnection=function(e){return Promise.resolve(new zp(e))},Qp.prototype.newConnectivityMonitor=function(){return Lp.isAvailable()?new Lp:new Op},Qp.prototype.newSerializer=function(e){return new tf(e,{useProto3Json:!0})},Qp.prototype.formatJSON=function(e){return JSON.stringify(e)},Qp.prototype.atob=function(e){return atob(e)},Qp.prototype.btoa=function(e){return btoa(e)},Qp);function Qp(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}zr.setPlatform(new Gp),function(e){e.INTERNAL.registerComponent(new E("firestore",(function(e){var t=e.getProvider("app").getImmediate();return new Xd(t,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(e){jr(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(Mp)))}(Kp=e),Kp.registerVersion("@firebase/firestore","1.10.2")}).apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-firestore.js - be sure to load firebase-app.js first.")}}(Vn)}));Fn.initializeApp({apiKey:"AIzaSyBHGYn2xv8ZbdyUYr1zrFnG9kmaFYD5Aec",authDomain:"mutex-spa.firebaseapp.com",databaseURL:"https://mutex-spa.firebaseio.com",projectId:"mutex-spa",storageBucket:"mutex-spa.appspot.com",messagingSenderId:"61662392261",appId:"1:61662392261:web:56e4670db0b15eb833a5ac",measurementId:"G-2759B4J9WF"});const qn=Fn.firestore();window.Firestore=qn;const Bn=function(e){e.length>0&&e.forEach((function(e,t){setTimeout((function(){e.classList.add("fadeInUp")}),200*t,"easeInOutExpo")}))},Un=function(e){let t=e.items;t.length>0&&t.forEach((n,r)=>{n.classList.add("animated");new Waypoint({element:n,handler:r=>{"down"===r&&n.classList.contains("animated")&&setTimeout(Bn,200,"single"===e.type?[n]:t)},offset:"95%"})})};function jn(e){let t,n;return{c(){t=S("p"),n=C(e[4]),_(t,"class","TextInputParagraph svelte-1272la8"),_(t,"for","")},m(e,r){w(e,t,r),b(t,n)},p(e,t){16&t&&R(n,e[4])},d(e){e&&E(t)}}}function zn(e){let t,n;return{c(){t=S("p"),n=C(e[5]),_(t,"class","TextInputParagraph svelte-1272la8"),_(t,"for","")},m(e,r){w(e,t,r),b(t,n)},p(e,t){32&t&&R(n,e[5])},d(e){e&&E(t)}}}function Wn(e){let t,n;return{c(){t=S("input"),_(t,"type",e[2]),_(t,"id",e[3]),_(t,"class","floatLabel svelte-1272la8"),_(t,"name",e[3]),t.value=e[0],t.required=!0,L(t,"invalid",!e[1]&&e[9])},m(r,i){w(r,t,i),e[17](t),n=[A(t,"focus",e[10]),A(t,"blur",e[11]),A(t,"input",e[12])]},p(e,n){4&n&&_(t,"type",e[2]),8&n&&_(t,"id",e[3]),8&n&&_(t,"name",e[3]),1&n&&t.value!==e[0]&&(t.value=e[0]),514&n&&L(t,"invalid",!e[1]&&e[9])},d(r){r&&E(t),e[17](null),o(n)}}}function Kn(e){let t,n;return{c(){t=S("textarea"),_(t,"id",e[3]),_(t,"class","floatLabel svelte-1272la8"),_(t,"name",e[3]),t.value=e[0],_(t,"rows","4"),L(t,"invalid",!e[1]&&e[9])},m(r,i){w(r,t,i),e[16](t),n=[A(t,"focus",e[10]),A(t,"blur",e[11]),A(t,"input",e[12])]},p(e,n){8&n&&_(t,"id",e[3]),8&n&&_(t,"name",e[3]),1&n&&(t.value=e[0]),514&n&&L(t,"invalid",!e[1]&&e[9])},d(r){r&&E(t),e[16](null),o(n)}}}function Gn(t){let n,r,i,o,a,s,u=t[4]&&jn(t),c=!t[1]&&t[9]&&t[5]&&zn(t);function l(e,t){return e[6]?Kn:Wn}let h=l(t),f=h(t);return{c(){u&&u.c(),n=k(),c&&c.c(),r=k(),i=S("div"),f.c(),o=k(),a=S("label"),s=C(t[3]),_(a,"class"," svelte-1272la8"),_(a,"for",t[3]),L(a,"active",t[7]),L(a,"truncate",t[7]),_(i,"class","TextInputContainer svelte-1272la8")},m(e,t){u&&u.m(e,t),w(e,n,t),c&&c.m(e,t),w(e,r,t),w(e,i,t),f.m(i,null),b(i,o),b(i,a),b(a,s)},p(e,[t]){e[4]?u?u.p(e,t):(u=jn(e),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null),!e[1]&&e[9]&&e[5]?c?c.p(e,t):(c=zn(e),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null),h===(h=l(e))&&f?f.p(e,t):(f.d(1),f=h(e),f&&(f.c(),f.m(i,o))),8&t&&R(s,e[3]),8&t&&_(a,"for",e[3]),128&t&&L(a,"active",e[7]),128&t&&L(a,"truncate",e[7])},i:e,o:e,d(e){u&&u.d(e),e&&E(n),c&&c.d(e),e&&E(r),e&&E(i),f.d()}}}function Qn(e,t,n){let r,i,{type:o}=t,{Name:a}=t,{value:s=""}=t,{label:u}=t,{checkIsValid:c=(()=>!0)}=t,{errorMessege:l}=t,{multiline:h=!1}=t,{notRequired:f=!1}=t,{isValid:d=!!f}=t,p=!1,m="";G(()=>{n(7,r=""!==s&&void 0!==s)});return e.$set=e=>{"type"in e&&n(2,o=e.type),"Name"in e&&n(3,a=e.Name),"value"in e&&n(0,s=e.value),"label"in e&&n(4,u=e.label),"checkIsValid"in e&&n(13,c=e.checkIsValid),"errorMessege"in e&&n(5,l=e.errorMessege),"multiline"in e&&n(6,h=e.multiline),"notRequired"in e&&n(14,f=e.notRequired),"isValid"in e&&n(1,d=e.isValid)},e.$$.update=()=>{32768&e.$$.dirty&&n(9,p="blur"===m)},[s,d,o,a,u,l,h,r,i,p,e=>{n(15,m="focus"),n(7,r=!0)},e=>{n(15,m="blur"),n(1,d=c(e.target.value)),""===i.value&&n(7,r=!1)},e=>{H()("inputChange",{isValid:!1,value:e.target.value}),n(1,d=c(e.target.value)),n(0,s=event.target.value)},c,f,m,function(e){J[e?"unshift":"push"](()=>{n(8,i=e)})},function(e){J[e?"unshift":"push"](()=>{n(8,i=e)})}]}document.addEventListener("DOMContentLoaded",(function(){[{type:"single",items:[...document.querySelectorAll("div.underline-heading ")]},{type:"group",items:[...document.querySelectorAll("#aboutSection > div#container > div")]},{type:"group",items:[...document.querySelectorAll("#lpnp > div#container > div")]},{type:"group",items:[...document.querySelectorAll("#STATISTICS > div#container > div")]},{type:"single",items:[...document.querySelectorAll("#speakers > div.container > div")]},{type:"single",items:[...document.querySelectorAll("#sponsors > div.sponsor-category")]}].forEach(e=>{Un(e)})}),!1);class Hn extends Ne{constructor(e){super(),Ae(this,e,Qn,Gn,s,{type:2,Name:3,value:0,label:4,checkIsValid:13,errorMessege:5,multiline:6,notRequired:14,isValid:1})}}const Yn=["January","February","March","April","May","June","July","August","September","October","November","December"],Xn=[31,28,31,30,31,30,31,31,30,31,30,31],Jn=(e,t)=>1!==e?Xn[e]:(e=>e%4==0)(t)?29:28,Zn=e=>Yn[e],er=(e,t)=>{const{days:n}=((e,t)=>{const n=new Date(t,e,1).getMonth();return{name:n[n],days:Jn(n,t)}})(e,t),r=Array.from({length:42}).map(()=>[]),i=new Date(t,e,1).getDay();Array.from({length:n}).forEach((e,t)=>{r[i+t]=t+1});const o=r.map(e=>Array.isArray(e)?void 0:e);return o[35]?o:o.slice(0,-7)},tr=()=>{},nr=(()=>{let e=1;return()=>++e})();function rr(e,t,n){const r=e.slice();return r[9]=t[n].allowed,r[10]=t[n].value,r}function ir(e,t,n){const r=e.slice();return r[13]=t[n],r}function or(t){let n,r,i=t[13]+"";return{c(){n=S("div"),r=C(i),_(n,"class","cell svelte-1xnygc9")},m(e,t){w(e,n,t),b(n,r)},p:e,d(e){e&&E(n)}}}function ar(e,t){let n,r,i,o,s=(t[10]||"")+"";return{key:e,first:null,c(){n=S("div"),r=C(s),i=k(),_(n,"class","svelte-1xnygc9"),L(n,"cell",!0),L(n,"highlight",t[9]&&t[10]),L(n,"disabled",!t[9]),L(n,"selected",new Date(t[0].getFullYear(),t[0].getMonth(),t[0].getDate()).getTime()===new Date(t[2],t[1],t[10]).getTime()),this.first=n},m(e,s){w(e,n,s),b(n,r),b(n,i),o=A(n,"click",(function(){a(t[9]&&t[10]?t[5].bind(this,t[10]):tr)&&(t[9]&&t[10]?t[5].bind(this,t[10]):tr).apply(this,arguments)}))},p(e,i){t=e,8&i&&s!==(s=(t[10]||"")+"")&&R(r,s),8&i&&L(n,"highlight",t[9]&&t[10]),8&i&&L(n,"disabled",!t[9]),15&i&&L(n,"selected",new Date(t[0].getFullYear(),t[0].getMonth(),t[0].getDate()).getTime()===new Date(t[2],t[1],t[10]).getTime())},d(e){e&&E(n),o()}}}function sr(t){let n,r,i,o,a=[],s=new Map,u=t[4],c=[];for(let e=0;e<u.length;e+=1)c[e]=or(ir(t,u,e));let l=t[3];const h=e=>nr();for(let e=0;e<l.length;e+=1){let n=rr(t,l,e),r=h();s.set(r,a[e]=ar(r,n))}return{c(){n=S("div"),r=S("div");for(let e=0;e<c.length;e+=1)c[e].c();i=k(),o=S("div");for(let e=0;e<a.length;e+=1)a[e].c();_(r,"class","row svelte-1xnygc9"),_(o,"class","row svelte-1xnygc9"),_(n,"class","container svelte-1xnygc9")},m(e,t){w(e,n,t),b(n,r);for(let e=0;e<c.length;e+=1)c[e].m(r,null);b(n,i),b(n,o);for(let e=0;e<a.length;e+=1)a[e].m(o,null)},p(e,[t]){if(16&t){let n;for(u=e[4],n=0;n<u.length;n+=1){const i=ir(e,u,n);c[n]?c[n].p(i,t):(c[n]=or(i),c[n].c(),c[n].m(r,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=u.length}const n=e[3];a=function(e,t,n,r,i,o,a,s,u,c,l,h){let f=e.length,d=o.length,p=f;const m={};for(;p--;)m[e[p].key]=p;const g=[],y=new Map,v=new Map;for(p=d;p--;){const e=h(i,o,p),s=n(e);let u=a.get(s);u?r&&u.p(e,t):(u=c(s,e),u.c()),y.set(s,g[p]=u),s in m&&v.set(s,Math.abs(p-m[s]))}const b=new Set,w=new Set;function E(e){me(e,1),e.m(s,l),a.set(e.key,e),l=e.first,d--}for(;f&&d;){const t=g[d-1],n=e[f-1],r=t.key,i=n.key;t===n?(l=t.first,f--,d--):y.has(i)?!a.has(r)||b.has(r)?E(t):w.has(i)?f--:v.get(r)>v.get(i)?(w.add(r),E(t)):(b.add(i),f--):(u(n,a),f--)}for(;f--;){const t=e[f];y.has(t.key)||u(t,a)}for(;d;)E(g[d-1]);return g}(a,t,h,1,e,n,s,o,we,ar,null,rr)},i:e,o:e,d(e){e&&E(n),T(c,e);for(let e=0;e<a.length;e+=1)a[e].d()}}}function ur(e,t,n){const r=H();let{date:i}=t,{month:o}=t,{year:a}=t,{isAllowed:s}=t;let u;const c=(e,t,n)=>!n||s(new Date(e,t,n));return e.$set=e=>{"date"in e&&n(0,i=e.date),"month"in e&&n(1,o=e.month),"year"in e&&n(2,a=e.year),"isAllowed"in e&&n(6,s=e.isAllowed)},e.$$.update=()=>{6&e.$$.dirty&&n(3,u=er(o,a).map(e=>({value:e,allowed:c(a,o,e)})))},[i,o,a,u,["Su","Mo","Tu","We","Th","Fr","Sa"],e=>{r("datechange",new Date(a,o,e))},s]}class cr extends Ne{constructor(e){super(),Ae(this,e,ur,sr,s,{date:0,month:1,year:2,isAllowed:6})}}function lr(e){let t;const n=new ct({props:{$$slots:{default:[hr]},$$scope:{ctx:e}}});return n.$on("close",e[10]),{c(){Ie(n.$$.fragment)},m(e,r){Ce(n,e,r),t=!0},p(e,t){const r={};32783&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(me(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){ke(n,e)}}}function hr(e){let t,n,r,i,a,s,u,c,l,h,f,d,p,m,g,y=Zn(e[2])+"";const v=new cr({props:{month:e[2],year:e[3],date:e[1],isAllowed:e[0]}});return v.$on("datechange",e[9]),{c(){t=S("div"),n=S("div"),r=S("div"),i=S("button"),i.textContent="Prev",a=k(),s=S("div"),u=C(y),c=k(),l=C(e[3]),h=k(),f=S("div"),d=S("button"),d.textContent="Next",p=k(),Ie(v.$$.fragment),_(r,"class","center svelte-uj0r83"),_(s,"class","center svelte-uj0r83"),_(f,"class","center svelte-uj0r83"),_(n,"class","month-name svelte-uj0r83"),_(t,"class","box svelte-uj0r83")},m(o,y){w(o,t,y),b(t,n),b(n,r),b(r,i),b(n,a),b(n,s),b(s,u),b(s,c),b(s,l),b(n,h),b(n,f),b(f,d),b(t,p),Ce(v,t,null),m=!0,g=[A(i,"click",N(e[8])),A(d,"click",N(e[7]))]},p(e,t){(!m||4&t)&&y!==(y=Zn(e[2])+"")&&R(u,y),(!m||8&t)&&R(l,e[3]);const n={};4&t&&(n.month=e[2]),8&t&&(n.year=e[3]),2&t&&(n.date=e[1]),1&t&&(n.isAllowed=e[0]),v.$set(n)},i(e){m||(me(v.$$.fragment,e),m=!0)},o(e){ge(v.$$.fragment,e),m=!1},d(e){e&&E(t),ke(v),o(g)}}}function fr(e){let t,n,r,i,o,a,s,u,c=e[4]&&e[5]&&lr(e);return{c(){t=S("div"),n=S("label"),n.textContent="Foundation Date:",r=k(),i=S("input"),a=k(),c&&c.c(),_(n,"for",""),_(i,"type","text"),i.value=o=e[1].toDateString(),_(i,"class","svelte-uj0r83"),_(t,"class","relative svelte-uj0r83")},m(o,l){w(o,t,l),b(t,n),b(t,r),b(t,i),b(t,a),c&&c.m(t,null),s=!0,u=A(i,"click",e[6])},p(e,[n]){(!s||2&n&&o!==(o=e[1].toDateString())&&i.value!==o)&&(i.value=o),e[4]&&e[5]?c?(c.p(e,n),me(c,1)):(c=lr(e),c.c(),me(c,1),c.m(t,null)):c&&(de(),ge(c,1,1,()=>{c=null}),pe())},i(e){s||(me(c),s=!0)},o(e){ge(c),s=!1},d(e){e&&E(t),c&&c.d(),u()}}}function dr(e,t,n){const r=H();let i,o,a,s,u,{chosenDate:c}=t,{isAllowed:l=(()=>!0)}=t,{selected:h=new Date}=t;return e.$set=e=>{"chosenDate"in e&&n(11,c=e.chosenDate),"isAllowed"in e&&n(0,l=e.isAllowed),"selected"in e&&n(1,h=e.selected)},e.$$.update=()=>{2&e.$$.dirty&&(i=h.getDate(),n(2,o=h.getMonth()),n(3,a=h.getFullYear()))},[l,h,o,a,s,u,()=>{n(4,s=!0),n(5,u=!0)},()=>{if(11===o)return n(2,o=0),void n(3,a+=1);n(2,o+=1)},()=>{if(0===o)return n(2,o=11),void n(3,a-=1);n(2,o-=1)},e=>{n(4,s=!1),r("datechange",e.detail),n(11,c=e.detail)},()=>{n(5,u=!u)},c]}class pr extends Ne{constructor(e){super(),Ae(this,e,dr,fr,s,{chosenDate:11,isAllowed:0,selected:1})}}function mr(e,t,n){const r=e.slice();return r[6]=t[n],r}function gr(e){let t,n,r,i,o,a,s,u=e[6]+"";return{c(){t=S("label"),n=S("input"),i=k(),o=C(u),a=k(),_(n,"type","radio"),_(n,"name",e[2]),n.__value=r=e[6],n.value=n.__value,e[5][0].push(n),_(t,"class","radiolabel svelte-1v751mk")},m(r,u){w(r,t,u),b(t,n),n.checked=n.__value===e[0],b(t,i),b(t,o),b(t,a),s=A(n,"change",e[4])},p(e,t){4&t&&_(n,"name",e[2]),2&t&&r!==(r=e[6])&&(n.__value=r),n.value=n.__value,1&t&&(n.checked=n.__value===e[0]),2&t&&u!==(u=e[6]+"")&&R(o,u)},d(r){r&&E(t),e[5][0].splice(e[5][0].indexOf(n),1),s()}}}function yr(t){let n,r,i,o,a=t[1],s=[];for(let e=0;e<a.length;e+=1)s[e]=gr(mr(t,a,e));return{c(){n=S("div"),r=S("p"),i=C(t[2]),o=k();for(let e=0;e<s.length;e+=1)s[e].c();_(r,"class","radioP svelte-1v751mk"),_(n,"class","radioContainer svelte-1v751mk")},m(e,t){w(e,n,t),b(n,r),b(r,i),b(n,o);for(let e=0;e<s.length;e+=1)s[e].m(n,null)},p(e,[t]){if(4&t&&R(i,e[2]),7&t){let r;for(a=e[1],r=0;r<a.length;r+=1){const i=mr(e,a,r);s[r]?s[r].p(i,t):(s[r]=gr(i),s[r].c(),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=a.length}},i:e,o:e,d(e){e&&E(n),T(s,e)}}}function vr(e,t,n){let{items:r}=t,{Name:i}=t,{chosenValue:o}=t,{isValid:a=!1}=t;return e.$set=e=>{"items"in e&&n(1,r=e.items),"Name"in e&&n(2,i=e.Name),"chosenValue"in e&&n(0,o=e.chosenValue),"isValid"in e&&n(3,a=e.isValid)},e.$$.update=()=>{1&e.$$.dirty&&n(3,a=void 0!==o)},[o,r,i,a,function(){o=this.__value,n(0,o)},[[]]]}class br extends Ne{constructor(e){super(),Ae(this,e,vr,yr,s,{items:1,Name:2,chosenValue:0,isValid:3})}}function wr(e){let t,n;return{c(){t=S("p"),n=C(e[2]),_(t,"class","textAreaLabel svelte-nt8hlu"),_(t,"for","")},m(e,r){w(e,t,r),b(t,n)},p(e,t){4&t&&R(n,e[2])},d(e){e&&E(t)}}}function Er(t){let n,r,i,a,s,u,c,l=t[2]&&wr(t);return{c(){l&&l.c(),n=k(),r=S("div"),i=S("input"),a=k(),s=S("label"),u=C(t[1]),_(i,"type","text"),_(i,"id",t[1]),_(i,"class","floatLabel svelte-nt8hlu"),_(i,"name",t[1]),_(s,"class"," svelte-nt8hlu"),_(s,"for",t[1]),L(s,"active",t[3]),L(s,"truncate",t[3]),_(r,"class","controls svelte-nt8hlu")},m(e,o){l&&l.m(e,o),w(e,n,o),w(e,r,o),b(r,i),t[7](i),M(i,t[0]),b(r,a),b(r,s),b(s,u),c=[A(i,"focus",t[5]),A(i,"blur",t[6]),A(i,"input",t[8])]},p(e,[t]){e[2]?l?l.p(e,t):(l=wr(e),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),2&t&&_(i,"id",e[1]),2&t&&_(i,"name",e[1]),1&t&&i.value!==e[0]&&M(i,e[0]),2&t&&R(u,e[1]),2&t&&_(s,"for",e[1]),8&t&&L(s,"active",e[3]),8&t&&L(s,"truncate",e[3])},i:e,o:e,d(e){l&&l.d(e),e&&E(n),e&&E(r),t[7](null),o(c)}}}function Tr(e,t,n){let r,i,{Name:o}=t,{value:a}=t,{label:s}=t;G(()=>{n(3,r=""!==a&&void 0!==a)});return e.$set=e=>{"Name"in e&&n(1,o=e.Name),"value"in e&&n(0,a=e.value),"label"in e&&n(2,s=e.label)},[a,o,s,r,i,e=>{n(3,r=!0)},e=>{""===i.value&&n(3,r=!1)},function(e){J[e?"unshift":"push"](()=>{n(4,i=e)})},function(){a=this.value,n(0,a)}]}class Sr extends Ne{constructor(e){super(),Ae(this,e,Tr,Er,s,{Name:1,value:0,label:2})}}function Ir(e){let t,n;function r(t){e[7].call(null,t)}let i={Name:"How much money has been raised since the start?"};void 0!==e[0]&&(i.value=e[0]);const o=new Sr({props:i});return J.push(()=>Se(o,"value",r)),{c(){Ie(o.$$.fragment)},m(e,t){Ce(o,e,t),n=!0},p(e,n){const r={};!t&&1&n&&(t=!0,r.value=e[0],ie(()=>t=!1)),o.$set(r)},i(e){n||(me(o.$$.fragment,e),n=!0)},o(e){ge(o.$$.fragment,e),n=!1},d(e){ke(o,e)}}}function Cr(e){let t,n,r,i,a,s,u,c,l,h,f,d,p="yes"===e[1]&&!e[3]&&Ir(e);return{c(){t=S("div"),n=S("p"),r=C(e[2]),i=k(),a=S("div"),s=S("button"),s.textContent="YES",u=k(),c=S("button"),c.textContent="NO",l=k(),p&&p.c(),h=D(),_(s,"class","yes svelte-qbktq8"),_(c,"class","no svelte-qbktq8"),_(a,"class","btn-container svelte-qbktq8"),_(t,"class","YNquestion svelte-qbktq8")},m(o,m){w(o,t,m),b(t,n),b(n,r),b(t,i),b(t,a),b(a,s),b(a,u),b(a,c),w(o,l,m),p&&p.m(o,m),w(o,h,m),f=!0,d=[A(s,"click",N(e[5])),A(c,"click",N(e[6]))]},p(e,[t]){(!f||4&t)&&R(r,e[2]),"yes"!==e[1]||e[3]?p&&(de(),ge(p,1,1,()=>{p=null}),pe()):p?(p.p(e,t),me(p,1)):(p=Ir(e),p.c(),me(p,1),p.m(h.parentNode,h))},i(e){f||(me(p),f=!0)},o(e){ge(p),f=!1},d(e){e&&E(t),e&&E(l),p&&p.d(e),e&&E(h),o(d)}}}function kr(e,t,n){let{question:r}=t,{value:i}=t,{answer:o}=t,{isValid:a=!1}=t,{noSubquestion:s}=t;return e.$set=e=>{"question"in e&&n(2,r=e.question),"value"in e&&n(0,i=e.value),"answer"in e&&n(1,o=e.answer),"isValid"in e&&n(4,a=e.isValid),"noSubquestion"in e&&n(3,s=e.noSubquestion)},e.$$.update=()=>{11&e.$$.dirty&&n(4,a="no"===o&&void 0!==o||(!!s||""!==i&&void 0!==i))},[i,o,r,s,a,()=>{n(1,o="yes")},()=>{n(1,o="no")},function(e){i=e,n(0,i)}]}class Dr extends Ne{constructor(e){super(),Ae(this,e,kr,Cr,s,{question:2,value:0,answer:1,isValid:4,noSubquestion:3})}}function Ar(t){let n,r,i,o,a,s,u,c,l,h;return{c(){n=S("div"),r=S("div"),i=S("div"),i.innerHTML='<div class="eye svelte-1oead8"></div> \n      <div class="eye right svelte-1oead8"></div> \n      <div class="mouth happy svelte-1oead8"></div>',o=k(),a=S("div"),s=k(),u=S("div"),u.innerHTML='<h1 class="alert svelte-1oead8">Success!</h1> \n      <p class="messageP svelte-1oead8">Your form has been submitted successfully</p>',c=k(),l=S("button"),l.textContent="continue",_(i,"class","face svelte-1oead8"),_(a,"class","shadow scale svelte-1oead8"),_(u,"class","message svelte-1oead8"),_(l,"class","button-box svelte-1oead8"),_(r,"id","success-box"),_(r,"class","svelte-1oead8"),_(n,"class","successContainer svelte-1oead8")},m(e,f){w(e,n,f),b(n,r),b(r,i),b(r,o),b(r,a),b(r,s),b(r,u),b(r,c),b(r,l),h=A(l,"click",t[0])},p:e,i:e,o:e,d(e){e&&E(n),h()}}}function Nr(e){const t=H();return[()=>t("accept")]}class xr extends Ne{constructor(e){super(),Ae(this,e,Nr,Ar,s,{})}}var _r=Et((function(e,t){
/*!
     * validate.js 0.13.1
     *
     * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
     * Validate.js may be freely distributed under the MIT license.
     * For all details and documentation:
     * http://validatejs.org/
     */
(function(e,t,n){var r=function(e,t,n){n=i.extend({},i.options,n);var o=i.runValidations(e,t,n);if(o.some((function(e){return i.isPromise(e.error)})))throw new Error("Use validate.async if you want support for promises");return r.processValidationResults(o,n)},i=r;i.extend=function(e){return[].slice.call(arguments,1).forEach((function(t){for(var n in t)e[n]=t[n]})),e},i.extend(r,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var e=i.format("%{major}.%{minor}.%{patch}",i.version);return i.isEmpty(i.version.metadata)||(e+="+"+i.version.metadata),e}},Promise:"undefined"!=typeof Promise?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(e,t,n){var r,o,a,s,u,c,l,h=[];for(r in(i.isDomElement(e)||i.isJqueryElement(e))&&(e=i.collectFormValues(e)),t)for(o in a=i.getDeepObjectValue(e,r),s=i.result(t[r],a,e,r,n,t)){if(!(u=i.validators[o]))throw l=i.format("Unknown validator %{name}",{name:o}),new Error(l);c=s[o],(c=i.result(c,a,e,r,n,t))&&h.push({attribute:r,value:a,validator:o,globalOptions:n,attributes:e,options:c,error:u.call(u,a,c,r,e,n)})}return h},processValidationResults:function(e,t){e=i.pruneEmptyErrors(e,t),e=i.expandMultipleErrors(e,t),e=i.convertErrorMessages(e,t);var n=t.format||"grouped";if("function"!=typeof i.formatters[n])throw new Error(i.format("Unknown format %{format}",t));return e=i.formatters[n](e),i.isEmpty(e)?void 0:e},async:function(e,t,n){var r=(n=i.extend({},i.async.options,n)).wrapErrors||function(e){return e};!1!==n.cleanAttributes&&(e=i.cleanAttributes(e,t));var o=i.runValidations(e,t,n);return new i.Promise((function(a,s){i.waitForResults(o).then((function(){var u=i.processValidationResults(o,n);u?s(new r(u,n,e,t)):a(e)}),(function(e){s(e)}))}))},single:function(e,t,n){return n=i.extend({},i.single.options,n,{format:"flat",fullMessages:!1}),i({single:e},{single:t},n)},waitForResults:function(e){return e.reduce((function(e,t){return i.isPromise(t.error)?e.then((function(){return t.error.then((function(e){t.error=e||null}))})):e}),new i.Promise((function(e){e()})))},result:function(e){var t=[].slice.call(arguments,1);return"function"==typeof e&&(e=e.apply(null,t)),e},isNumber:function(e){return"number"==typeof e&&!isNaN(e)},isFunction:function(e){return"function"==typeof e},isInteger:function(e){return i.isNumber(e)&&e%1==0},isBoolean:function(e){return"boolean"==typeof e},isObject:function(e){return e===Object(e)},isDate:function(e){return e instanceof Date},isDefined:function(e){return null!=e},isPromise:function(e){return!!e&&i.isFunction(e.then)},isJqueryElement:function(e){return e&&i.isString(e.jquery)},isDomElement:function(e){return!!e&&(!(!e.querySelectorAll||!e.querySelector)&&(!(!i.isObject(document)||e!==document)||("object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)))},isEmpty:function(e){var t;if(!i.isDefined(e))return!0;if(i.isFunction(e))return!1;if(i.isString(e))return i.EMPTY_STRING_REGEXP.test(e);if(i.isArray(e))return 0===e.length;if(i.isDate(e))return!1;if(i.isObject(e)){for(t in e)return!1;return!0}return!1},format:i.extend((function(e,t){return i.isString(e)?e.replace(i.format.FORMAT_REGEXP,(function(e,n,r){return"%"===n?"%{"+r+"}":String(t[r])})):e}),{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(e){return i.isNumber(e)?100*e%1==0?""+e:parseFloat(Math.round(100*e)/100).toFixed(2):i.isArray(e)?e.map((function(e){return i.prettify(e)})).join(", "):i.isObject(e)?i.isDefined(e.toString)?e.toString():JSON.stringify(e):(e=""+e).replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,(function(e,t,n){return t+" "+n.toLowerCase()})).toLowerCase()},stringifyValue:function(e,t){return(t&&t.prettify||i.prettify)(e)},isString:function(e){return"string"==typeof e},isArray:function(e){return"[object Array]"==={}.toString.call(e)},isHash:function(e){return i.isObject(e)&&!i.isArray(e)&&!i.isFunction(e)},contains:function(e,t){return!!i.isDefined(e)&&(i.isArray(e)?-1!==e.indexOf(t):t in e)},unique:function(e){return i.isArray(e)?e.filter((function(e,t,n){return n.indexOf(e)==t})):e},forEachKeyInKeypath:function(e,t,n){if(i.isString(t)){var r,o="",a=!1;for(r=0;r<t.length;++r)switch(t[r]){case".":a?(a=!1,o+="."):(e=n(e,o,!1),o="");break;case"\\":a?(a=!1,o+="\\"):a=!0;break;default:a=!1,o+=t[r]}return n(e,o,!0)}},getDeepObjectValue:function(e,t){if(i.isObject(e))return i.forEachKeyInKeypath(e,t,(function(e,t){if(i.isObject(e))return e[t]}))},collectFormValues:function(e,t){var n,r,o,a,s,u,c={};if(i.isJqueryElement(e)&&(e=e[0]),!e)return c;for(t=t||{},a=e.querySelectorAll("input[name], textarea[name]"),n=0;n<a.length;++n)if(o=a.item(n),!i.isDefined(o.getAttribute("data-ignored"))){var l=o.name.replace(/\./g,"\\\\.");u=i.sanitizeFormValue(o.value,t),"number"===o.type?u=u?+u:null:"checkbox"===o.type?o.attributes.value?o.checked||(u=c[l]||null):u=o.checked:"radio"===o.type&&(o.checked||(u=c[l]||null)),c[l]=u}for(a=e.querySelectorAll("select[name]"),n=0;n<a.length;++n)if(o=a.item(n),!i.isDefined(o.getAttribute("data-ignored"))){if(o.multiple)for(r in u=[],o.options)(s=o.options[r])&&s.selected&&u.push(i.sanitizeFormValue(s.value,t));else{var h=void 0!==o.options[o.selectedIndex]?o.options[o.selectedIndex].value:"";u=i.sanitizeFormValue(h,t)}c[o.name]=u}return c},sanitizeFormValue:function(e,t){return t.trim&&i.isString(e)&&(e=e.trim()),!1!==t.nullify&&""===e?null:e},capitalize:function(e){return i.isString(e)?e[0].toUpperCase()+e.slice(1):e},pruneEmptyErrors:function(e){return e.filter((function(e){return!i.isEmpty(e.error)}))},expandMultipleErrors:function(e){var t=[];return e.forEach((function(e){i.isArray(e.error)?e.error.forEach((function(n){t.push(i.extend({},e,{error:n}))})):t.push(e)})),t},convertErrorMessages:function(e,t){var n=[],r=(t=t||{}).prettify||i.prettify;return e.forEach((function(e){var o=i.result(e.error,e.value,e.attribute,e.options,e.attributes,e.globalOptions);i.isString(o)?("^"===o[0]?o=o.slice(1):!1!==t.fullMessages&&(o=i.capitalize(r(e.attribute))+" "+o),o=o.replace(/\\\^/g,"^"),o=i.format(o,{value:i.stringifyValue(e.value,t)}),n.push(i.extend({},e,{error:o}))):n.push(e)})),n},groupErrorsByAttribute:function(e){var t={};return e.forEach((function(e){var n=t[e.attribute];n?n.push(e):t[e.attribute]=[e]})),t},flattenErrorsToArray:function(e){return e.map((function(e){return e.error})).filter((function(e,t,n){return n.indexOf(e)===t}))},cleanAttributes:function(e,t){function n(e,t,n){return i.isObject(e[t])?e[t]:e[t]=!!n||{}}return i.isObject(t)&&i.isObject(e)?function e(t,n){if(!i.isObject(t))return t;var r,o,a=i.extend({},t);for(o in t)r=n[o],i.isObject(r)?a[o]=e(a[o],r):r||delete a[o];return a}(e,t=function(e){var t,r={};for(t in e)e[t]&&i.forEachKeyInKeypath(r,t,n);return r}(t)):{}},exposeModule:function(e,t,n,r,i){n?(r&&r.exports&&(n=r.exports=e),n.validate=e):(t.validate=e,e.isFunction(i)&&i.amd&&i([],(function(){return e})))},warn:function(e){"undefined"!=typeof console&&console.warn&&console.warn("[validate.js] "+e)},error:function(e){"undefined"!=typeof console&&console.error&&console.error("[validate.js] "+e)}}),r.validators={presence:function(e,t){if(!1!==(t=i.extend({},this.options,t)).allowEmpty?!i.isDefined(e):i.isEmpty(e))return t.message||this.message||"can't be blank"},length:function(e,t,n){if(i.isDefined(e)){var r,o=(t=i.extend({},this.options,t)).is,a=t.maximum,s=t.minimum,u=[],c=(e=(t.tokenizer||function(e){return e})(e)).length;return i.isNumber(c)?(i.isNumber(o)&&c!==o&&(r=t.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",u.push(i.format(r,{count:o}))),i.isNumber(s)&&c<s&&(r=t.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",u.push(i.format(r,{count:s}))),i.isNumber(a)&&c>a&&(r=t.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",u.push(i.format(r,{count:a}))),u.length>0?t.message||u:void 0):t.message||this.notValid||"has an incorrect length"}},numericality:function(e,t,n,r,o){if(i.isDefined(e)){var a,s,u=[],c={greaterThan:function(e,t){return e>t},greaterThanOrEqualTo:function(e,t){return e>=t},equalTo:function(e,t){return e===t},lessThan:function(e,t){return e<t},lessThanOrEqualTo:function(e,t){return e<=t},divisibleBy:function(e,t){return e%t==0}},l=(t=i.extend({},this.options,t)).prettify||o&&o.prettify||i.prettify;if(i.isString(e)&&t.strict){var h="^-?(0|[1-9]\\d*)";if(t.onlyInteger||(h+="(\\.\\d+)?"),h+="$",!new RegExp(h).test(e))return t.message||t.notValid||this.notValid||this.message||"must be a valid number"}if(!0!==t.noStrings&&i.isString(e)&&!i.isEmpty(e)&&(e=+e),!i.isNumber(e))return t.message||t.notValid||this.notValid||this.message||"is not a number";if(t.onlyInteger&&!i.isInteger(e))return t.message||t.notInteger||this.notInteger||this.message||"must be an integer";for(a in c)if(s=t[a],i.isNumber(s)&&!c[a](e,s)){var f="not"+i.capitalize(a),d=t[f]||this[f]||this.message||"must be %{type} %{count}";u.push(i.format(d,{count:s,type:l(a)}))}return t.odd&&e%2!=1&&u.push(t.notOdd||this.notOdd||this.message||"must be odd"),t.even&&e%2!=0&&u.push(t.notEven||this.notEven||this.message||"must be even"),u.length?t.message||u:void 0}},datetime:i.extend((function(e,t){if(!i.isFunction(this.parse)||!i.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(i.isDefined(e)){var n,r=[],o=(t=i.extend({},this.options,t)).earliest?this.parse(t.earliest,t):NaN,a=t.latest?this.parse(t.latest,t):NaN;return e=this.parse(e,t),isNaN(e)||t.dateOnly&&e%864e5!=0?(n=t.notValid||t.message||this.notValid||"must be a valid date",i.format(n,{value:arguments[0]})):(!isNaN(o)&&e<o&&(n=t.tooEarly||t.message||this.tooEarly||"must be no earlier than %{date}",n=i.format(n,{value:this.format(e,t),date:this.format(o,t)}),r.push(n)),!isNaN(a)&&e>a&&(n=t.tooLate||t.message||this.tooLate||"must be no later than %{date}",n=i.format(n,{date:this.format(a,t),value:this.format(e,t)}),r.push(n)),r.length?i.unique(r):void 0)}}),{parse:null,format:null}),date:function(e,t){return t=i.extend({},t,{dateOnly:!0}),i.validators.datetime.call(i.validators.datetime,e,t)},format:function(e,t){(i.isString(t)||t instanceof RegExp)&&(t={pattern:t});var n,r=(t=i.extend({},this.options,t)).message||this.message||"is invalid",o=t.pattern;if(i.isDefined(e))return i.isString(e)?(i.isString(o)&&(o=new RegExp(t.pattern,t.flags)),(n=o.exec(e))&&n[0].length==e.length?void 0:r):r},inclusion:function(e,t){if(i.isDefined(e)&&(i.isArray(t)&&(t={within:t}),t=i.extend({},this.options,t),!i.contains(t.within,e))){var n=t.message||this.message||"^%{value} is not included in the list";return i.format(n,{value:e})}},exclusion:function(e,t){if(i.isDefined(e)&&(i.isArray(t)&&(t={within:t}),t=i.extend({},this.options,t),i.contains(t.within,e))){var n=t.message||this.message||"^%{value} is restricted";return i.isString(t.within[e])&&(e=t.within[e]),i.format(n,{value:e})}},email:i.extend((function(e,t){var n=(t=i.extend({},this.options,t)).message||this.message||"is not a valid email";if(i.isDefined(e))return i.isString(e)&&this.PATTERN.exec(e)?void 0:n}),{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(e,t,n,r,o){if(i.isDefined(e)){i.isString(t)&&(t={attribute:t});var a=(t=i.extend({},this.options,t)).message||this.message||"is not equal to %{attribute}";if(i.isEmpty(t.attribute)||!i.isString(t.attribute))throw new Error("The attribute must be a non empty string");var s=i.getDeepObjectValue(r,t.attribute),u=t.comparator||function(e,t){return e===t},c=t.prettify||o&&o.prettify||i.prettify;return u(e,s,t,n,r)?void 0:i.format(a,{attribute:c(t.attribute)})}},url:function(e,t){if(i.isDefined(e)){var n=(t=i.extend({},this.options,t)).message||this.message||"is not a valid url",r=t.schemes||this.schemes||["http","https"],o=t.allowLocal||this.allowLocal||!1,a=t.allowDataUrl||this.allowDataUrl||!1;if(!i.isString(e))return n;var s="^(?:(?:"+r.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",u="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(o?u+="?":s+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",s+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+u+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",a){s="(?:"+s+")|(?:^data:(?:\\w+\\/[-+.\\w]+(?:;[\\w=]+)*)?(?:;base64)?,[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*$)"}return new RegExp(s,"i").exec(e)?void 0:n}},type:i.extend((function(e,t,n,r,o){if(i.isString(t)&&(t={type:t}),i.isDefined(e)){var a,s=i.extend({},this.options,t),u=s.type;if(!i.isDefined(u))throw new Error("No type was specified");if(a=i.isFunction(u)?u:this.types[u],!i.isFunction(a))throw new Error("validate.validators.type.types."+u+" must be a function.");if(!a(e,s,n,r,o)){var c=t.message||this.messages[u]||this.message||s.message||(i.isFunction(u)?"must be of the correct type":"must be of type %{type}");return i.isFunction(c)&&(c=c(e,t,n,r,o)),i.format(c,{attribute:i.prettify(n),type:u})}}}),{types:{object:function(e){return i.isObject(e)&&!i.isArray(e)},array:i.isArray,integer:i.isInteger,number:i.isNumber,string:i.isString,date:i.isDate,boolean:i.isBoolean},messages:{}})},r.formatters={detailed:function(e){return e},flat:i.flattenErrorsToArray,grouped:function(e){var t;for(t in e=i.groupErrorsByAttribute(e))e[t]=i.flattenErrorsToArray(e[t]);return e},constraint:function(e){var t;for(t in e=i.groupErrorsByAttribute(e))e[t]=e[t].map((function(e){return e.validator})).sort();return e}},r.exposeModule(r,this,e,t,n)}).call(bt,t,e,null)}));function Rr(e,t,n){const r=e.slice();return r[46]=t[n],r[47]=t,r[48]=n,r}function Mr(e,t,n){const r=e.slice();return r[43]=t[n],r}function Or(e){let t,n,r,i,o,s,u,c,l,h,f,d,p,m=e[4][e[43]].title+"",g=e[4][e[43]].subtitle&&Pr(e),y=1===e[0]&&Vr(e),v=e[4][e[43]].elements,I=[];for(let t=0;t<v.length;t+=1)I[t]=Ur(Rr(e,v,t));const A=e=>ge(I[e],1,1,()=>{I[e]=null});let N=e[0]>0&&jr(e);const x=new et({props:{primary:!0,text:e[0]===e[5]?"Submit":"Next"}});x.$on("click",(function(){a(e[0]===e[5]?e[8]:e[6])&&(e[0]===e[5]?e[8]:e[6]).apply(this,arguments)}));let M=""!==e[3]&&void 0!==e[3]&&zr();return{c(){t=S("div"),n=S("div"),r=S("h3"),i=C(m),o=k(),g&&g.c(),s=k(),y&&y.c(),u=k();for(let e=0;e<I.length;e+=1)I[e].c();c=k(),l=S("div"),N&&N.c(),h=k(),Ie(x.$$.fragment),f=k(),M&&M.c(),d=D(),_(r,"class","FormTitle svelte-hzj3xv"),_(n,"class","FormHeadings svelte-hzj3xv"),_(t,"class","FormInputsContainer svelte-hzj3xv"),_(l,"class","FormControls svelte-hzj3xv")},m(e,a){w(e,t,a),b(t,n),b(n,r),b(r,i),b(n,o),g&&g.m(n,null),b(t,s),y&&y.m(t,null),b(t,u);for(let e=0;e<I.length;e+=1)I[e].m(t,null);w(e,c,a),w(e,l,a),N&&N.m(l,null),b(l,h),Ce(x,l,null),w(e,f,a),M&&M.m(e,a),w(e,d,a),p=!0},p(r,o){if(e=r,(!p||16&o[0])&&m!==(m=e[4][e[43]].title+"")&&R(i,m),e[4][e[43]].subtitle?g?g.p(e,o):(g=Pr(e),g.c(),g.m(n,null)):g&&(g.d(1),g=null),1===e[0]?y?y.p(e,o):(y=Vr(e),y.c(),y.m(t,u)):y&&(y.d(1),y=null),16&o[0]){let n;for(v=e[4][e[43]].elements,n=0;n<v.length;n+=1){const r=Rr(e,v,n);I[n]?(I[n].p(r,o),me(I[n],1)):(I[n]=Ur(r),I[n].c(),me(I[n],1),I[n].m(t,null))}for(de(),n=v.length;n<I.length;n+=1)A(n);pe()}e[0]>0?N?(N.p(e,o),me(N,1)):(N=jr(e),N.c(),me(N,1),N.m(l,h)):N&&(de(),ge(N,1,1,()=>{N=null}),pe());const a={};1&o[0]&&(a.text=e[0]===e[5]?"Submit":"Next"),x.$set(a),""!==e[3]&&void 0!==e[3]?M||(M=zr(),M.c(),M.m(d.parentNode,d)):M&&(M.d(1),M=null)},i(e){if(!p){for(let e=0;e<v.length;e+=1)me(I[e]);me(N),me(x.$$.fragment,e),p=!0}},o(e){I=I.filter(Boolean);for(let e=0;e<I.length;e+=1)ge(I[e]);ge(N),ge(x.$$.fragment,e),p=!1},d(e){e&&E(t),g&&g.d(),y&&y.d(),T(I,e),e&&E(c),e&&E(l),N&&N.d(),ke(x),e&&E(f),M&&M.d(e),e&&E(d)}}}function Pr(e){let t,n,r=e[4][e[43]].subtitle+"";return{c(){t=S("p"),n=C(r),_(t,"class","FormSubTitle svelte-hzj3xv")},m(e,r){w(e,t,r),b(t,n)},p(e,t){16&t[0]&&r!==(r=e[4][e[43]].subtitle+"")&&R(n,r)},d(e){e&&E(t)}}}function Vr(e){let t,n,r,i=e[1]>=4?"Maximum number of members Reached":"Add Team Member";function o(...t){return e[13](e[43],...t)}return{c(){t=S("button"),n=C(i),_(t,"class","addMemberBTN svelte-hzj3xv")},m(e,i){w(e,t,i),b(t,n),r=A(t,"click",N(o))},p(t,r){e=t,2&r[0]&&i!==(i=e[1]>=4?"Maximum number of members Reached":"Add Team Member")&&R(n,i)},d(e){e&&E(t),r()}}}function Lr(e){let t,n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,y,v,T,I,D,N,x,M,O,V,L,$,F,q,B=e[46].index+"";function U(t){e[25].call(null,t,e[46])}function j(t){e[26].call(null,t,e[46])}let z={checkIsValid:e[24],Name:"Name"};void 0!==e[46].name.value&&(z.value=e[46].name.value),void 0!==e[46].name.isValid&&(z.isValid=e[46].name.isValid);const W=new Hn({props:z});function K(t){e[28].call(null,t,e[46])}function G(t){e[29].call(null,t,e[46])}J.push(()=>Se(W,"value",U)),J.push(()=>Se(W,"isValid",j));let Q={checkIsValid:e[27],Name:"Age",type:"number"};void 0!==e[46].age.isValid&&(Q.isValid=e[46].age.isValid),void 0!==e[46].age.value&&(Q.value=e[46].age.value);const H=new Hn({props:Q});function Y(){e[30].call(f,e[46])}function X(t){e[32].call(null,t,e[46])}function Z(t){e[33].call(null,t,e[46])}J.push(()=>Se(H,"isValid",K)),J.push(()=>Se(H,"value",G));let ee={checkIsValid:e[31],Name:"Current City"};void 0!==e[46].city.isValid&&(ee.isValid=e[46].city.isValid),void 0!==e[46].city.value&&(ee.value=e[46].city.value);const te=new Hn({props:ee});function ne(t){e[35].call(null,t,e[46])}function oe(t){e[36].call(null,t,e[46])}J.push(()=>Se(te,"isValid",X)),J.push(()=>Se(te,"value",Z));let ae={checkIsValid:e[34],Name:"Role Within Team"};void 0!==e[46].role.isValid&&(ae.isValid=e[46].role.isValid),void 0!==e[46].role.value&&(ae.value=e[46].role.value);const se=new Hn({props:ae});function ue(t){e[38].call(null,t,e[46])}function ce(t){e[39].call(null,t,e[46])}J.push(()=>Se(se,"isValid",ne)),J.push(()=>Se(se,"value",oe));let le={checkIsValid:e[37],Name:"Educational Background"};void 0!==e[46].educationalBackground.isValid&&(le.isValid=e[46].educationalBackground.isValid),void 0!==e[46].educationalBackground.value&&(le.value=e[46].educationalBackground.value);const he=new Hn({props:le});function fe(t){e[41].call(null,t,e[46])}function de(t){e[42].call(null,t,e[46])}J.push(()=>Se(he,"isValid",ue)),J.push(()=>Se(he,"value",ce));let pe={multiline:!0,checkIsValid:e[40],Name:"Work Experience"};void 0!==e[46].workExperience.isValid&&(pe.isValid=e[46].workExperience.isValid),void 0!==e[46].workExperience.value&&(pe.value=e[46].workExperience.value);const ye=new Hn({props:pe});return J.push(()=>Se(ye,"isValid",fe)),J.push(()=>Se(ye,"value",de)),{c(){t=S("div"),n=S("h3"),r=C("Member #"),i=C(B),o=k(),Ie(W.$$.fragment),u=k(),Ie(H.$$.fragment),h=k(),f=S("select"),d=S("option"),d.textContent="Gender",p=S("option"),p.textContent="Male",m=S("option"),m.textContent="Female",g=k(),Ie(te.$$.fragment),T=k(),Ie(se.$$.fragment),N=k(),Ie(he.$$.fragment),O=k(),Ie(ye.$$.fragment),$=k(),_(n,"class","svelte-hzj3xv"),d.__value="",d.value=d.__value,_(d,"class","svelte-hzj3xv"),p.__value="Male",p.value=p.__value,_(p,"class","svelte-hzj3xv"),m.__value="Female",m.value=m.__value,_(m,"class","svelte-hzj3xv"),_(f,"class","genderSelect svelte-hzj3xv"),void 0===e[46].gender.value&&re(Y),_(t,"class","TeamMemberContainer svelte-hzj3xv")},m(a,s){w(a,t,s),b(t,n),b(n,r),b(n,i),b(t,o),Ce(W,t,null),b(t,u),Ce(H,t,null),b(t,h),b(t,f),b(f,d),b(f,p),b(f,m),P(f,e[46].gender.value),b(t,g),Ce(te,t,null),b(t,T),Ce(se,t,null),b(t,N),Ce(he,t,null),b(t,O),Ce(ye,t,null),b(t,$),F=!0,q=A(f,"change",Y)},p(t,n){e=t,(!F||16&n[0])&&B!==(B=e[46].index+"")&&R(i,B);const r={};!a&&16&n[0]&&(a=!0,r.value=e[46].name.value,ie(()=>a=!1)),!s&&16&n[0]&&(s=!0,r.isValid=e[46].name.isValid,ie(()=>s=!1)),W.$set(r);const o={};!c&&16&n[0]&&(c=!0,o.isValid=e[46].age.isValid,ie(()=>c=!1)),!l&&16&n[0]&&(l=!0,o.value=e[46].age.value,ie(()=>l=!1)),H.$set(o),16&n[0]&&P(f,e[46].gender.value);const u={};!y&&16&n[0]&&(y=!0,u.isValid=e[46].city.isValid,ie(()=>y=!1)),!v&&16&n[0]&&(v=!0,u.value=e[46].city.value,ie(()=>v=!1)),te.$set(u);const h={};!I&&16&n[0]&&(I=!0,h.isValid=e[46].role.isValid,ie(()=>I=!1)),!D&&16&n[0]&&(D=!0,h.value=e[46].role.value,ie(()=>D=!1)),se.$set(h);const d={};!x&&16&n[0]&&(x=!0,d.isValid=e[46].educationalBackground.isValid,ie(()=>x=!1)),!M&&16&n[0]&&(M=!0,d.value=e[46].educationalBackground.value,ie(()=>M=!1)),he.$set(d);const p={};!V&&16&n[0]&&(V=!0,p.isValid=e[46].workExperience.isValid,ie(()=>V=!1)),!L&&16&n[0]&&(L=!0,p.value=e[46].workExperience.value,ie(()=>L=!1)),ye.$set(p)},i(e){F||(me(W.$$.fragment,e),me(H.$$.fragment,e),me(te.$$.fragment,e),me(se.$$.fragment,e),me(he.$$.fragment,e),me(ye.$$.fragment,e),F=!0)},o(e){ge(W.$$.fragment,e),ge(H.$$.fragment,e),ge(te.$$.fragment,e),ge(se.$$.fragment,e),ge(he.$$.fragment,e),ge(ye.$$.fragment,e),F=!1},d(e){e&&E(t),ke(W),ke(H),ke(te),ke(se),ke(he),ke(ye),q()}}}function $r(e){let t,n,r,i;function o(t){e[21].call(null,t,e[46])}function a(t){e[22].call(null,t,e[46])}function s(t){e[23].call(null,t,e[46])}let u={question:e[46].params.question};void 0!==e[46].data.answer&&(u.answer=e[46].data.answer),void 0!==e[46].data.value&&(u.value=e[46].data.value),void 0!==e[46].data.isValid&&(u.isValid=e[46].data.isValid);const c=new Dr({props:u});return J.push(()=>Se(c,"answer",o)),J.push(()=>Se(c,"value",a)),J.push(()=>Se(c,"isValid",s)),{c(){Ie(c.$$.fragment)},m(e,t){Ce(c,e,t),i=!0},p(i,o){e=i;const a={};16&o[0]&&(a.question=e[46].params.question),!t&&16&o[0]&&(t=!0,a.answer=e[46].data.answer,ie(()=>t=!1)),!n&&16&o[0]&&(n=!0,a.value=e[46].data.value,ie(()=>n=!1)),!r&&16&o[0]&&(r=!0,a.isValid=e[46].data.isValid,ie(()=>r=!1)),c.$set(a)},i(e){i||(me(c.$$.fragment,e),i=!0)},o(e){ge(c.$$.fragment,e),i=!1},d(e){ke(c,e)}}}function Fr(e){let t,r,i;const o=[e[46]];function a(t){e[19].call(null,t,e[46])}function s(t){e[20].call(null,t,e[46])}let u={};for(let e=0;e<o.length;e+=1)u=n(u,o[e]);void 0!==e[46].data.value&&(u.chosenValue=e[46].data.value),void 0!==e[46].data.isValid&&(u.isValid=e[46].data.isValid);const c=new br({props:u});return J.push(()=>Se(c,"chosenValue",a)),J.push(()=>Se(c,"isValid",s)),{c(){Ie(c.$$.fragment)},m(e,t){Ce(c,e,t),i=!0},p(n,i){e=n;const a=16&i[0]?Ee(o,[Te(e[46])]):{};!t&&16&i[0]&&(t=!0,a.chosenValue=e[46].data.value,ie(()=>t=!1)),!r&&16&i[0]&&(r=!0,a.isValid=e[46].data.isValid,ie(()=>r=!1)),c.$set(a)},i(e){i||(me(c.$$.fragment,e),i=!0)},o(e){ge(c.$$.fragment,e),i=!1},d(e){ke(c,e)}}}function qr(e){let t,n,r;function i(t){e[17].call(null,t,e[46])}function o(t){e[18].call(null,t,e[46])}let s={isAllowed:e[16]};void 0!==e[46].data.date&&(s.chosenDate=e[46].data.date),void 0!==e[46].data.date&&(s.selected=e[46].data.date);const u=new pr({props:s});return J.push(()=>Se(u,"chosenDate",i)),J.push(()=>Se(u,"selected",o)),u.$on("datechange",(function(){a(e[46].params.onDateChange)&&e[46].params.onDateChange.apply(this,arguments)})),{c(){Ie(u.$$.fragment)},m(e,t){Ce(u,e,t),r=!0},p(r,i){e=r;const o={};!t&&16&i[0]&&(t=!0,o.chosenDate=e[46].data.date,ie(()=>t=!1)),!n&&16&i[0]&&(n=!0,o.selected=e[46].data.date,ie(()=>n=!1)),u.$set(o)},i(e){r||(me(u.$$.fragment,e),r=!0)},o(e){ge(u.$$.fragment,e),r=!1},d(e){ke(u,e)}}}function Br(e){let t,r,i;const o=[e[46]];function a(t){e[14].call(null,t,e[46])}function s(t){e[15].call(null,t,e[46])}let u={};for(let e=0;e<o.length;e+=1)u=n(u,o[e]);void 0!==e[46].data.value&&(u.value=e[46].data.value),void 0!==e[46].data.isValid&&(u.isValid=e[46].data.isValid);const c=new Hn({props:u});return J.push(()=>Se(c,"value",a)),J.push(()=>Se(c,"isValid",s)),{c(){Ie(c.$$.fragment)},m(e,t){Ce(c,e,t),i=!0},p(n,i){e=n;const a=16&i[0]?Ee(o,[Te(e[46])]):{};!t&&16&i[0]&&(t=!0,a.value=e[46].data.value,ie(()=>t=!1)),!r&&16&i[0]&&(r=!0,a.isValid=e[46].data.isValid,ie(()=>r=!1)),c.$set(a)},i(e){i||(me(c.$$.fragment,e),i=!0)},o(e){ge(c.$$.fragment,e),i=!1},d(e){ke(c,e)}}}function Ur(e){let t,n,r,i;const o=[Br,qr,Fr,$r,Lr],a=[];function s(e,t){return"text"===e[46].type||"email"===e[46].type?0:"date"===e[46].type?1:"radio"===e[46].type?2:"yes-no"===e[46].type?3:"member"===e[46].type?4:-1}return~(t=s(e))&&(n=a[t]=o[t](e)),{c(){n&&n.c(),r=D()},m(e,n){~t&&a[t].m(e,n),w(e,r,n),i=!0},p(e,i){let u=t;t=s(e),t===u?~t&&a[t].p(e,i):(n&&(de(),ge(a[u],1,1,()=>{a[u]=null}),pe()),~t?(n=a[t],n||(n=a[t]=o[t](e),n.c()),me(n,1),n.m(r.parentNode,r)):n=null)},i(e){i||(me(n),i=!0)},o(e){ge(n),i=!1},d(e){~t&&a[t].d(e),e&&E(r)}}}function jr(t){let n;const r=new et({props:{primary:!0,text:"Previous"}});return r.$on("click",t[7]),{c(){Ie(r.$$.fragment)},m(e,t){Ce(r,e,t),n=!0},p:e,i(e){n||(me(r.$$.fragment,e),n=!0)},o(e){ge(r.$$.fragment,e),n=!1},d(e){ke(r,e)}}}function zr(e){let t;return{c(){t=S("p"),t.textContent="please fill all required fields",_(t,"class","svelte-hzj3xv")},m(e,n){w(e,t,n)},d(e){e&&E(t)}}}function Wr(e){let t,n,r=e[0]==e[43]&&Or(e);return{c(){r&&r.c(),t=D()},m(e,i){r&&r.m(e,i),w(e,t,i),n=!0},p(e,n){e[0]==e[43]?r?(r.p(e,n),me(r,1)):(r=Or(e),r.c(),me(r,1),r.m(t.parentNode,t)):r&&(de(),ge(r,1,1,()=>{r=null}),pe())},i(e){n||(me(r),n=!0)},o(e){ge(r),n=!1},d(e){r&&r.d(e),e&&E(t)}}}function Kr(e){let t;const n=new ct({props:{$$slots:{default:[Gr]},$$scope:{ctx:e}}});return n.$on("close",e[9]),{c(){Ie(n.$$.fragment)},m(e,r){Ce(n,e,r),t=!0},p(e,t){const r={};262144&t[1]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(me(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){ke(n,e)}}}function Gr(t){let n;const r=new xr({});return r.$on("accept",t[10]),{c(){Ie(r.$$.fragment)},m(e,t){Ce(r,e,t),n=!0},p:e,i(e){n||(me(r.$$.fragment,e),n=!0)},o(e){ge(r.$$.fragment,e),n=!1},d(e){ke(r,e)}}}function Qr(e){let t,n,r,i,o,a,s,u,c,l,h,f,d,p,m=Object.keys(e[4]),g=[];for(let t=0;t<m.length;t+=1)g[t]=Wr(Mr(e,m,t));const y=e=>ge(g[e],1,1,()=>{g[e]=null});let v=e[2]&&Kr(e);return{c(){t=S("section"),n=S("form"),r=S("ul"),i=S("li"),i.textContent="Company Overview",o=k(),a=S("li"),a.textContent="Team Dynamics",s=k(),u=S("li"),u.textContent="Contact Information",c=k(),l=S("div"),h=S("div");for(let e=0;e<g.length;e+=1)g[e].c();f=k(),v&&v.c(),d=D(),_(i,"class","svelte-hzj3xv"),L(i,"active",e[0]>=0),_(a,"class","svelte-hzj3xv"),L(a,"active",e[0]>=1),_(u,"class","svelte-hzj3xv"),L(u,"active",e[0]>=2),_(r,"id","progressbar"),_(r,"class","svelte-hzj3xv"),_(h,"class","FormStageContainer svelte-hzj3xv"),_(l,"class","FormContentContainer svelte-hzj3xv"),_(n,"id","msform"),_(n,"class","svelte-hzj3xv"),_(t,"class","svelte-hzj3xv")},m(e,m){w(e,t,m),b(t,n),b(n,r),b(r,i),b(r,o),b(r,a),b(r,s),b(r,u),b(n,c),b(n,l),b(l,h);for(let e=0;e<g.length;e+=1)g[e].m(h,null);w(e,f,m),v&&v.m(e,m),w(e,d,m),p=!0},p(e,t){if(1&t[0]&&L(i,"active",e[0]>=0),1&t[0]&&L(a,"active",e[0]>=1),1&t[0]&&L(u,"active",e[0]>=2),507&t[0]){let n;for(m=Object.keys(e[4]),n=0;n<m.length;n+=1){const r=Mr(e,m,n);g[n]?(g[n].p(r,t),me(g[n],1)):(g[n]=Wr(r),g[n].c(),me(g[n],1),g[n].m(h,null))}for(de(),n=m.length;n<g.length;n+=1)y(n);pe()}e[2]?v?(v.p(e,t),me(v,1)):(v=Kr(e),v.c(),me(v,1),v.m(d.parentNode,d)):v&&(de(),ge(v,1,1,()=>{v=null}),pe())},i(e){if(!p){for(let e=0;e<m.length;e+=1)me(g[e]);me(v),p=!0}},o(e){g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)ge(g[e]);ge(v),p=!1},d(e){e&&E(t),T(g,e),e&&E(f),v&&v.d(e),e&&E(d)}}}function Hr(e,t,n){let r,i,o=0,a=0,s=document.querySelectorAll("#msform"),u={0:{title:"Company Overview",subtitle:"",elements:[{Name:"Company Name",type:"text",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"Company Headquarters",type:"text",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"date",type:"date",data:{date:new Date},params:{onDatechange:e=>{this.data.date=e.detail},isAllowed:e=>{const t=e.getTime();return t+9e7<Date.now()||!(t>Date.now()+3888e6)}}},{Name:"Idea Overview",type:"text",multiline:!0,data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"What is your technology component",type:"text",multiline:!0,data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"Target Market",type:"text",multiline:!0,data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"Main Competitors",type:"text",multiline:!0,data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"Achievements to Date",type:"text",multiline:!0,data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"How far along are you?",type:"radio",data:{},items:["Idea","Prototype","Users","Paying Users"],errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"Are you raising money?",type:"yes-no",bindTo:"",data:{},params:{question:"Are you raising money?"}},{label:"Please attach any document that may help us know more about your project",Name:"paste link to document here (optional)",type:"text",multiline:!0,notRequired:!0,data:{},errorMessege:"This field is required."}]},1:{title:"Team Dynamics",subtitle:"Fill in your team members details, maximum of four members per team.",elements:[]},2:{title:"Contact information",elements:[{Name:"FullName",type:"text",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"cellphone",type:"text",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"Email",type:"email",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)}]}},c={stagemap:{0:"companyInfo",1:"teamMembers",2:"contactInfo"},companyInfo:{},teamMembers:{},contactInfo:{}};G(()=>{document.querySelector("html").style.backgroundColor=" rgb(129, 111, 131)"}),Q(()=>{document.querySelector("html").style.backgroundColor=""});return e.$$.update=()=>{2064&e.$$.dirty[0]&&Object.keys(u).map(e=>{let t=[];u[e].elements.map(r=>{"text"===r.type|"email"===r.type||"radio"===r.type?(n(11,c[c.stagemap[e]][r.Name]=r.data.value,c),t.push(r.data.isValid)):"yes-no"===r.type?(n(11,c[c.stagemap[e]][r.question]=r.data.answer,c),n(11,c[c.stagemap[e]].subquestion=r.data.value,c),t.push(r.data.isValid)):"member"===r.type&&(n(11,c[c.stagemap[e]][r.index]={name:r.name.value,age:r.age.value,gender:r.gender.value,role:r.role.value,city:r.gender.value,educationalBackground:r.educationalBackground.value,workExperience:r.workExperience.value},c),t.push(r.name.isValid),t.push(r.age.isValid),t.push(r.gender.isValid),t.push(r.role.isValid),t.push(r.gender.isValid),t.push(r.educationalBackground.isValid),t.push(r.workExperience.isValid))}),console.log(t),n(11,c[c.stagemap[e]].isStageValid=-1===t.findIndex(e=>!1===e),c)}),2048&e.$$.dirty[0]&&console.log(c)},[o,a,r,i,u,2,e=>{c[c.stagemap[o]].isStageValid?(n(0,o=(o+1)%3),n(3,i="")):n(3,i=!0)},e=>{n(0,o=(o-1)%3),n(3,i="")},()=>{if(!c[c.stagemap[o]].isStageValid)return;!function e(t){Object.keys(t).map(n=>{void 0===t[n]&&delete t[n],"object"==typeof t[n]&&e(t[n])})}(c),qn.collection("applicants").add(c).then((function(){console.log("Document successfully written!"),n(2,r=!0)})).catch((function(e){console.error("Error writing document: ",e)}))},()=>{n(2,r=!r)},e=>{je("/#/")},c,s,e=>{a>=4||(n(1,a+=1),n(4,u[e].elements=[...u[e].elements,{type:"member",data:{},index:u[e].elements.length+1,name:{},age:{},gender:{},city:{},role:{},educationalBackground:{},workExperience:{}}],u))},function(e,t){t.data.value=e,n(4,u)},function(e,t){t.data.isValid=e,n(4,u)},e=>{const t=e.getTime();return t+9e7<Date.now()||!(t>Date.now()+3888e6)},function(e,t){t.data.date=e,n(4,u)},function(e,t){t.data.date=e,n(4,u)},function(e,t){t.data.value=e,n(4,u)},function(e,t){t.data.isValid=e,n(4,u)},function(e,t){t.data.answer=e,n(4,u)},function(e,t){t.data.value=e,n(4,u)},function(e,t){t.data.isValid=e,n(4,u)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.name.value=e,n(4,u)},function(e,t){t.name.isValid=e,n(4,u)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.age.isValid=e,n(4,u)},function(e,t){t.age.value=e,n(4,u)},function(e){e.gender.value=V(this),n(4,u)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.city.isValid=e,n(4,u)},function(e,t){t.city.value=e,n(4,u)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.role.isValid=e,n(4,u)},function(e,t){t.role.value=e,n(4,u)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.educationalBackground.isValid=e,n(4,u)},function(e,t){t.educationalBackground.value=e,n(4,u)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.workExperience.isValid=e,n(4,u)},function(e,t){t.workExperience.value=e,n(4,u)}]}function Yr(e,t,n){const r=e.slice();return r[45]=t[n],r[46]=t,r[47]=n,r}function Xr(e,t,n){const r=e.slice();return r[42]=t[n],r}function Jr(e){let t,n,r,i,o,s,u,c,l,h,f,d,p=e[3][e[42]].title+"",m=e[3][e[42]].subtitle&&Zr(e),g=e[3][e[42]].elements,y=[];for(let t=0;t<g.length;t+=1)y[t]=oi(Yr(e,g,t));const v=e=>ge(y[e],1,1,()=>{y[e]=null});let I=e[0]>0&&ai(e);const A=new et({props:{primary:!0,text:e[0]===e[4]?"Submit":"Next"}});A.$on("click",(function(){a(e[0]===e[4]?e[7]:e[5])&&(e[0]===e[4]?e[7]:e[5]).apply(this,arguments)}));let N=""!==e[2]&&void 0!==e[2]&&si();return{c(){t=S("div"),n=S("div"),r=S("h3"),i=C(p),o=k(),m&&m.c(),s=k();for(let e=0;e<y.length;e+=1)y[e].c();u=k(),c=S("div"),I&&I.c(),l=k(),Ie(A.$$.fragment),h=k(),N&&N.c(),f=D(),_(r,"class","FormTitle svelte-1b6vduz"),_(n,"class","FormHeadings svelte-1b6vduz"),_(t,"class","FormInputsContainer svelte-1b6vduz"),_(c,"class","FormControls svelte-1b6vduz")},m(e,a){w(e,t,a),b(t,n),b(n,r),b(r,i),b(n,o),m&&m.m(n,null),b(t,s);for(let e=0;e<y.length;e+=1)y[e].m(t,null);w(e,u,a),w(e,c,a),I&&I.m(c,null),b(c,l),Ce(A,c,null),w(e,h,a),N&&N.m(e,a),w(e,f,a),d=!0},p(r,o){if(e=r,(!d||8&o[0])&&p!==(p=e[3][e[42]].title+"")&&R(i,p),e[3][e[42]].subtitle?m?m.p(e,o):(m=Zr(e),m.c(),m.m(n,null)):m&&(m.d(1),m=null),8&o[0]){let n;for(g=e[3][e[42]].elements,n=0;n<g.length;n+=1){const r=Yr(e,g,n);y[n]?(y[n].p(r,o),me(y[n],1)):(y[n]=oi(r),y[n].c(),me(y[n],1),y[n].m(t,null))}for(de(),n=g.length;n<y.length;n+=1)v(n);pe()}e[0]>0?I?(I.p(e,o),me(I,1)):(I=ai(e),I.c(),me(I,1),I.m(c,l)):I&&(de(),ge(I,1,1,()=>{I=null}),pe());const a={};1&o[0]&&(a.text=e[0]===e[4]?"Submit":"Next"),A.$set(a),""!==e[2]&&void 0!==e[2]?N||(N=si(),N.c(),N.m(f.parentNode,f)):N&&(N.d(1),N=null)},i(e){if(!d){for(let e=0;e<g.length;e+=1)me(y[e]);me(I),me(A.$$.fragment,e),d=!0}},o(e){y=y.filter(Boolean);for(let e=0;e<y.length;e+=1)ge(y[e]);ge(I),ge(A.$$.fragment,e),d=!1},d(e){e&&E(t),m&&m.d(),T(y,e),e&&E(u),e&&E(c),I&&I.d(),ke(A),e&&E(h),N&&N.d(e),e&&E(f)}}}function Zr(e){let t,n,r=e[3][e[42]].subtitle+"";return{c(){t=S("p"),n=C(r),_(t,"class","FormSubTitle svelte-1b6vduz")},m(e,r){w(e,t,r),b(t,n)},p(e,t){8&t[0]&&r!==(r=e[3][e[42]].subtitle+"")&&R(n,r)},d(e){e&&E(t)}}}function ei(e){let t,n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,y,v,T,I,D,N,x,M,O,V,L,$,F,q,B=e[45].index+"";function U(t){e[24].call(null,t,e[45])}function j(t){e[25].call(null,t,e[45])}let z={checkIsValid:e[23],Name:"Name"};void 0!==e[45].name.value&&(z.value=e[45].name.value),void 0!==e[45].name.isValid&&(z.isValid=e[45].name.isValid);const W=new Hn({props:z});function K(t){e[27].call(null,t,e[45])}function G(t){e[28].call(null,t,e[45])}J.push(()=>Se(W,"value",U)),J.push(()=>Se(W,"isValid",j));let Q={checkIsValid:e[26],Name:"Age",type:"number"};void 0!==e[45].age.isValid&&(Q.isValid=e[45].age.isValid),void 0!==e[45].age.value&&(Q.value=e[45].age.value);const H=new Hn({props:Q});function Y(){e[29].call(f,e[45])}function X(t){e[31].call(null,t,e[45])}function Z(t){e[32].call(null,t,e[45])}J.push(()=>Se(H,"isValid",K)),J.push(()=>Se(H,"value",G));let ee={checkIsValid:e[30],Name:"Current City"};void 0!==e[45].city.isValid&&(ee.isValid=e[45].city.isValid),void 0!==e[45].city.value&&(ee.value=e[45].city.value);const te=new Hn({props:ee});function ne(t){e[34].call(null,t,e[45])}function oe(t){e[35].call(null,t,e[45])}J.push(()=>Se(te,"isValid",X)),J.push(()=>Se(te,"value",Z));let ae={checkIsValid:e[33],Name:"Role Within Team"};void 0!==e[45].role.isValid&&(ae.isValid=e[45].role.isValid),void 0!==e[45].role.value&&(ae.value=e[45].role.value);const se=new Hn({props:ae});function ue(t){e[37].call(null,t,e[45])}function ce(t){e[38].call(null,t,e[45])}J.push(()=>Se(se,"isValid",ne)),J.push(()=>Se(se,"value",oe));let le={checkIsValid:e[36],Name:"Educational Background"};void 0!==e[45].educationalBackground.isValid&&(le.isValid=e[45].educationalBackground.isValid),void 0!==e[45].educationalBackground.value&&(le.value=e[45].educationalBackground.value);const he=new Hn({props:le});function fe(t){e[40].call(null,t,e[45])}function de(t){e[41].call(null,t,e[45])}J.push(()=>Se(he,"isValid",ue)),J.push(()=>Se(he,"value",ce));let pe={multiline:!0,checkIsValid:e[39],Name:"Work Experience"};void 0!==e[45].workExperience.isValid&&(pe.isValid=e[45].workExperience.isValid),void 0!==e[45].workExperience.value&&(pe.value=e[45].workExperience.value);const ye=new Hn({props:pe});return J.push(()=>Se(ye,"isValid",fe)),J.push(()=>Se(ye,"value",de)),{c(){t=S("div"),n=S("h3"),r=C("Member #"),i=C(B),o=k(),Ie(W.$$.fragment),u=k(),Ie(H.$$.fragment),h=k(),f=S("select"),d=S("option"),d.textContent="Gender",p=S("option"),p.textContent="Male",m=S("option"),m.textContent="Female",g=k(),Ie(te.$$.fragment),T=k(),Ie(se.$$.fragment),N=k(),Ie(he.$$.fragment),O=k(),Ie(ye.$$.fragment),$=k(),_(n,"class","svelte-1b6vduz"),d.__value="",d.value=d.__value,_(d,"class","svelte-1b6vduz"),p.__value="Male",p.value=p.__value,_(p,"class","svelte-1b6vduz"),m.__value="Female",m.value=m.__value,_(m,"class","svelte-1b6vduz"),_(f,"class","genderSelect svelte-1b6vduz"),void 0===e[45].gender.value&&re(Y),_(t,"class","TeamMemberContainer svelte-1b6vduz")},m(a,s){w(a,t,s),b(t,n),b(n,r),b(n,i),b(t,o),Ce(W,t,null),b(t,u),Ce(H,t,null),b(t,h),b(t,f),b(f,d),b(f,p),b(f,m),P(f,e[45].gender.value),b(t,g),Ce(te,t,null),b(t,T),Ce(se,t,null),b(t,N),Ce(he,t,null),b(t,O),Ce(ye,t,null),b(t,$),F=!0,q=A(f,"change",Y)},p(t,n){e=t,(!F||8&n[0])&&B!==(B=e[45].index+"")&&R(i,B);const r={};!a&&8&n[0]&&(a=!0,r.value=e[45].name.value,ie(()=>a=!1)),!s&&8&n[0]&&(s=!0,r.isValid=e[45].name.isValid,ie(()=>s=!1)),W.$set(r);const o={};!c&&8&n[0]&&(c=!0,o.isValid=e[45].age.isValid,ie(()=>c=!1)),!l&&8&n[0]&&(l=!0,o.value=e[45].age.value,ie(()=>l=!1)),H.$set(o),8&n[0]&&P(f,e[45].gender.value);const u={};!y&&8&n[0]&&(y=!0,u.isValid=e[45].city.isValid,ie(()=>y=!1)),!v&&8&n[0]&&(v=!0,u.value=e[45].city.value,ie(()=>v=!1)),te.$set(u);const h={};!I&&8&n[0]&&(I=!0,h.isValid=e[45].role.isValid,ie(()=>I=!1)),!D&&8&n[0]&&(D=!0,h.value=e[45].role.value,ie(()=>D=!1)),se.$set(h);const d={};!x&&8&n[0]&&(x=!0,d.isValid=e[45].educationalBackground.isValid,ie(()=>x=!1)),!M&&8&n[0]&&(M=!0,d.value=e[45].educationalBackground.value,ie(()=>M=!1)),he.$set(d);const p={};!V&&8&n[0]&&(V=!0,p.isValid=e[45].workExperience.isValid,ie(()=>V=!1)),!L&&8&n[0]&&(L=!0,p.value=e[45].workExperience.value,ie(()=>L=!1)),ye.$set(p)},i(e){F||(me(W.$$.fragment,e),me(H.$$.fragment,e),me(te.$$.fragment,e),me(se.$$.fragment,e),me(he.$$.fragment,e),me(ye.$$.fragment,e),F=!0)},o(e){ge(W.$$.fragment,e),ge(H.$$.fragment,e),ge(te.$$.fragment,e),ge(se.$$.fragment,e),ge(he.$$.fragment,e),ge(ye.$$.fragment,e),F=!1},d(e){e&&E(t),ke(W),ke(H),ke(te),ke(se),ke(he),ke(ye),q()}}}function ti(e){let t,n,r,i;function o(t){e[20].call(null,t,e[45])}function a(t){e[21].call(null,t,e[45])}function s(t){e[22].call(null,t,e[45])}let u={question:e[45].params.question};void 0!==e[45].data.answer&&(u.answer=e[45].data.answer),void 0!==e[45].data.value&&(u.value=e[45].data.value),void 0!==e[45].data.isValid&&(u.isValid=e[45].data.isValid);const c=new Dr({props:u});return J.push(()=>Se(c,"answer",o)),J.push(()=>Se(c,"value",a)),J.push(()=>Se(c,"isValid",s)),{c(){Ie(c.$$.fragment)},m(e,t){Ce(c,e,t),i=!0},p(i,o){e=i;const a={};8&o[0]&&(a.question=e[45].params.question),!t&&8&o[0]&&(t=!0,a.answer=e[45].data.answer,ie(()=>t=!1)),!n&&8&o[0]&&(n=!0,a.value=e[45].data.value,ie(()=>n=!1)),!r&&8&o[0]&&(r=!0,a.isValid=e[45].data.isValid,ie(()=>r=!1)),c.$set(a)},i(e){i||(me(c.$$.fragment,e),i=!0)},o(e){ge(c.$$.fragment,e),i=!1},d(e){ke(c,e)}}}function ni(e){let t,r,i;const o=[e[45]];function a(t){e[18].call(null,t,e[45])}function s(t){e[19].call(null,t,e[45])}let u={};for(let e=0;e<o.length;e+=1)u=n(u,o[e]);void 0!==e[45].data.value&&(u.chosenValue=e[45].data.value),void 0!==e[45].data.isValid&&(u.isValid=e[45].data.isValid);const c=new br({props:u});return J.push(()=>Se(c,"chosenValue",a)),J.push(()=>Se(c,"isValid",s)),{c(){Ie(c.$$.fragment)},m(e,t){Ce(c,e,t),i=!0},p(n,i){e=n;const a=8&i[0]?Ee(o,[Te(e[45])]):{};!t&&8&i[0]&&(t=!0,a.chosenValue=e[45].data.value,ie(()=>t=!1)),!r&&8&i[0]&&(r=!0,a.isValid=e[45].data.isValid,ie(()=>r=!1)),c.$set(a)},i(e){i||(me(c.$$.fragment,e),i=!0)},o(e){ge(c.$$.fragment,e),i=!1},d(e){ke(c,e)}}}function ri(e){let t,n,r;function i(t){e[16].call(null,t,e[45])}function o(t){e[17].call(null,t,e[45])}let s={isAllowed:e[15]};void 0!==e[45].data.date&&(s.chosenDate=e[45].data.date),void 0!==e[45].data.date&&(s.selected=e[45].data.date);const u=new pr({props:s});return J.push(()=>Se(u,"chosenDate",i)),J.push(()=>Se(u,"selected",o)),u.$on("datechange",(function(){a(e[45].params.onDateChange)&&e[45].params.onDateChange.apply(this,arguments)})),{c(){Ie(u.$$.fragment)},m(e,t){Ce(u,e,t),r=!0},p(r,i){e=r;const o={};!t&&8&i[0]&&(t=!0,o.chosenDate=e[45].data.date,ie(()=>t=!1)),!n&&8&i[0]&&(n=!0,o.selected=e[45].data.date,ie(()=>n=!1)),u.$set(o)},i(e){r||(me(u.$$.fragment,e),r=!0)},o(e){ge(u.$$.fragment,e),r=!1},d(e){ke(u,e)}}}function ii(e){let t,r,i;const o=[e[45]];function a(t){e[13].call(null,t,e[45])}function s(t){e[14].call(null,t,e[45])}let u={};for(let e=0;e<o.length;e+=1)u=n(u,o[e]);void 0!==e[45].data.value&&(u.value=e[45].data.value),void 0!==e[45].data.isValid&&(u.isValid=e[45].data.isValid);const c=new Hn({props:u});return J.push(()=>Se(c,"value",a)),J.push(()=>Se(c,"isValid",s)),{c(){Ie(c.$$.fragment)},m(e,t){Ce(c,e,t),i=!0},p(n,i){e=n;const a=8&i[0]?Ee(o,[Te(e[45])]):{};!t&&8&i[0]&&(t=!0,a.value=e[45].data.value,ie(()=>t=!1)),!r&&8&i[0]&&(r=!0,a.isValid=e[45].data.isValid,ie(()=>r=!1)),c.$set(a)},i(e){i||(me(c.$$.fragment,e),i=!0)},o(e){ge(c.$$.fragment,e),i=!1},d(e){ke(c,e)}}}function oi(e){let t,n,r,i;const o=[ii,ri,ni,ti,ei],a=[];function s(e,t){return"text"===e[45].type||"email"===e[45].type?0:"date"===e[45].type?1:"radio"===e[45].type?2:"yes-no"===e[45].type?3:"member"===e[45].type?4:-1}return~(t=s(e))&&(n=a[t]=o[t](e)),{c(){n&&n.c(),r=D()},m(e,n){~t&&a[t].m(e,n),w(e,r,n),i=!0},p(e,i){let u=t;t=s(e),t===u?~t&&a[t].p(e,i):(n&&(de(),ge(a[u],1,1,()=>{a[u]=null}),pe()),~t?(n=a[t],n||(n=a[t]=o[t](e),n.c()),me(n,1),n.m(r.parentNode,r)):n=null)},i(e){i||(me(n),i=!0)},o(e){ge(n),i=!1},d(e){~t&&a[t].d(e),e&&E(r)}}}function ai(t){let n;const r=new et({props:{primary:!0,text:"Previous"}});return r.$on("click",t[6]),{c(){Ie(r.$$.fragment)},m(e,t){Ce(r,e,t),n=!0},p:e,i(e){n||(me(r.$$.fragment,e),n=!0)},o(e){ge(r.$$.fragment,e),n=!1},d(e){ke(r,e)}}}function si(e){let t;return{c(){t=S("p"),t.textContent="please fill all required fields",_(t,"class","svelte-1b6vduz")},m(e,n){w(e,t,n)},d(e){e&&E(t)}}}function ui(e){let t,n,r=e[0]==e[42]&&Jr(e);return{c(){r&&r.c(),t=D()},m(e,i){r&&r.m(e,i),w(e,t,i),n=!0},p(e,n){e[0]==e[42]?r?(r.p(e,n),me(r,1)):(r=Jr(e),r.c(),me(r,1),r.m(t.parentNode,t)):r&&(de(),ge(r,1,1,()=>{r=null}),pe())},i(e){n||(me(r),n=!0)},o(e){ge(r),n=!1},d(e){r&&r.d(e),e&&E(t)}}}function ci(e){let t;const n=new ct({props:{$$slots:{default:[li]},$$scope:{ctx:e}}});return n.$on("close",e[8]),{c(){Ie(n.$$.fragment)},m(e,r){Ce(n,e,r),t=!0},p(e,t){const r={};131072&t[1]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(me(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){ke(n,e)}}}function li(t){let n;const r=new xr({});return r.$on("accept",t[9]),{c(){Ie(r.$$.fragment)},m(e,t){Ce(r,e,t),n=!0},p:e,i(e){n||(me(r.$$.fragment,e),n=!0)},o(e){ge(r.$$.fragment,e),n=!1},d(e){ke(r,e)}}}function hi(e){let t,n,r,i,o,a,s,u,c,l,h,f,d=Object.keys(e[3]),p=[];for(let t=0;t<d.length;t+=1)p[t]=ui(Xr(e,d,t));const m=e=>ge(p[e],1,1,()=>{p[e]=null});let g=e[1]&&ci(e);return{c(){t=S("section"),n=S("form"),r=S("ul"),i=S("li"),i.textContent="Company Overview",o=k(),a=S("li"),a.textContent="Contact Information",s=k(),u=S("div"),c=S("div");for(let e=0;e<p.length;e+=1)p[e].c();l=k(),g&&g.c(),h=D(),_(i,"class","svelte-1b6vduz"),L(i,"active",e[0]>=0),_(a,"class","svelte-1b6vduz"),L(a,"active",e[0]>=1),_(r,"id","progressbar"),_(r,"class","svelte-1b6vduz"),_(c,"class","FormStageContainer svelte-1b6vduz"),_(u,"class","FormContentContainer svelte-1b6vduz"),_(n,"id","msform"),_(n,"class","svelte-1b6vduz"),_(t,"class","svelte-1b6vduz")},m(e,d){w(e,t,d),b(t,n),b(n,r),b(r,i),b(r,o),b(r,a),b(n,s),b(n,u),b(u,c);for(let e=0;e<p.length;e+=1)p[e].m(c,null);w(e,l,d),g&&g.m(e,d),w(e,h,d),f=!0},p(e,t){if(1&t[0]&&L(i,"active",e[0]>=0),1&t[0]&&L(a,"active",e[0]>=1),253&t[0]){let n;for(d=Object.keys(e[3]),n=0;n<d.length;n+=1){const r=Xr(e,d,n);p[n]?(p[n].p(r,t),me(p[n],1)):(p[n]=ui(r),p[n].c(),me(p[n],1),p[n].m(c,null))}for(de(),n=d.length;n<p.length;n+=1)m(n);pe()}e[1]?g?(g.p(e,t),me(g,1)):(g=ci(e),g.c(),me(g,1),g.m(h.parentNode,h)):g&&(de(),ge(g,1,1,()=>{g=null}),pe())},i(e){if(!f){for(let e=0;e<d.length;e+=1)me(p[e]);me(g),f=!0}},o(e){p=p.filter(Boolean);for(let e=0;e<p.length;e+=1)ge(p[e]);ge(g),f=!1},d(e){e&&E(t),T(p,e),e&&E(l),g&&g.d(e),e&&E(h)}}}function fi(e,t,n){let r,i,o=0,a=document.querySelectorAll("#msform"),s={0:{title:"Company Overview",subtitle:"",elements:[{Name:"Company Name",type:"text",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"Idea Overview",type:"text",multiline:!0,data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"How far along are you?",type:"radio",data:{},items:["Idea","Prototype","Users","Paying Users"],errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)}]},1:{title:"Contact Information",elements:[{Name:"FullName",type:"text",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"cellphone",type:"text",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"Email",type:"email",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)}]}},u={stagemap:{0:"companyInfo",1:"contactInfo"},companyInfo:{},contactInfo:{}};G(()=>{document.querySelector("html").style.backgroundColor=" rgb(129, 111, 131)"}),Q(()=>{document.querySelector("html").style.backgroundColor=""});return e.$$.update=()=>{1032&e.$$.dirty[0]&&Object.keys(s).map(e=>{let t=[];s[e].elements.map(r=>{"text"===r.type|"email"===r.type||"radio"===r.type?(n(10,u[u.stagemap[e]][r.Name]=r.data.value,u),t.push(r.data.isValid)):"yes-no"===r.type?(n(10,u[u.stagemap[e]][r.question]=r.data.answer,u),n(10,u[u.stagemap[e]].subquestion=r.data.value,u),t.push(r.data.isValid)):"member"===r.type&&(n(10,u[u.stagemap[e]][r.index]={name:r.name.value,age:r.age.value,gender:r.gender.value,role:r.role.value,city:r.gender.value,educationalBackground:r.educationalBackground.value,workExperience:r.workExperience.value},u),t.push(r.name.isValid),t.push(r.age.isValid),t.push(r.gender.isValid),t.push(r.role.isValid),t.push(r.gender.isValid),t.push(r.educationalBackground.isValid),t.push(r.workExperience.isValid))}),console.log(t),n(10,u[u.stagemap[e]].isStageValid=-1===t.findIndex(e=>!1===e),u)})},[o,r,i,s,1,e=>{u[u.stagemap[o]].isStageValid?(n(0,o=(o+1)%3),n(2,i="")):n(2,i=!0)},e=>{n(0,o=(o-1)%3),n(2,i="")},()=>{if(!u[u.stagemap[o]].isStageValid)return;!function e(t){Object.keys(t).map(n=>{void 0===t[n]&&delete t[n],"object"==typeof t[n]&&e(t[n])})}(u),qn.collection("exhipition").add(u).then((function(){console.log("Document successfully written!"),n(1,r=!0)})).catch((function(e){console.error("Error writing document: ",e)}))},()=>{n(1,r=!r)},e=>{je("/#/")},u,0,a,function(e,t){t.data.value=e,n(3,s)},function(e,t){t.data.isValid=e,n(3,s)},e=>{const t=e.getTime();return t+9e7<Date.now()||!(t>Date.now()+3888e6)},function(e,t){t.data.date=e,n(3,s)},function(e,t){t.data.date=e,n(3,s)},function(e,t){t.data.value=e,n(3,s)},function(e,t){t.data.isValid=e,n(3,s)},function(e,t){t.data.answer=e,n(3,s)},function(e,t){t.data.value=e,n(3,s)},function(e,t){t.data.isValid=e,n(3,s)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.name.value=e,n(3,s)},function(e,t){t.name.isValid=e,n(3,s)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.age.isValid=e,n(3,s)},function(e,t){t.age.value=e,n(3,s)},function(e){e.gender.value=V(this),n(3,s)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.city.isValid=e,n(3,s)},function(e,t){t.city.value=e,n(3,s)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.role.isValid=e,n(3,s)},function(e,t){t.role.value=e,n(3,s)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.educationalBackground.isValid=e,n(3,s)},function(e,t){t.educationalBackground.value=e,n(3,s)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.workExperience.isValid=e,n(3,s)},function(e,t){t.workExperience.value=e,n(3,s)}]}function di(e,t,n){const r=e.slice();return r[46]=t[n],r[47]=t,r[48]=n,r}function pi(e,t,n){const r=e.slice();return r[43]=t[n],r}function mi(e){let t,n,r,i,o,s,u,c,l,h,f,d,p,m=e[4][e[43]].title+"",g=e[4][e[43]].subtitle&&gi(e),y=1===e[0]&&yi(e),v=e[4][e[43]].elements,I=[];for(let t=0;t<v.length;t+=1)I[t]=Si(di(e,v,t));const A=e=>ge(I[e],1,1,()=>{I[e]=null});let N=e[0]>0&&Ii(e);const x=new et({props:{primary:!0,text:e[0]===e[5]?"Submit":"Next"}});x.$on("click",(function(){a(e[0]===e[5]?e[8]:e[6])&&(e[0]===e[5]?e[8]:e[6]).apply(this,arguments)}));let M=""!==e[3]&&void 0!==e[3]&&Ci();return{c(){t=S("div"),n=S("div"),r=S("h3"),i=C(m),o=k(),g&&g.c(),s=k(),y&&y.c(),u=k();for(let e=0;e<I.length;e+=1)I[e].c();c=k(),l=S("div"),N&&N.c(),h=k(),Ie(x.$$.fragment),f=k(),M&&M.c(),d=D(),_(r,"class","FormTitle svelte-ehmav6"),_(n,"class","FormHeadings svelte-ehmav6"),_(t,"class","FormInputsContainer svelte-ehmav6"),_(l,"class","FormControls svelte-ehmav6")},m(e,a){w(e,t,a),b(t,n),b(n,r),b(r,i),b(n,o),g&&g.m(n,null),b(t,s),y&&y.m(t,null),b(t,u);for(let e=0;e<I.length;e+=1)I[e].m(t,null);w(e,c,a),w(e,l,a),N&&N.m(l,null),b(l,h),Ce(x,l,null),w(e,f,a),M&&M.m(e,a),w(e,d,a),p=!0},p(r,o){if(e=r,(!p||16&o[0])&&m!==(m=e[4][e[43]].title+"")&&R(i,m),e[4][e[43]].subtitle?g?g.p(e,o):(g=gi(e),g.c(),g.m(n,null)):g&&(g.d(1),g=null),1===e[0]?y?y.p(e,o):(y=yi(e),y.c(),y.m(t,u)):y&&(y.d(1),y=null),16&o[0]){let n;for(v=e[4][e[43]].elements,n=0;n<v.length;n+=1){const r=di(e,v,n);I[n]?(I[n].p(r,o),me(I[n],1)):(I[n]=Si(r),I[n].c(),me(I[n],1),I[n].m(t,null))}for(de(),n=v.length;n<I.length;n+=1)A(n);pe()}e[0]>0?N?(N.p(e,o),me(N,1)):(N=Ii(e),N.c(),me(N,1),N.m(l,h)):N&&(de(),ge(N,1,1,()=>{N=null}),pe());const a={};1&o[0]&&(a.text=e[0]===e[5]?"Submit":"Next"),x.$set(a),""!==e[3]&&void 0!==e[3]?M||(M=Ci(),M.c(),M.m(d.parentNode,d)):M&&(M.d(1),M=null)},i(e){if(!p){for(let e=0;e<v.length;e+=1)me(I[e]);me(N),me(x.$$.fragment,e),p=!0}},o(e){I=I.filter(Boolean);for(let e=0;e<I.length;e+=1)ge(I[e]);ge(N),ge(x.$$.fragment,e),p=!1},d(e){e&&E(t),g&&g.d(),y&&y.d(),T(I,e),e&&E(c),e&&E(l),N&&N.d(),ke(x),e&&E(f),M&&M.d(e),e&&E(d)}}}function gi(e){let t,n,r=e[4][e[43]].subtitle+"";return{c(){t=S("p"),n=C(r),_(t,"class","FormSubTitle svelte-ehmav6")},m(e,r){w(e,t,r),b(t,n)},p(e,t){16&t[0]&&r!==(r=e[4][e[43]].subtitle+"")&&R(n,r)},d(e){e&&E(t)}}}function yi(e){let t,n,r,i=e[1]>=4?"Maximum number of members Reached":"Add Team Member";function o(...t){return e[13](e[43],...t)}return{c(){t=S("button"),n=C(i),_(t,"class","addMemberBTN svelte-ehmav6")},m(e,i){w(e,t,i),b(t,n),r=A(t,"click",N(o))},p(t,r){e=t,2&r[0]&&i!==(i=e[1]>=4?"Maximum number of members Reached":"Add Team Member")&&R(n,i)},d(e){e&&E(t),r()}}}function vi(e){let t,n,r,i,o,a,s,u,c,l,h,f,d,p,m,g,y,v,T,I,D,N,x,M,O,V,L,$,F,q,B=e[46].index+"";function U(t){e[25].call(null,t,e[46])}function j(t){e[26].call(null,t,e[46])}let z={checkIsValid:e[24],Name:"Name"};void 0!==e[46].name.value&&(z.value=e[46].name.value),void 0!==e[46].name.isValid&&(z.isValid=e[46].name.isValid);const W=new Hn({props:z});function K(t){e[28].call(null,t,e[46])}function G(t){e[29].call(null,t,e[46])}J.push(()=>Se(W,"value",U)),J.push(()=>Se(W,"isValid",j));let Q={checkIsValid:e[27],Name:"Age",type:"number"};void 0!==e[46].age.isValid&&(Q.isValid=e[46].age.isValid),void 0!==e[46].age.value&&(Q.value=e[46].age.value);const H=new Hn({props:Q});function Y(){e[30].call(f,e[46])}function X(t){e[32].call(null,t,e[46])}function Z(t){e[33].call(null,t,e[46])}J.push(()=>Se(H,"isValid",K)),J.push(()=>Se(H,"value",G));let ee={checkIsValid:e[31],Name:"Current City"};void 0!==e[46].city.isValid&&(ee.isValid=e[46].city.isValid),void 0!==e[46].city.value&&(ee.value=e[46].city.value);const te=new Hn({props:ee});function ne(t){e[35].call(null,t,e[46])}function oe(t){e[36].call(null,t,e[46])}J.push(()=>Se(te,"isValid",X)),J.push(()=>Se(te,"value",Z));let ae={checkIsValid:e[34],Name:"Role Within Team"};void 0!==e[46].role.isValid&&(ae.isValid=e[46].role.isValid),void 0!==e[46].role.value&&(ae.value=e[46].role.value);const se=new Hn({props:ae});function ue(t){e[38].call(null,t,e[46])}function ce(t){e[39].call(null,t,e[46])}J.push(()=>Se(se,"isValid",ne)),J.push(()=>Se(se,"value",oe));let le={checkIsValid:e[37],Name:"Educational Background"};void 0!==e[46].educationalBackground.isValid&&(le.isValid=e[46].educationalBackground.isValid),void 0!==e[46].educationalBackground.value&&(le.value=e[46].educationalBackground.value);const he=new Hn({props:le});function fe(t){e[41].call(null,t,e[46])}function de(t){e[42].call(null,t,e[46])}J.push(()=>Se(he,"isValid",ue)),J.push(()=>Se(he,"value",ce));let pe={multiline:!0,checkIsValid:e[40],Name:"Work Experience"};void 0!==e[46].workExperience.isValid&&(pe.isValid=e[46].workExperience.isValid),void 0!==e[46].workExperience.value&&(pe.value=e[46].workExperience.value);const ye=new Hn({props:pe});return J.push(()=>Se(ye,"isValid",fe)),J.push(()=>Se(ye,"value",de)),{c(){t=S("div"),n=S("h3"),r=C("Member #"),i=C(B),o=k(),Ie(W.$$.fragment),u=k(),Ie(H.$$.fragment),h=k(),f=S("select"),d=S("option"),d.textContent="Gender",p=S("option"),p.textContent="Male",m=S("option"),m.textContent="Female",g=k(),Ie(te.$$.fragment),T=k(),Ie(se.$$.fragment),N=k(),Ie(he.$$.fragment),O=k(),Ie(ye.$$.fragment),$=k(),_(n,"class","svelte-ehmav6"),d.__value="",d.value=d.__value,_(d,"class","svelte-ehmav6"),p.__value="Male",p.value=p.__value,_(p,"class","svelte-ehmav6"),m.__value="Female",m.value=m.__value,_(m,"class","svelte-ehmav6"),_(f,"class","genderSelect svelte-ehmav6"),void 0===e[46].gender.value&&re(Y),_(t,"class","TeamMemberContainer svelte-ehmav6")},m(a,s){w(a,t,s),b(t,n),b(n,r),b(n,i),b(t,o),Ce(W,t,null),b(t,u),Ce(H,t,null),b(t,h),b(t,f),b(f,d),b(f,p),b(f,m),P(f,e[46].gender.value),b(t,g),Ce(te,t,null),b(t,T),Ce(se,t,null),b(t,N),Ce(he,t,null),b(t,O),Ce(ye,t,null),b(t,$),F=!0,q=A(f,"change",Y)},p(t,n){e=t,(!F||16&n[0])&&B!==(B=e[46].index+"")&&R(i,B);const r={};!a&&16&n[0]&&(a=!0,r.value=e[46].name.value,ie(()=>a=!1)),!s&&16&n[0]&&(s=!0,r.isValid=e[46].name.isValid,ie(()=>s=!1)),W.$set(r);const o={};!c&&16&n[0]&&(c=!0,o.isValid=e[46].age.isValid,ie(()=>c=!1)),!l&&16&n[0]&&(l=!0,o.value=e[46].age.value,ie(()=>l=!1)),H.$set(o),16&n[0]&&P(f,e[46].gender.value);const u={};!y&&16&n[0]&&(y=!0,u.isValid=e[46].city.isValid,ie(()=>y=!1)),!v&&16&n[0]&&(v=!0,u.value=e[46].city.value,ie(()=>v=!1)),te.$set(u);const h={};!I&&16&n[0]&&(I=!0,h.isValid=e[46].role.isValid,ie(()=>I=!1)),!D&&16&n[0]&&(D=!0,h.value=e[46].role.value,ie(()=>D=!1)),se.$set(h);const d={};!x&&16&n[0]&&(x=!0,d.isValid=e[46].educationalBackground.isValid,ie(()=>x=!1)),!M&&16&n[0]&&(M=!0,d.value=e[46].educationalBackground.value,ie(()=>M=!1)),he.$set(d);const p={};!V&&16&n[0]&&(V=!0,p.isValid=e[46].workExperience.isValid,ie(()=>V=!1)),!L&&16&n[0]&&(L=!0,p.value=e[46].workExperience.value,ie(()=>L=!1)),ye.$set(p)},i(e){F||(me(W.$$.fragment,e),me(H.$$.fragment,e),me(te.$$.fragment,e),me(se.$$.fragment,e),me(he.$$.fragment,e),me(ye.$$.fragment,e),F=!0)},o(e){ge(W.$$.fragment,e),ge(H.$$.fragment,e),ge(te.$$.fragment,e),ge(se.$$.fragment,e),ge(he.$$.fragment,e),ge(ye.$$.fragment,e),F=!1},d(e){e&&E(t),ke(W),ke(H),ke(te),ke(se),ke(he),ke(ye),q()}}}function bi(e){let t,r,i,o;const a=[{question:e[46].params.question},e[46]];function s(t){e[21].call(null,t,e[46])}function u(t){e[22].call(null,t,e[46])}function c(t){e[23].call(null,t,e[46])}let l={};for(let e=0;e<a.length;e+=1)l=n(l,a[e]);void 0!==e[46].data.answer&&(l.answer=e[46].data.answer),void 0!==e[46].data.value&&(l.value=e[46].data.value),void 0!==e[46].data.isValid&&(l.isValid=e[46].data.isValid);const h=new Dr({props:l});return J.push(()=>Se(h,"answer",s)),J.push(()=>Se(h,"value",u)),J.push(()=>Se(h,"isValid",c)),{c(){Ie(h.$$.fragment)},m(e,t){Ce(h,e,t),o=!0},p(n,o){e=n;const s=16&o[0]?Ee(a,[a[0],Te(e[46])]):{};!t&&16&o[0]&&(t=!0,s.answer=e[46].data.answer,ie(()=>t=!1)),!r&&16&o[0]&&(r=!0,s.value=e[46].data.value,ie(()=>r=!1)),!i&&16&o[0]&&(i=!0,s.isValid=e[46].data.isValid,ie(()=>i=!1)),h.$set(s)},i(e){o||(me(h.$$.fragment,e),o=!0)},o(e){ge(h.$$.fragment,e),o=!1},d(e){ke(h,e)}}}function wi(e){let t,r,i;const o=[e[46]];function a(t){e[19].call(null,t,e[46])}function s(t){e[20].call(null,t,e[46])}let u={};for(let e=0;e<o.length;e+=1)u=n(u,o[e]);void 0!==e[46].data.value&&(u.chosenValue=e[46].data.value),void 0!==e[46].data.isValid&&(u.isValid=e[46].data.isValid);const c=new br({props:u});return J.push(()=>Se(c,"chosenValue",a)),J.push(()=>Se(c,"isValid",s)),{c(){Ie(c.$$.fragment)},m(e,t){Ce(c,e,t),i=!0},p(n,i){e=n;const a=16&i[0]?Ee(o,[Te(e[46])]):{};!t&&16&i[0]&&(t=!0,a.chosenValue=e[46].data.value,ie(()=>t=!1)),!r&&16&i[0]&&(r=!0,a.isValid=e[46].data.isValid,ie(()=>r=!1)),c.$set(a)},i(e){i||(me(c.$$.fragment,e),i=!0)},o(e){ge(c.$$.fragment,e),i=!1},d(e){ke(c,e)}}}function Ei(e){let t,n,r;function i(t){e[17].call(null,t,e[46])}function o(t){e[18].call(null,t,e[46])}let s={isAllowed:e[16]};void 0!==e[46].data.date&&(s.chosenDate=e[46].data.date),void 0!==e[46].data.date&&(s.selected=e[46].data.date);const u=new pr({props:s});return J.push(()=>Se(u,"chosenDate",i)),J.push(()=>Se(u,"selected",o)),u.$on("datechange",(function(){a(e[46].params.onDateChange)&&e[46].params.onDateChange.apply(this,arguments)})),{c(){Ie(u.$$.fragment)},m(e,t){Ce(u,e,t),r=!0},p(r,i){e=r;const o={};!t&&16&i[0]&&(t=!0,o.chosenDate=e[46].data.date,ie(()=>t=!1)),!n&&16&i[0]&&(n=!0,o.selected=e[46].data.date,ie(()=>n=!1)),u.$set(o)},i(e){r||(me(u.$$.fragment,e),r=!0)},o(e){ge(u.$$.fragment,e),r=!1},d(e){ke(u,e)}}}function Ti(e){let t,r,i;const o=[e[46]];function a(t){e[14].call(null,t,e[46])}function s(t){e[15].call(null,t,e[46])}let u={};for(let e=0;e<o.length;e+=1)u=n(u,o[e]);void 0!==e[46].data.value&&(u.value=e[46].data.value),void 0!==e[46].data.isValid&&(u.isValid=e[46].data.isValid);const c=new Hn({props:u});return J.push(()=>Se(c,"value",a)),J.push(()=>Se(c,"isValid",s)),{c(){Ie(c.$$.fragment)},m(e,t){Ce(c,e,t),i=!0},p(n,i){e=n;const a=16&i[0]?Ee(o,[Te(e[46])]):{};!t&&16&i[0]&&(t=!0,a.value=e[46].data.value,ie(()=>t=!1)),!r&&16&i[0]&&(r=!0,a.isValid=e[46].data.isValid,ie(()=>r=!1)),c.$set(a)},i(e){i||(me(c.$$.fragment,e),i=!0)},o(e){ge(c.$$.fragment,e),i=!1},d(e){ke(c,e)}}}function Si(e){let t,n,r,i;const o=[Ti,Ei,wi,bi,vi],a=[];function s(e,t){return"text"===e[46].type||"email"===e[46].type?0:"date"===e[46].type?1:"radio"===e[46].type?2:"yes-no"===e[46].type?3:"member"===e[46].type?4:-1}return~(t=s(e))&&(n=a[t]=o[t](e)),{c(){n&&n.c(),r=D()},m(e,n){~t&&a[t].m(e,n),w(e,r,n),i=!0},p(e,i){let u=t;t=s(e),t===u?~t&&a[t].p(e,i):(n&&(de(),ge(a[u],1,1,()=>{a[u]=null}),pe()),~t?(n=a[t],n||(n=a[t]=o[t](e),n.c()),me(n,1),n.m(r.parentNode,r)):n=null)},i(e){i||(me(n),i=!0)},o(e){ge(n),i=!1},d(e){~t&&a[t].d(e),e&&E(r)}}}function Ii(t){let n;const r=new et({props:{primary:!0,text:"Previous"}});return r.$on("click",t[7]),{c(){Ie(r.$$.fragment)},m(e,t){Ce(r,e,t),n=!0},p:e,i(e){n||(me(r.$$.fragment,e),n=!0)},o(e){ge(r.$$.fragment,e),n=!1},d(e){ke(r,e)}}}function Ci(e){let t;return{c(){t=S("p"),t.textContent="please fill all required fields",_(t,"class","svelte-ehmav6")},m(e,n){w(e,t,n)},d(e){e&&E(t)}}}function ki(e){let t,n,r=e[0]==e[43]&&mi(e);return{c(){r&&r.c(),t=D()},m(e,i){r&&r.m(e,i),w(e,t,i),n=!0},p(e,n){e[0]==e[43]?r?(r.p(e,n),me(r,1)):(r=mi(e),r.c(),me(r,1),r.m(t.parentNode,t)):r&&(de(),ge(r,1,1,()=>{r=null}),pe())},i(e){n||(me(r),n=!0)},o(e){ge(r),n=!1},d(e){r&&r.d(e),e&&E(t)}}}function Di(e){let t;const n=new ct({props:{$$slots:{default:[Ai]},$$scope:{ctx:e}}});return n.$on("close",e[9]),{c(){Ie(n.$$.fragment)},m(e,r){Ce(n,e,r),t=!0},p(e,t){const r={};262144&t[1]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(me(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){ke(n,e)}}}function Ai(t){let n;const r=new xr({});return r.$on("accept",t[10]),{c(){Ie(r.$$.fragment)},m(e,t){Ce(r,e,t),n=!0},p:e,i(e){n||(me(r.$$.fragment,e),n=!0)},o(e){ge(r.$$.fragment,e),n=!1},d(e){ke(r,e)}}}function Ni(e){let t,n,r,i,o,a,s,u,c,l,h=Object.keys(e[4]),f=[];for(let t=0;t<h.length;t+=1)f[t]=ki(pi(e,h,t));const d=e=>ge(f[e],1,1,()=>{f[e]=null});let p=e[2]&&Di(e);return{c(){t=S("section"),n=S("form"),r=S("ul"),i=S("li"),i.textContent="Info",o=k(),a=S("div"),s=S("div");for(let e=0;e<f.length;e+=1)f[e].c();u=k(),p&&p.c(),c=D(),_(i,"class","svelte-ehmav6"),L(i,"active",e[0]>=0),_(r,"id","progressbar"),_(r,"class","svelte-ehmav6"),_(s,"class","FormStageContainer svelte-ehmav6"),_(a,"class","FormContentContainer svelte-ehmav6"),_(n,"id","msform"),_(n,"class","svelte-ehmav6"),_(t,"class","svelte-ehmav6")},m(e,h){w(e,t,h),b(t,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s);for(let e=0;e<f.length;e+=1)f[e].m(s,null);w(e,u,h),p&&p.m(e,h),w(e,c,h),l=!0},p(e,t){if(1&t[0]&&L(i,"active",e[0]>=0),507&t[0]){let n;for(h=Object.keys(e[4]),n=0;n<h.length;n+=1){const r=pi(e,h,n);f[n]?(f[n].p(r,t),me(f[n],1)):(f[n]=ki(r),f[n].c(),me(f[n],1),f[n].m(s,null))}for(de(),n=h.length;n<f.length;n+=1)d(n);pe()}e[2]?p?(p.p(e,t),me(p,1)):(p=Di(e),p.c(),me(p,1),p.m(c.parentNode,c)):p&&(de(),ge(p,1,1,()=>{p=null}),pe())},i(e){if(!l){for(let e=0;e<h.length;e+=1)me(f[e]);me(p),l=!0}},o(e){f=f.filter(Boolean);for(let e=0;e<f.length;e+=1)ge(f[e]);ge(p),l=!1},d(e){e&&E(t),T(f,e),e&&E(u),p&&p.d(e),e&&E(c)}}}function xi(e,t,n){let r,i,o=0,a=0,s=document.querySelectorAll("#msform"),u={0:{title:"Atendee Information",subtitle:"",elements:[{Name:"Full Name in English",type:"text",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"Full Name in Arabic",type:"text",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"Email",type:"email",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"Phone Number",type:"text",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"University/Company",type:"text",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"Faculty/Occupation",type:"text",data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"How would you mark your level in computer science?",type:"radio",data:{},items:["Beginner","Intermediate","Advanced"],errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"Are you planning on attending any workshops?",type:"yes-no",noSubquestion:!0,bindTo:"",data:{},params:{question:"Are you planning on attending any workshops?"}},{Name:"Tell us more about your computer science background and why you would like to join the event.",type:"text",multiline:!0,data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)},{Name:"Show off your work, make sure to include projects worked on with links if possible",type:"text",multiline:!0,data:{},errorMessege:"This field is required.",checkIsValid:e=>!_r.isEmpty(e)}]}},c={stagemap:{0:"info"},info:{}};G(()=>{document.querySelector("html").style.backgroundColor=" rgb(129, 111, 131)"}),Q(()=>{document.querySelector("html").style.backgroundColor=""});return e.$$.update=()=>{2064&e.$$.dirty[0]&&Object.keys(u).map(e=>{let t=[];u[e].elements.map(r=>{"text"===r.type|"email"===r.type||"radio"===r.type?(n(11,c[c.stagemap[e]][r.Name]=r.data.value,c),t.push(r.data.isValid)):"yes-no"===r.type?(n(11,c[c.stagemap[e]][r.question]=r.data.answer,c),n(11,c[c.stagemap[e]].subquestion=r.data.value,c),t.push(r.data.isValid)):"member"===r.type&&(n(11,c[c.stagemap[e]][r.index]={name:r.name.value,age:r.age.value,gender:r.gender.value,role:r.role.value,city:r.gender.value,educationalBackground:r.educationalBackground.value,workExperience:r.workExperience.value},c),t.push(r.name.isValid),t.push(r.age.isValid),t.push(r.gender.isValid),t.push(r.role.isValid),t.push(r.gender.isValid),t.push(r.educationalBackground.isValid),t.push(r.workExperience.isValid))}),console.log(t),n(11,c[c.stagemap[e]].isStageValid=-1===t.findIndex(e=>!1===e),c)}),2048&e.$$.dirty[0]&&console.log(c)},[o,a,r,i,u,0,e=>{c[c.stagemap[o]].isStageValid?(n(0,o=(o+1)%3),n(3,i="")):n(3,i=!0)},e=>{n(0,o=(o-1)%3),n(3,i="")},()=>{if(!c[c.stagemap[o]].isStageValid)return;!function e(t){Object.keys(t).map(n=>{void 0===t[n]&&delete t[n],"object"==typeof t[n]&&e(t[n])})}(c),qn.collection("mutexattendes").add(c).then((function(){console.log("Document successfully written!"),n(2,r=!0)})).catch((function(e){console.error("Error writing document: ",e)}))},()=>{n(2,r=!r)},e=>{je("/#/")},c,s,e=>{a>=4||(n(1,a+=1),n(4,u[e].elements=[...u[e].elements,{type:"member",data:{},index:u[e].elements.length+1,name:{},age:{},gender:{},city:{},role:{},educationalBackground:{},workExperience:{}}],u))},function(e,t){t.data.value=e,n(4,u)},function(e,t){t.data.isValid=e,n(4,u)},e=>{const t=e.getTime();return t+9e7<Date.now()||!(t>Date.now()+3888e6)},function(e,t){t.data.date=e,n(4,u)},function(e,t){t.data.date=e,n(4,u)},function(e,t){t.data.value=e,n(4,u)},function(e,t){t.data.isValid=e,n(4,u)},function(e,t){t.data.answer=e,n(4,u)},function(e,t){t.data.value=e,n(4,u)},function(e,t){t.data.isValid=e,n(4,u)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.name.value=e,n(4,u)},function(e,t){t.name.isValid=e,n(4,u)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.age.isValid=e,n(4,u)},function(e,t){t.age.value=e,n(4,u)},function(e){e.gender.value=V(this),n(4,u)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.city.isValid=e,n(4,u)},function(e,t){t.city.value=e,n(4,u)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.role.isValid=e,n(4,u)},function(e,t){t.role.value=e,n(4,u)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.educationalBackground.isValid=e,n(4,u)},function(e,t){t.educationalBackground.value=e,n(4,u)},e=>_r.isEmpty(e)?"invalid":"valid",function(e,t){t.workExperience.isValid=e,n(4,u)},function(e,t){t.workExperience.value=e,n(4,u)}]}function _i(e,t,n){const r=e.slice();return r[6]=t[n],r}function Ri(e){let t,n=e[6].description+"";return{c(){t=S("div"),_(t,"class","description svelte-1w17ln4")},m(e,r){w(e,t,r),t.innerHTML=n},p(e,r){2&r&&n!==(n=e[6].description+"")&&(t.innerHTML=n)},d(e){e&&E(t)}}}function Mi(e){let t,n,r,i,o,a,s,u,c=("object"==typeof e[6]?e[6].value:e[6])+"",l="object"==typeof e[6]&&Ri(e);return{c(){t=S("label"),n=S("input"),i=k(),o=C(c),a=k(),l&&l.c(),s=k(),_(n,"type","checkbox"),_(n,"name",e[2]),n.__value=r="object"==typeof e[6]?e[6].value:e[6],n.value=n.__value,e[5][0].push(n),_(t,"class","radiolabel svelte-1w17ln4")},m(r,c){w(r,t,c),b(t,n),n.checked=~e[0].indexOf(n.__value),b(t,i),b(t,o),b(t,a),l&&l.m(t,null),b(t,s),u=A(n,"change",e[4])},p(e,i){4&i&&_(n,"name",e[2]),2&i&&r!==(r="object"==typeof e[6]?e[6].value:e[6])&&(n.__value=r),n.value=n.__value,1&i&&(n.checked=~e[0].indexOf(n.__value)),2&i&&c!==(c=("object"==typeof e[6]?e[6].value:e[6])+"")&&R(o,c),"object"==typeof e[6]?l?l.p(e,i):(l=Ri(e),l.c(),l.m(t,s)):l&&(l.d(1),l=null)},d(r){r&&E(t),e[5][0].splice(e[5][0].indexOf(n),1),l&&l.d(),u()}}}function Oi(t){let n,r,i,o,a=t[1],s=[];for(let e=0;e<a.length;e+=1)s[e]=Mi(_i(t,a,e));return{c(){n=S("div"),r=S("p"),i=C(t[2]),o=k();for(let e=0;e<s.length;e+=1)s[e].c();_(r,"class","radioP svelte-1w17ln4"),_(n,"class","radioContainer svelte-1w17ln4")},m(e,t){w(e,n,t),b(n,r),b(r,i),b(n,o);for(let e=0;e<s.length;e+=1)s[e].m(n,null)},p(e,[t]){if(4&t&&R(i,e[2]),7&t){let r;for(a=e[1],r=0;r<a.length;r+=1){const i=_i(e,a,r);s[r]?s[r].p(i,t):(s[r]=Mi(i),s[r].c(),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=a.length}},i:e,o:e,d(e){e&&E(n),T(s,e)}}}function Pi(e,t,n){let{items:r}=t,{Name:i}=t,{chosenValues:o=[]}=t,{isValid:a=!1}=t;const s=[[]];return e.$set=e=>{"items"in e&&n(1,r=e.items),"Name"in e&&n(2,i=e.Name),"chosenValues"in e&&n(0,o=e.chosenValues),"isValid"in e&&n(3,a=e.isValid)},e.$$.update=()=>{1&e.$$.dirty&&n(3,a=void 0!==o&&o.length>0),8&e.$$.dirty&&console.log(a)},[o,r,i,a,function(){o=function(e){const t=[];for(let n=0;n<e.length;n+=1)e[n].checked&&t.push(e[n].__value);return t}(s[0]),n(0,o)},s]}class Vi extends Ne{constructor(e){super(),Ae(this,e,Pi,Oi,s,{items:1,Name:2,chosenValues:0,isValid:3})}}function Li(e){let t,n;return{c(){t=S("p"),n=C(e[1]),_(t,"class","svelte-1csx3g4")},m(e,r){w(e,t,r),b(t,n)},p(e,t){2&t&&R(n,e[1])},d(e){e&&E(t)}}}function $i(e){let t;const n=new ct({props:{$$slots:{default:[Fi]},$$scope:{ctx:e}}});return n.$on("close",e[7]),{c(){Ie(n.$$.fragment)},m(e,r){Ce(n,e,r),t=!0},p(e,t){const r={};16384&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(me(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){ke(n,e)}}}function Fi(t){let n;const r=new xr({});return r.$on("accept",t[8]),{c(){Ie(r.$$.fragment)},m(e,t){Ce(r,e,t),n=!0},p:e,i(e){n||(me(r.$$.fragment,e),n=!0)},o(e){ge(r.$$.fragment,e),n=!1},d(e){ke(r,e)}}}function qi(e){let t,n,r,i,o,a,s,u,c,l,h,f,d,p;function m(t){e[11].call(null,t)}let g={Name:"Email",type:"email",errorMessege:"This field is required."};void 0!==e[4]&&(g.value=e[4]);const y=new Hn({props:g});function v(t){e[12].call(null,t)}function T(t){e[13].call(null,t)}J.push(()=>Se(y,"value",m));let I={items:e[5],Name:"Choose the workshops you would like to attempt."};void 0!==e[2]&&(I.isValid=e[2]),void 0!==e[3]&&(I.chosenValues=e[3]);const C=new Vi({props:I});J.push(()=>Se(C,"isValid",v)),J.push(()=>Se(C,"chosenValues",T));const A=new et({props:{primary:!0,text:"Submit"}});A.$on("click",e[6]);let N=""!==e[1]&&void 0!==e[1]&&Li(e),x=e[0]&&$i(e);return{c(){t=S("section"),n=S("form"),r=S("div"),i=S("div"),Ie(y.$$.fragment),a=k(),Ie(C.$$.fragment),c=k(),l=S("div"),Ie(A.$$.fragment),h=k(),N&&N.c(),f=k(),x&&x.c(),d=D(),_(l,"class","FormControls svelte-1csx3g4"),_(i,"class","FormStageContainer svelte-1csx3g4"),_(r,"class","FormContentContainer svelte-1csx3g4"),_(n,"id","msform"),_(n,"class","svelte-1csx3g4"),_(t,"class","svelte-1csx3g4")},m(e,o){w(e,t,o),b(t,n),b(n,r),b(r,i),Ce(y,i,null),b(i,a),Ce(C,i,null),b(i,c),b(i,l),Ce(A,l,null),b(i,h),N&&N.m(i,null),w(e,f,o),x&&x.m(e,o),w(e,d,o),p=!0},p(e,[t]){const n={};!o&&16&t&&(o=!0,n.value=e[4],ie(()=>o=!1)),y.$set(n);const r={};!s&&4&t&&(s=!0,r.isValid=e[2],ie(()=>s=!1)),!u&&8&t&&(u=!0,r.chosenValues=e[3],ie(()=>u=!1)),C.$set(r),""!==e[1]&&void 0!==e[1]?N?N.p(e,t):(N=Li(e),N.c(),N.m(i,null)):N&&(N.d(1),N=null),e[0]?x?(x.p(e,t),me(x,1)):(x=$i(e),x.c(),me(x,1),x.m(d.parentNode,d)):x&&(de(),ge(x,1,1,()=>{x=null}),pe())},i(e){p||(me(y.$$.fragment,e),me(C.$$.fragment,e),me(A.$$.fragment,e),me(x),p=!0)},o(e){ge(y.$$.fragment,e),ge(C.$$.fragment,e),ge(A.$$.fragment,e),ge(x),p=!1},d(e){e&&E(t),ke(y),ke(C),ke(A),N&&N.d(),e&&E(f),x&&x.d(e),e&&E(d)}}}function Bi(e,t,n){let r,i,o,a,s,u=[{value:"Blockchain",description:"\n        <p>Pre-Requisites:\n        <ol>\n        <li> Basic understanding of WEB\n        architecture (HTTP, REST).</li>\n\n        <li> Basic knowledge of HTML.</li>\n        <li> Basic knowledge of JavaScript.</li>\n\n        <li> Have an understanding of Unix\n        commands and NodeJS.</li>\n        </ol>\n        </p>\n    "},"AR/VR","IOT","Cyber Security","Intellectual Property Rights","Startups Legal Issues","Shareholders agreement & termsheet","Digital Fabrication","AR","Deep Learning","How to get investment ready","How to manage your Startup"],c=!1;G(()=>{document.querySelector("html").style.backgroundColor=" rgb(129, 111, 131)"}),Q(()=>{document.querySelector("html").style.backgroundColor=""});return e.$$.update=()=>{20&e.$$.dirty&&(s=!(""===a||!c)),8&e.$$.dirty&&console.log(o)},[r,i,c,o,a,u,async()=>{if(""===a)return void n(1,i=" Please enter your Email!");if(!c)return void n(1,i=" Please Choose at least 1 workshop! ");let e=!1;await qn.collection("mutexattendes").where("info.Email","==",a).get().then((function(t){console.log(t,!t.empty),e=!t.empty})),e?qn.collection("workshops").add({Email:a,workshopsChosen:o}).then((function(){console.log("Document successfully written!"),n(0,r=!0)})).catch((function(e){console.error("Error writing document: ",e)})):n(1,i=" your Email doesn't exit in our Database , Did you sign up for the event itself ? ")},()=>{n(0,r=!r)},e=>{je("/#/")},s,{stagemap:{0:"companyInfo",1:"contactInfo"},companyInfo:{},contactInfo:{}},function(e){a=e,n(4,a)},function(e){c=e,n(2,c)},function(e){o=e,n(3,o)}]}const Ui={"/":wn,"/competition-registration":class extends Ne{constructor(e){super(),Ae(this,e,Hr,Qr,s,{},[-1,-1])}},"/exhibition-Form":class extends Ne{constructor(e){super(),Ae(this,e,fi,hi,s,{},[-1,-1])}},"/mutex-Form":class extends Ne{constructor(e){super(),Ae(this,e,xi,Ni,s,{},[-1,-1])}},"/workshops-Form":class extends Ne{constructor(e){super(),Ae(this,e,Bi,qi,s,{})}},"*":wn};function ji(t){let n,r;const i=new vt({}),o=new We({props:{routes:Ui}});return{c(){Ie(i.$$.fragment),n=k(),Ie(o.$$.fragment)},m(e,t){Ce(i,e,t),w(e,n,t),Ce(o,e,t),r=!0},p:e,i(e){r||(me(i.$$.fragment,e),me(o.$$.fragment,e),r=!0)},o(e){ge(i.$$.fragment,e),ge(o.$$.fragment,e),r=!1},d(e){ke(i,e),e&&E(n),ke(o,e)}}}return new class extends Ne{constructor(e){super(),Ae(this,e,null,ji,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
